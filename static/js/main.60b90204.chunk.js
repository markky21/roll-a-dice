(this["webpackJsonproll-a-dice"]=this["webpackJsonproll-a-dice"]||[]).push([[2],{111:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return c})),a.d(t,"c",(function(){return s})),a.d(t,"d",(function(){return l}));var n,r=a(0),i=a.n(r),o=a(9);!function(e){e.DICE_ROLL="DICE_ROLL",e.NEW_PLAYER="NEW_PLAYER"}(n||(n={}));var c={roomName:{name:"roomName",label:"Name of the Room *",fullWidth:!0,maxLength:80},description:{name:"description",label:"Room description",multiline:!0,fullWidth:!0,maxLength:1024},campaignTitle:{name:"campaignTitle",label:"Current campaign tittle",fullWidth:!0,maxLength:80},roomImage:{name:"roomImage",label:"Room image URL",fullWidth:!0,maxLength:256},gameMasterAvatar:{name:"gameMasterAvatar",label:"Game master avatar URL",fullWidth:!0,maxLength:256},maxPlayers:{name:"maxPlayers",label:"Maximum players *",multiline:!1,fullWidth:!0,type:"number",InputProps:{inputProps:{min:1,max:8}}},diceType:{name:"diceType",label:"Allowed dice *",options:[{label:o.a.D4,value:o.a.D4},{label:o.a.D6,value:o.a.D6},{label:o.a.D8,value:o.a.D8},{label:o.a.D10,value:o.a.D10},{label:o.a.D12,value:o.a.D12},{label:o.a.D20,value:o.a.D20},{label:o.a.D100,value:o.a.D100}]}},s={d4:{label:i.a.createElement("span",{style:{width:"48px",display:"inline-block"}},o.a.D4),name:o.a.D4},d6:{label:i.a.createElement("span",{style:{width:"48px",display:"inline-block"}},o.a.D6),name:o.a.D6},d8:{label:i.a.createElement("span",{style:{width:"48px",display:"inline-block"}},o.a.D8),name:o.a.D8},d10:{label:i.a.createElement("span",{style:{width:"48px",display:"inline-block"}},o.a.D10),name:o.a.D10},d12:{label:i.a.createElement("span",{style:{width:"48px",display:"inline-block"}},o.a.D12),name:o.a.D12},d20:{label:i.a.createElement("span",{style:{width:"48px",display:"inline-block"}},o.a.D20),name:o.a.D20},d100:{label:i.a.createElement("span",{style:{width:"48px",display:"inline-block"}},o.a.D100),name:o.a.D100}},l={characterName:{name:"characterName",label:"Name of character",fullWidth:!0,maxLength:80},characterAvatarUrl:{name:"characterAvatarUrl",label:"Character avatar URL",fullWidth:!0,maxLength:256},characterDescription:{name:"characterDescription",label:"Character description",multiline:!0,fullWidth:!0,maxLength:1024},notes:{name:"notes",label:"Notes (not visible for other players)",multiline:!0,fullWidth:!0,maxLength:2024}}},127:function(e,t,a){"use strict";var n=a(0),r=a.n(n),i=a(35),o=a(12),c=a(48),s=a(36),l=a(103),u=a(207),d=a(387),h=a(692),m=a(394),f=a(392),p=(a(130),a(686)),v=a(687),g=a(698),b=a(688),_=a(685),y=a(388),w=a(699),E=a(700),O=a(289),x=a(58),j=a(208),S=function(e){return Object(x.action)(j.a.PENDING,e)},C=a(60),D=a(111),R=a(17),T=a(684),A=a(134),k=Array.isArray,M=Object.keys,P=Object.prototype.hasOwnProperty,N=function e(t,a){if(t===a)return!0;if(t&&a&&"object"==typeof t&&"object"==typeof a){var n,r,i=k(t),o=k(a);if(i&&o){if((n=t.length)!=a.length)return!1;for(var c=n;0!==c--;)if(!e(t[c],a[c]))return!1;return!0}if(i!=o)return!1;var s=t instanceof Date,l=a instanceof Date;if(s!=l)return!1;if(s&&l)return t.getTime()==a.getTime();var u=t instanceof RegExp,d=a instanceof RegExp;if(u!=d)return!1;if(u&&d)return t.toString()==a.toString();var h=M(t);if((n=h.length)!==M(a).length)return!1;for(var m=n;0!==m--;)if(!P.call(a,h[m]))return!1;for(var f=n;0!==f--;)if(!e(t[r=h[f]],a[r]))return!1;return!0}return t!==t&&a!==a},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e,t){return N(e,t)};return function(t){return t.pipe(Object(T.a)(e))}},L=a(153),U=function(){function e(){var t=this;Object(l.a)(this,e),this.store=A.a,this.takeUntil$=new d.a,this._store$=new h.a(1),this._storeUnsubscribeFn=void 0,this._storeUnsubscribeFn=this.store.subscribe((function(){t._store$.next(t.store.getState())}))}return Object(u.a)(e,[{key:"getDiceSetForm",value:function(){return this.store$.pipe(Object(y.a)((function(e){return e.form.diceSetForm})),I())}},{key:"getDiceSetFormValues",value:function(){return this.store$.pipe(Object(y.a)((function(e){var t;return null===(t=e.form.diceSetForm)||void 0===t?void 0:t.values})),I())}},{key:"getSelectedRoomData$",value:function(){return this.store$.pipe(Object(y.a)((function(e){return e.firestore.data.selectedRoom})),Object(_.a)((function(e){return!!e})))}},{key:"getSelectedRoomDataLogs$",value:function(){return this.getSelectedRoomData$().pipe(Object(y.a)((function(e){return e.logs})),Object(_.a)((function(e){return!!e})))}},{key:"getSelectedRoomLastDiceThrowLog$",value:function(){return this.getSelectedRoomDataLogs$().pipe(Object(y.a)((function(e){return e[e.length?e.length-1:0]})),Object(_.a)((function(e){return!!e&&e.type===D.a.DICE_ROLL})),Object(T.a)((function(e,t){return e.timestamp===t.timestamp})),Object(y.a)((function(e){return Object(R.a)({},e,{payload:Object(R.a)({},e.payload,{diceSet:L.a.sortObjectWithDiceKey(e.payload.diceSet),result:L.a.sortObjectWithDiceKey(e.payload.result)})})})))}},{key:"getUserProfile$",value:function(){return this.store$.pipe(Object(y.a)((function(e){return e.firebase.profile})))}},{key:"dispatch",value:function(e){return this.store.dispatch(e)}},{key:"hostDestroyed",value:function(){this.takeUntil$.next(),this._storeUnsubscribeFn(),e.instance=null}},{key:"store$",get:function(){return this._store$.asObservable()}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}();U.instance=void 0;var F=a(91),$=function(){function e(t,a){var n=this;Object(l.a)(this,e),this.firestore=t,this.toast=a,this.diceThrow$=new d.a,this.diceBeforeThrow$=new d.a,this.diceAfterThrow$=new h.a(1),this.requestNewThrow$=new d.a,this.diceThrowDelayedWhen$=this.diceThrow$.pipe(Object(p.a)((function(){return n.diceAfterThrow$}))),this.profile=null,this.roomUid=null,this.takeUntil$=new d.a,this.storeService=U.getInstance(),this.createSubscriptions()}return Object(u.a)(e,[{key:"hostDestroyed",value:function(){this.takeUntil$.next(),e.instance=null,this.setDiceRolling(!1)}},{key:"createSubscriptions",value:function(){var e=this;this.diceBeforeThrow$.pipe(Object(v.a)(this.takeUntil$)).subscribe((function(){e.setDiceRolling(!0),e.setIsPending(!1)})),this.diceAfterThrow$.pipe(Object(v.a)(this.takeUntil$)).subscribe((function(){e.setDiceRolling(!1),e.setIsPending(!1)})),this.handleRequestNewThrow$().subscribe(),this.performDiceThrowWhenNewDiceThrowLogAppears$().subscribe()}},{key:"setDiceRolling",value:function(e){this.storeService.dispatch(O.a.diceRolling(e))}},{key:"setIsPending",value:function(e){this.storeService.dispatch(S(e))}},{key:"performDiceThrowWhenNewDiceThrowLogAppears$",value:function(){var e=this;return this.storeService.getSelectedRoomLastDiceThrowLog$().pipe(Object(g.a)((function(t){var a=t.payload;return e.diceThrow$.next(a)})),Object(v.a)(this.takeUntil$))}},{key:"handleRequestNewThrow$",value:function(){var e=this;return this.requestNewThrow$.pipe(Object(g.a)((function(){e.setDiceRolling(!0),e.setIsPending(!0)})),Object(b.a)(this.storeService.getDiceSetFormValues()),Object(_.a)((function(t){var a=Object(s.a)(t,2)[1],n=Object.values(a).every((function(e){return 0===e}));return n&&(e.setDiceRolling(!1),e.setIsPending(!1),e.toast.setSnackbarConfig({type:F.a.WARNING,open:!0,text:"Set at least one dice"})),!n})),Object(y.a)((function(e){var t=Object(s.a)(e,2),a=t[0],n=t[1];return{diceThrowConfig:a,diceSet:n,result:L.a.generateThrowResultFromDiceSet(n)}})),Object(w.a)((function(t){return e.roomUid?e.createNewThrowLogInRoomLogs$(t):Object(m.a)(null).pipe(Object(g.a)((function(){return e.diceThrow$.next(t)})),Object(y.a)((function(){return t})))})),Object(v.a)(this.takeUntil$))}},{key:"createNewThrowLogInRoomLogs$",value:function(e){var t=this;if(!this.roomUid)return Object(m.a)(null).pipe(Object(g.a)((function(){return t.toast.setSnackbarConfig({type:F.a.ERROR,open:!0,text:"Upss.. there was an error set new throw"})})),Object(E.a)(1e3),Object(g.a)((function(){t.setDiceRolling(!1),t.setIsPending(!1)})));var a=this.firestore.doc("".concat(C.a.ROOMS,"/").concat(this.roomUid));return Object(f.a)(this.firestore.runTransaction((function(n){return n.get(a).then((function(r){var i,o={authorUid:null===(i=t.profile)||void 0===i?void 0:i.uid,payload:e,timestamp:Date.now(),type:D.a.DICE_ROLL},s=[].concat(Object(c.a)(r.data().logs),[o]);return n.update(a,{logs:s})}))}))).pipe(Object(y.a)((function(){return e})))}}],[{key:"getInstance",value:function(t,a){return e.instance||(e.instance=new e(t,a)),e.instance}}]),e}();$.instance=void 0;var H=a(38),B=a(65);a.d(t,"a",(function(){return W})),a.d(t,"b",(function(){return z}));var W=r.a.createContext(null),z=function(e){var t=e.children,a=Object(i.useFirestore)(),c=Object(n.useContext)(F.b),s=$.getInstance(a,c),l=Object(o.useSelector)(H.a.userProfile),u=Object(o.useSelector)(B.a.selectedRoomUid);return Object(n.useEffect)((function(){s.profile=l}),[l]),Object(n.useEffect)((function(){s.roomUid=u||null}),[u]),Object(n.useEffect)((function(){return function(){return s.hostDestroyed()}}),[]),r.a.createElement(W.Provider,{value:s},t)}},134:function(e,t,a){"use strict";var n=a(384),r=a(27),i=a(35),o=a(209),c=a(17),s=a(694),l=a(276),u=a.n(l),d=a(205),h={selectedChat:null},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.a.SELECTED:return Object(c.a)({},e,{selectedChat:t.payload});default:return e}},f=a(210),p={match:{params:{},isExact:!1,path:"",url:""}},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.a.MATCH_CHANGE:return Object(c.a)({},e,{match:t.payload});default:return e}},g=a(59),b={selectedRoom:null,drawerOpened:!0,chatOpened:!0,playersOpened:!0,diceRolling:!1},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.a.SELECTED:return Object(c.a)({},e,{selectedRoom:t.payload});case g.a.SET_DRAWER_OPEN_VALUE:return Object(c.a)({},e,{drawerOpened:t.payload});case g.a.SET_CHAT_OPEN_VALUE:return Object(c.a)({},e,{chatOpened:t.payload});case g.a.SET_PLAYERS_OPEN_VALUE:return Object(c.a)({},e,{playersOpened:t.payload});case g.a.SET_DICE_ROLLING:return Object(c.a)({},e,{diceRolling:t.payload});default:return e}},y=a(208),w={isPending:!1},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y.a.PENDING:return Object(c.a)({},e,{isPending:t.payload});default:return e}};Object(r.c)({firebase:i.firebaseReducer,firestore:u.a});a.d(t,"a",(function(){return O}));var O=function(e){var t=[];if(window&&window.location&&"localhost"===window.location.hostname){var a=window.__REDUX_DEVTOOLS_EXTENSION__;"function"===typeof a&&t.push(a())}var l=[n.a.withExtraArgument({getFirebase:i.getFirebase,getFirestore:o.getFirestore})];0;return Object(r.e)(Object(r.c)(Object(c.a)({firebase:i.firebaseReducer,firestore:u.a,chats:m,rooms:_,location:v,form:s.a,ui:E},d)),e,r.d.apply(void 0,[r.a.apply(void 0,l)].concat(t)));var d}(window.___INITIAL_STATE__||{firebase:{authError:null}})},153:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(48),r=a(9),i=a(386),o=new i.DiceRoller,c={diceSetToString:function(e){return Object.keys(e).map((function(t){return e[t]?e[t]+t:""})).filter((function(e){return!!e.length})).join("+")},generateThrowResultFromDiceSet:function(e){var t={};return Object.keys(e).forEach((function(a){if(e[a]){var i=a===r.a.D100?"".concat(e[a]).concat(r.a.D10):"".concat(e[a]).concat(a),c=/\[(.*)\]/.exec(o.roll(i))[1].split(/,\s?/).map((function(e){return+e}));a===r.a.D100&&(c=c.map((function(e){return 10===e?0:10*e}))),t[a]=Object(n.a)(c)}})),t},sortDiceFunction:function(e,t){return parseInt(e.slice(1))-parseInt(t.slice(1))},sortObjectWithDiceKey:function(e){var t={};return Object.keys(e).sort((function(e,t){return parseInt(e.slice(1))-parseInt(t.slice(1))})).forEach((function(a){return t[a]=e[a]})),t}}},162:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n={match:function(e){return e.location.match}}},191:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n={selectedChat:function(e){return e.chats.selectedChat},profilesUidFromSelectedChat:function(e){var t,a,n;return e.chats.selectedChat&&(null===(t=e.firestore.data)||void 0===t||null===(a=t.userChats)||void 0===a||null===(n=a[e.chats.selectedChat])||void 0===n?void 0:n.players)||[]}}},204:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(58),r=a(205),i={setSelectedChat:function(e){return Object(n.action)(r.a.SELECTED,e)}}},205:function(e,t,a){"use strict";var n;a.d(t,"a",(function(){return n})),function(e){e.SELECTED="@@chats/SELECTED"}(n||(n={}))},208:function(e,t,a){"use strict";var n;a.d(t,"a",(function(){return n})),function(e){e.PENDING="@@ui/PENDING"}(n||(n={}))},210:function(e,t,a){"use strict";var n;a.d(t,"a",(function(){return n})),function(e){e.MATCH_CHANGE="@@location/MATCH_CHANGE"}(n||(n={}))},273:function(e,t,a){"use strict";var n=a(666),r=a(668),i=a(278),o=a(0),c=a.n(o),s=a(356),l=a.n(s),u=a(613),d=a(667),h=a(401),m=a(5),f=a(662),p=a(12),v=a(611),g=a(670),b=a(695),_=a(671),y=a(664),w=a(355),E=a(285);var O,x=c.a.memo(Object(m.a)((function(e){return Object(h.a)({root:{width:"100%",backgroundColor:e.palette.background.paper,height:"20vh",overflowY:"scroll"},item:{cursor:"pointer"}})}))((function(e){var t=e.classes,a=e.chats,n=e.onChatClick,r=e.selectedChat;return c.a.createElement(y.a,{className:t.root},Object.keys(a).map((function(e,i){return c.a.createElement(f.a,{key:e,in:!0,timeout:1e3*i+300},c.a.createElement(v.a,{onClick:function(){return n(e)},selected:e===r,className:t.item,button:!0,dense:!0,alignItems:"flex-start"},c.a.createElement(g.a,null,c.a.createElement(b.a,null,Object(w.a)(a[e].roomName||"No name"))),c.a.createElement(_.a,{primary:a[e].roomName||"No name",secondary:E.a.timeStampToFormattedDate(a[e].createdAt)})))})))}))),j=a(204),S=a(191),C=a(88);a.d(t,"b",(function(){return O})),a.d(t,"a",(function(){return D})),function(e){e.EMBEDDED="EMBEDDED",e.CARD="CARD"}(O||(O={}));var D=Object(m.a)((function(e){return Object(h.a)({paper:{maxWidth:936,margin:"auto",overflow:"hidden"},searchBar:{borderBottom:"1px solid rgba(0, 0, 0, 0.12)"},searchInput:{fontSize:e.typography.fontSize},block:{display:"block"},addUser:{marginRight:e.spacing(1)},contentWrapper:{margin:"16px 16px"}})}))((function(e){var t=e.classes,a=e.showSearchBar,s=void 0===a||a,h=e.viewType,m=void 0===h?O.CARD:h,v=Object(p.useSelector)(C.a.userChats)||{},g=Object(p.useSelector)(S.a.selectedChat),b=Object(p.useDispatch)();Object(o.useEffect)((function(){return function(){b(j.a.setSelectedChat(null))}}),[]),Object(o.useEffect)((function(){!g&&Object.keys(v||{}).length&&b(j.a.setSelectedChat(Object.keys(v)[0]))}),[!!g,0===Object.keys(v||{}).length]);var _=function(e){b(j.a.setSelectedChat(e))};return c.a.createElement(f.a,{in:!0},m===O.CARD?c.a.createElement(i.a,{className:t.paper},s&&c.a.createElement(n.a,{className:t.searchBar,position:"static",color:"default",elevation:0},c.a.createElement(d.a,null,c.a.createElement(r.a,{container:!0,spacing:2,alignItems:"center"},c.a.createElement(r.a,{item:!0},c.a.createElement(l.a,{className:t.block,color:"inherit"})),c.a.createElement(r.a,{item:!0,xs:!0},c.a.createElement(u.a,{fullWidth:!0,placeholder:"Search chat by room name or players",InputProps:{disableUnderline:!0,className:t.searchInput}}))))),c.a.createElement("div",{className:t.contentWrapper},c.a.createElement(x,{chats:v,onChatClick:_,selectedChat:g}))):c.a.createElement(x,{chats:v,onChatClick:_,selectedChat:g}))}))},283:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(48),r=a(88),i=a(191),o={getAllNeededPlayersUid:function(e){var t,a,o=(null===(t=r.a.selectedRoom(e))||void 0===t?void 0:t.players)||{},c=null===(a=r.a.selectedRoom(e))||void 0===a?void 0:a.gameMasterUid,s=i.a.profilesUidFromSelectedChat(e)||[];return[].concat(Object(n.a)(s),Object(n.a)(Object.keys(o)),[c]).filter((function(e,t,a){return!!e&&a.indexOf(e)===t}))},isGameMasterOfSelectedRoom:function(e){return(e.firestore.data.selectedRoom?e.firestore.data.selectedRoom.gameMasterUid:"unknown")===e.firebase.profile.uid},getFormCreateRoom:function(e){return e.form.createRoom.values},getFormPlayerProfile:function(e){return e.form.playerProfile.values},isUserARoomPlayerOrGameMaster:function(e){var t,a;return!(!e.firestore.data.selectedRoom||!e.firebase.profile.uid)&&(!!(null===(t=e.firestore.data.selectedRoom)||void 0===t?void 0:t.players[e.firebase.profile.uid])||(null===(a=e.firestore.data.selectedRoom)||void 0===a?void 0:a.gameMasterUid)===e.firebase.profile.uid)}}},285:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(275),r=a.n(n),i={timeStampToFormattedDate:function(e){return r()(new Date(new Date(+e))).format("dddd, MMMM D YYYY")},timeStampToDetailedTime:function(e){return r()(new Date(new Date(+e))).format("h:mm:ss")}}},286:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(0),r=a.n(n),i=a(401),o=a(5);var c=r.a.memo(Object(o.a)((function(e){return Object(i.a)({root:{display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"flex-start",height:"100%",width:"100%",backgroundColor:e.palette.background.default,position:"absolute",zIndex:1e4,left:0,top:0},progress:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},svg:{width:"15vw",height:"15vh"}})}))((function(e){var t=e.classes,a=e.style;return r.a.createElement("div",{className:t.root,style:a},r.a.createElement("div",{className:t.progress},r.a.createElement("img",{className:t.svg,src:"".concat("/roll-a-dice","/assets/svg/loader-knot.svg"),alt:"Roll a Dice..."})))})))},287:function(e,t,a){"use strict";a.d(t,"c",(function(){return w})),a.d(t,"a",(function(){return E})),a.d(t,"b",(function(){return O}));var n=a(48),r=a(107),i=a(0),o=a.n(i),c=a(397),s=a(613),l=a(279),u=a(395),d=a(399),h=a(280),m=a(400),f=a(396),p=a(618),v=a(624),g=a(161),b=a(398),_=Object(b.a)((function(e){return{formField:{marginBottom:e.spacing(2)},sliderFormField:{width:"100%",marginLeft:0}}})),y=function(e){var t=e.touched,a=e.error;return t&&a?o.a.createElement(c.a,null,t&&a):void 0},w=o.a.memo((function(e){var t=_();return o.a.createElement(g.a,Object.assign({},e,{component:function(e){var t=e.label,a=e.input,n=e.meta,i=n.touched,c=n.invalid,l=n.error,u=Object(r.a)(e,["label","input","meta"]);return o.a.createElement(s.a,Object.assign({variant:"outlined",label:t,placeholder:t,error:i&&c,helperText:i&&l},a,u))},className:t.formField}))})),E=(o.a.memo((function(e){var t=_();return o.a.createElement(g.a,Object.assign({},e,{type:"checkbox",component:function(e){var t=e.input,a=(e.label,e.meta),n=a.touched,i=a.error,c=e.children,s=Object(r.a)(e,["input","label","meta","children"]);return o.a.createElement(l.a,{error:n&&i},o.a.createElement(u.a,{htmlFor:"age-native-simple"},"Age"),o.a.createElement(d.a,Object.assign({variant:"outlined",native:!0},t,s,{inputProps:{name:"age",id:"age-native-simple"}}),c),y({touched:n,error:i}))},className:t.formField}))})),o.a.memo((function(e){var t=_();return o.a.createElement(g.a,Object.assign({},e,{type:"checkbox",component:function(e){var t=e.input,a=e.label;return o.a.createElement(h.a,{control:o.a.createElement(m.a,{checked:!!t.value,onChange:t.onChange}),label:a})},className:t.formField}))})),o.a.memo((function(e){var t=_();return o.a.createElement(g.a,Object.assign({},e,{type:"checkbox",component:function(e){var t=e.input,a=e.meta,r=e.options,i=e.label,c=t.name,s=t.onChange,u=a.touched,d=a.error,v=t.value,g=r.map((function(e,t){var a=e.label,r=e.value,i=v.includes(r);return o.a.createElement(h.a,{key:t,control:o.a.createElement(m.a,{checked:i,onChange:function(e){var t=Object(n.a)(v);return e.target.checked?t.push(r):t.splice(t.indexOf(r),1),s(t)},name:"".concat(c,"[").concat(t,"]"),value:r}),label:a})}));return o.a.createElement(l.a,{error:u&&!!d,component:"fieldset"},o.a.createElement(f.a,{component:"legend"},i),o.a.createElement(p.a,{row:!0},g),y({touched:u,error:d}))},className:t.formField}))}))),O=o.a.memo((function(e){var t=_();function a(e){return"".concat(e)}return o.a.createElement(g.a,Object.assign({},e,{component:function(e){var n=e.min,i=void 0===n?0:n,c=e.max,s=void 0===c?16:c,l=e.label,u=e.input,d=u.value,m=u.onChange,f=Object(r.a)(u,["value","onChange"]),p=e.meta,g=(p.touched,p.invalid,p.error,Object(r.a)(e,["min","max","label","input","meta"]));return o.a.createElement(h.a,{className:t.sliderFormField,label:l,labelPlacement:"start",control:o.a.createElement(v.a,Object.assign({style:{marginBottom:0},defaultValue:0,getAriaValueText:a,"aria-labelledby":"number-of-dices",valueLabelDisplay:"auto",step:1,marks:!0,min:i,max:s,value:"number"===typeof d?d:0,onChange:function(e,t){return m(t)}},f,g))})},className:t.formField}))}))},288:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(58),r=a(210),i={matchChange:function(e){return Object(n.action)(r.a.MATCH_CHANGE,e)}}},289:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(58),r=a(59),i={setSelectedRoom:function(e){return Object(n.action)(r.a.SELECTED,e)},setDrawerOpenValue:function(e){return Object(n.action)(r.a.SET_DRAWER_OPEN_VALUE,e)},setChatOpenValue:function(e){return Object(n.action)(r.a.SET_CHAT_OPEN_VALUE,e)},setPlayersOpenValue:function(e){return Object(n.action)(r.a.SET_PLAYERS_OPEN_VALUE,e)},diceRolling:function(e){return Object(n.action)(r.a.SET_DICE_ROLLING,e)}}},30:function(e,t,a){"use strict";var n;a.d(t,"a",(function(){return n})),function(e){e.CHATS_PATH="/chats",e.CHATS_PATH_ID="/chats/:chatId",e.HOME_PATH="/",e.ROOM_CREATE_PATH="/rooms/create",e.ROOM_PATH="/room",e.ROOMS_PATH="/rooms",e.ROOMS_PATH_ID="/room/:roomId"}(n||(n={}))},355:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=function(e){return e.split(" ").map((function(e){return e.charAt(0)})).join("").substring(0,2).toUpperCase()}},375:function(e,t,a){"use strict";var n=a(17),r=a(36),i=a(4),o=a(0),c=a.n(o),s=a(401),l=a(5),u=a(662),d=a(278),h=a(387),m=a(689),f=a(388),p=a(685),v=a(700),g=a(687),b={idCanvas:"canvas",idLabel:"label",idSet:"set",idSelectorDiv:"selector_div",idInfoDiv:"info_div",useTrueRandom:!1,useShadows:!0,whiteDice:!1,noresult:!1,diceThrow$:null,diceThrowResult$:null},_=a(127),y=a(48),w=a(389),E=a(14),O=a(21),x=a.n(O),j={},S=j;j.copyto=function(e,t){if(null==e||"object"!==typeof e)return e;if(e instanceof Array)for(var a=e.length-1;a>=0;--a)t[a]=S.copy(e[a]);else for(var a in e)e.hasOwnProperty(a)&&(t[a]=S.copy(e[a]));return t},j.copy=function(e){return e?j.copyto(e,new e.constructor):e},j.element=function(e,t,a,n){var r=document.createElement(e);if(t)for(var i in t)r.setAttribute(i,t[i]);return a&&a.appendChild(r),void 0!==n&&S.inner(n,r),r},j.inner=function(e,t){return t.appendChild(void 0!=e.nodeName?e:document.createTextNode(e)),t},j.id=function(e){return document.getElementById(e)},j.set=function(e,t){for(var a in t)e.setAttribute(a,t[a]);return e},j.clas=function(e,t,a){var n=t?t.split(/\s+/):[],r=a?a.split(/\s+/):[],i=(e.getAttribute("class")||"").split(/\s+/);for(var o in i[0]||(i=[]),n){var c=i.indexOf(n[o]);c>=0&&i.splice(c,1)}for(var o in r)r[o]&&i.indexOf(r[o])<0&&i.push(r[o]);e.setAttribute("class",i.join(" "))},j.empty=function(e){if(e.childNodes)for(;e.childNodes.length;)e.removeChild(e.firstChild)},j.remove=function(e){if(e)if(e.parentNode)e.parentNode.removeChild(e);else for(var t=e.length-1;t>=0;--t)e[t].parentNode.removeChild(e[t])},j.bind=function(e,t,a,n){if(e)if(t.constructor===Array)for(var r in t)e.addEventListener(t[r],a,n||!1);else e.addEventListener(t,a,n||!1)},j.unbind=function(e,t,a,n){if(t.constructor===Array)for(var r in t)e.removeEventListener(t[r],a,n||!1);else e.removeEventListener(t,a,n||!1)},j.one=function(e,t,a,n){j.bind(e,t,(function r(i){a.call(this,i),j.unbind(e,t,r,n)}),n)},j.raise_event=function(e,t,a,n){var r=document.createEvent("UIEvents");r.initEvent(t,void 0==a||a,void 0==n||n),e.dispatchEvent(r)},j.raise=function(e,t,a,n,r){var i=document.createEvent("CustomEvent");i.initCustomEvent(t,n,r,a),e.dispatchEvent(i)},document.getElementsByClassName?j.get_elements_by_class=function(e,t){return(t||document).getElementsByClassName(e)}:j.get_elements_by_class=function(e,t){for(var a=(t=t||document).getElementsByTagName("*"),n=e.split(/\s+/),r=[],i=a.length-1;i>=0;--i)for(var o=n.length-1;o>=0;--o){var c=a[i].getAttribute("class");if(c&&-1!=c.search("\\b"+n[o]+"\\b")){r.push(a[i]);break}}return r},j.rpc=function(e,t,a){var n=new XMLHttpRequest;n.open("post","f",!0),n.onreadystatechange=function(){4==n.readyState&&t.call(n,a?n.responseText:JSON.parse(n.responseText))},n.send(JSON.stringify(e))},j.uuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},j.get_url_params=function(){var e=window.location.search.substring(1).split("&"),t={};for(var a in e){var n=e[a].split("=");t[n[0]]=decodeURI(n[1])}return t},j.get_mouse_coords=function(e){var t=e.changedTouches;return t?{x:t[0].clientX,y:t[0].clientY}:{x:e.clientX,y:e.clientY}},j.deferred=function(){var e=!1,t=[],a=[];function n(){for(;t.length;)t.shift().apply(this,a)}return{promise:function(){return{then:function(e){var a=j.deferred(),n=a.promise();return t.push((function(){var t=e.apply(this,arguments);t&&"done"in t?t.done(a.resolve):a.resolve.apply(this,arguments)})),n},done:function(a){return t.push(a),e&&n(),this},cancel:function(){t=[]}}},resolve:function(){e=!0,a=Array.prototype.slice.call(arguments,0),n()}}},j.when=function(e){var t=j.deferred(),a=e.length,n=0;0==a&&t.resolve();for(var r=0;r<a;++r)e[r].done((function(){++n==a&&t.resolve()}));return t.promise()},function(e){var t=[];function a(){return t.length?t.pop():Math.random()}function n(e,t,a,n,r,i){for(var o=new Array(e.length),c=0;c<e.length;++c)o[c]=(new E.q).fromArray(e[c]).normalize();var s=function(e,t,a){for(var n=[],r=[],i=new Array(e.length),o=0;o<e.length;++o)i[o]=[];for(o=0;o<t.length;++o){for(var c=t[o],s=c.length-1,l=new E.q,u=new Array(s),d=0;d<s;++d){var h=e[c[d]].clone();l.add(h),i[c[d]].push(u[d]=n.push(h)-1)}l.divideScalar(s);for(d=0;d<s;++d){(h=n[u[d]]).subVectors(h,l).multiplyScalar(a).addVectors(h,l)}u.push(c[s]),r.push(u)}for(o=0;o<t.length-1;++o)for(d=o+1;d<t.length;++d){for(var m=[],f=-1,p=0;p<t[o].length-1;++p){var v=t[d].indexOf(t[o][p]);v>=0&&v<t[d].length-1&&(f>=0&&p!=f+1?m.unshift([o,p],[d,v]):m.push([o,p],[d,v]),f=p)}4==m.length&&r.push([r[m[0][0]][m[0][1]],r[m[1][0]][m[1][1]],r[m[3][0]][m[3][1]],r[m[2][0]][m[2][1]],-1])}for(o=0;o<i.length;++o){for(var g=i[o],b=(u=[g[0]],g.length-1);b;){for(p=t.length;p<r.length;++p){var _=r[p].indexOf(u[u.length-1]);if(_>=0&&_<4){-1==--_&&(_=3);var y=r[p][_];if(g.indexOf(y)>=0){u.push(y);break}}}--b}u.push(-1),r.push(u)}return{vectors:n,faces:r}}(o,t,i),l=function(e,t,a,n,r){for(var i=new E.e,o=0;o<e.length;++o){var c=e[o].multiplyScalar(a);c.index=i.vertices.push(c)-1}for(o=0;o<t.length;++o)for(var s=t[o],l=s.length-1,u=2*Math.PI/l,d=0;d<l-2;++d)i.faces.push(new E.c(s[0],s[d+1],s[d+2],[i.vertices[s[0]],i.vertices[s[d+1]],i.vertices[s[d+2]]],0,s[l]+1)),i.faceVertexUvs[0].push([new E.p((Math.cos(r)+1+n)/2/(1+n),(Math.sin(r)+1+n)/2/(1+n)),new E.p((Math.cos(u*(d+1)+r)+1+n)/2/(1+n),(Math.sin(u*(d+1)+r)+1+n)/2/(1+n)),new E.p((Math.cos(u*(d+2)+r)+1+n)/2/(1+n),(Math.sin(u*(d+2)+r)+1+n)/2/(1+n))]);return i.computeFaceNormals(),i.boundingSphere=new E.m(new E.q,a),i}(s.vectors,s.faces,a,n,r);return l.cannon_shape=function(e,t,a){for(var n=new Array(e.length),r=new Array(t.length),i=0;i<e.length;++i){var o=e[i];n[i]=new x.a.Vec3(o.x*a,o.y*a,o.z*a)}for(i=0;i<t.length;++i)r[i]=t[i].slice(0,t[i].length-1);return new x.a.ConvexPolyhedron(n,r)}(o,t,a),l}function r(e){return Math.pow(2,Math.floor(Math.log(e)/Math.log(2)))}this.use_true_random=!0,this.frame_rate=1/60,this.standart_d20_dice_face_labels=[" ","0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20"],this.standart_d100_dice_face_labels=[" ","00","10","20","30","40","50","60","70","80","90"],this.create_dice_materials=function(e,t,a){function n(e,n,i){if(void 0==e)return null;var o=document.createElement("canvas"),c=o.getContext("2d"),s=2*r(t+2*t*a);o.width=o.height=s,c.font=s/(1+2*a)+"pt Arial",c.fillStyle=i,c.fillRect(0,0,o.width,o.height),c.textAlign="center",c.textBaseline="middle",c.fillStyle=n,c.fillText(e,o.width/2,o.height/2),"6"!=e&&"9"!=e||c.fillText("  .",o.width/2,o.height/2);var l=new E.o(o);return l.needsUpdate=!0,l}for(var i=[],o=0;o<e.length;++o)i.push(new E.g(S.copyto(this.material_options,{map:n(e[o],this.label_color,this.dice_color)})));return i};var i=[[[],[0,0,0],[2,4,3],[1,3,4],[2,1,4],[1,2,3]],[[],[0,0,0],[2,3,4],[3,1,4],[2,4,1],[3,2,1]],[[],[0,0,0],[4,3,2],[3,4,1],[4,2,1],[3,1,2]],[[],[0,0,0],[4,2,3],[1,4,3],[4,1,2],[1,3,2]]];this.create_d4_materials=function(e,t,a){function n(a,n,i){var o=document.createElement("canvas"),c=o.getContext("2d"),s=2*r(e+t);for(var l in o.width=o.height=s,c.font=(s-t)/1.5+"pt Arial",c.fillStyle=i,c.fillRect(0,0,o.width,o.height),c.textAlign="center",c.textBaseline="middle",c.fillStyle=n,a)c.fillText(a[l],o.width/2,o.height/2-.3*s),c.translate(o.width/2,o.height/2),c.rotate(2*Math.PI/3),c.translate(-o.width/2,-o.height/2);var u=new E.o(o);return u.needsUpdate=!0,u}for(var i=[],o=0;o<a.length;++o)i.push(new E.g(S.copyto(this.material_options,{map:n(a[o],this.label_color,this.dice_color)})));return i},this.create_d4_geometry=function(e){return n([[1,1,1],[-1,-1,1],[-1,1,-1],[1,-1,-1]],[[1,0,2,1],[0,1,3,2],[0,3,2,3],[1,2,3,4]],e,-.1,7*Math.PI/6,.96)},this.create_d6_geometry=function(e){return n([[-1,-1,-1],[1,-1,-1],[1,1,-1],[-1,1,-1],[-1,-1,1],[1,-1,1],[1,1,1],[-1,1,1]],[[0,3,2,1,1],[1,2,6,5,2],[0,1,5,4,3],[3,7,6,2,4],[0,4,7,3,5],[4,5,6,7,6]],e,.1,Math.PI/4,.96)},this.create_d8_geometry=function(e){return n([[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],[[0,2,4,1],[0,4,3,2],[0,3,5,3],[0,5,2,4],[1,3,4,5],[1,4,2,6],[1,2,5,7],[1,5,3,8]],e,0,-Math.PI/4/2,.965)},this.create_d10_geometry=function(e){for(var t=2*Math.PI/10,a=(Math.cos(t),-1),r=[],i=0,o=0;i<10;++i,o+=t)r.push([Math.cos(o),Math.sin(o),.105*(i%2?1:-1)]);return r.push([0,0,-1]),r.push([0,0,1]),n(r,[[5,7,11,0],[4,2,10,1],[1,3,11,2],[0,8,10,3],[7,9,11,4],[8,6,10,5],[9,1,11,6],[2,0,10,7],[3,5,11,8],[6,4,10,9],[1,0,2,a],[1,2,3,a],[3,2,4,a],[3,4,5,a],[5,4,6,a],[5,6,7,a],[7,6,8,a],[7,8,9,a],[9,8,0,a],[9,0,1,a]],e,0,6*Math.PI/5,.945)},this.create_d12_geometry=function(e){var t=(1+Math.sqrt(5))/2,a=1/t;return n([[0,a,t],[0,a,-t],[0,-a,t],[0,-a,-t],[t,0,a],[t,0,-a],[-t,0,a],[-t,0,-a],[a,t,0],[a,-t,0],[-a,t,0],[-a,-t,0],[1,1,1],[1,1,-1],[1,-1,1],[1,-1,-1],[-1,1,1],[-1,1,-1],[-1,-1,1],[-1,-1,-1]],[[2,14,4,12,0,1],[15,9,11,19,3,2],[16,10,17,7,6,3],[6,7,19,11,18,4],[6,18,2,0,16,5],[18,11,9,14,2,6],[1,17,10,8,13,7],[1,13,5,15,3,8],[13,8,12,4,5,9],[5,4,14,9,15,10],[0,12,8,10,16,11],[3,19,7,17,1,12]],e,.2,-Math.PI/4/2,.968)},this.create_d20_geometry=function(e){var t=(1+Math.sqrt(5))/2;return n([[-1,t,0],[1,t,0],[-1,-t,0],[1,-t,0],[0,-1,t],[0,1,t],[0,-1,-t],[0,1,-t],[t,0,-1],[t,0,1],[-t,0,-1],[-t,0,1]],[[0,11,5,1],[0,5,1,2],[0,1,7,3],[0,7,10,4],[0,10,11,5],[1,5,9,6],[5,11,4,7],[11,10,2,8],[10,7,6,9],[7,1,8,10],[3,9,4,11],[3,4,2,12],[3,2,6,13],[3,6,8,14],[3,8,9,15],[4,9,5,16],[2,4,11,17],[6,2,10,18],[8,6,7,19],[9,8,1,20]],e,-.2,-Math.PI/4/2,.955)},this.material_options={specular:1515554,color:15790320,shininess:40,flatShading:E.d},this.label_color="#aaaaaa",this.dice_color="#202020",this.ambient_light_color=15791611,this.spot_light_color=15720405,this.selector_back_colors={color:4210752,shininess:0,emissive:8750983},this.desk_color=14671839,this.use_shadows=!0,this.known_types=["d4","d6","d8","d10","d12","d20","d100"],this.dice_face_range={d4:[1,4],d6:[1,6],d8:[1,8],d10:[0,9],d12:[1,12],d20:[1,20],d100:[0,9]},this.dice_mass={d4:300,d6:300,d8:340,d10:350,d12:350,d20:400,d100:350},this.dice_inertia={d4:5,d6:13,d8:10,d10:9,d12:8,d20:6,d100:9},this.scale=50,this.create_d4=function(){return this.d4_geometry||(this.d4_geometry=this.create_d4_geometry(1.2*this.scale)),this.d4_material||(this.d4_material=[this.create_d4_materials(this.scale/2,2*this.scale,i[0])]),new E.f(this.d4_geometry,this.d4_material)},this.create_d6=function(){return this.d6_geometry||(this.d6_geometry=this.create_d6_geometry(.9*this.scale)),this.dice_material||(this.dice_material=this.create_dice_materials(this.standart_d20_dice_face_labels,this.scale/2,1)),new E.f(this.d6_geometry,this.dice_material)},this.create_d8=function(){return this.d8_geometry||(this.d8_geometry=this.create_d8_geometry(this.scale)),this.dice_material||(this.dice_material=this.create_dice_materials(this.standart_d20_dice_face_labels,this.scale/2,1.2)),new E.f(this.d8_geometry,this.dice_material)},this.create_d10=function(){return this.d10_geometry||(this.d10_geometry=this.create_d10_geometry(.9*this.scale)),this.dice_material||(this.dice_material=this.create_dice_materials(this.standart_d20_dice_face_labels,this.scale/2,1)),new E.f(this.d10_geometry,this.dice_material)},this.create_d12=function(){return this.d12_geometry||(this.d12_geometry=this.create_d12_geometry(.9*this.scale)),this.dice_material||(this.dice_material=this.create_dice_materials(this.standart_d20_dice_face_labels,this.scale/2,1)),new E.f(this.d12_geometry,this.dice_material)},this.create_d20=function(){return this.d20_geometry||(this.d20_geometry=this.create_d20_geometry(this.scale)),this.dice_material||(this.dice_material=this.create_dice_materials(this.standart_d20_dice_face_labels,this.scale/2,1)),new E.f(this.d20_geometry,this.dice_material)},this.create_d100=function(){return this.d10_geometry||(this.d10_geometry=this.create_d10_geometry(.9*this.scale)),this.d100_material||(this.d100_material=this.create_dice_materials(this.standart_d100_dice_face_labels,this.scale/2,1.5)),new E.f(this.d10_geometry,this.d100_material)},this.parse_notation=function(e){for(var t,a=e.split("@"),n=/\s*(\d*)([a-z]+)(\d+)(\s*(\+|\-)\s*(\d+)){0,1}\s*(\+|$)/gi,r=/(\b)*(\d+)(\b)*/gi,i={set:[],constant:0,result:[],error:!1};t=n.exec(a[0]);){if("d"==t[2]){var o=parseInt(t[1]);""==t[1]&&(o=1);var c="d"+t[3];if(-1!=this.known_types.indexOf(c)){for(;o--;)i.set.push(c);t[5]&&t[6]&&("+"==t[5]?i.constant+=parseInt(t[6]):i.constant-=parseInt(t[6]))}else i.error=!0}else i.error=!0}for(;t=r.exec(a[1]);)i.result.push(parseInt(t[2]));return i},this.stringify_notation=function(e){var t={},a="";for(var n in e.set)t[e.set[n]]?++t[e.set[n]]:t[e.set[n]]=1;for(var n in t)a.length&&(a+=" + "),a+=(t[n]>1?t[n]:"")+n;return e.constant&&(e.constant>0?a+=" + "+e.constant:a+=" - "+Math.abs(e.constant)),a};var o=this;function c(e){var t=a()*Math.PI/5-Math.PI/5/2,n={x:e.x*Math.cos(t)-e.y*Math.sin(t),y:e.x*Math.sin(t)+e.y*Math.cos(t)};return 0==n.x&&(n.x=.01),0==n.y&&(n.y=.01),n}function s(e){for(var t,a=new E.q(0,0,"d4"==e.dice_type?-1:1),n=2*Math.PI,r=0,i=e.geometry.faces.length;r<i;++r){var o=e.geometry.faces[r];if(0!=o.materialIndex){var c=o.normal.clone().applyQuaternion(e.body.quaternion).angleTo(a);c<n&&(n=c,t=o)}}var s=t.materialIndex-1;return"d100"==e.dice_type&&(s*=10),"d10"==e.dice_type&&0==s&&(s=10),s}function l(e){for(var t=[],a=0,n=e.length;a<n;++a)t.push(s(e[a]));return t}function u(e,t,a){var n=o.dice_face_range[e.dice_type];if("d100"==e.dice_type&&(t/=10),"d100"==e.dice_type&&(a/=10),"d10"!=e.dice_type&&"d100"!=e.dice_type||10!=t||(t=0),"d10"==e.dice_type&&10==a&&(a=0),t>=n[0]&&t<=n[1]){for(var r=t-a,c=e.geometry.clone(),s=0,l=c.faces.length;s<l;++s){var u=c.faces[s].materialIndex;if(0!=u){for(u+=r-1;u>n[1];)u-=n[1];for(;u<n[0];)u+=n[1];c.faces[s].materialIndex=u+1}}"d4"==e.dice_type&&0!=r&&(r<0&&(r+=4),e.material=o.create_d4_materials(o.scale/2,2*o.scale,i[r])),e.geometry=c}}this.dice_box=function(e,t){this.use_adapvite_timestep=!0,this.animate_selector=!0,this.dices=[],this.scene=new E.l,this.world=new x.a.World,this.renderer=window.WebGLRenderingContext?new E.r({antialias:!0}):new E.b({antialias:!0}),e.appendChild(this.renderer.domElement),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=E.h,this.renderer.setClearColor(16777215,1),this.reinit(e,t),this.world.gravity.set(0,0,800*-9.8),this.world.broadphase=new x.a.NaiveBroadphase,this.world.solver.iterations=16;var a=new E.a(o.ambient_light_color);this.scene.add(a),this.dice_body_material=new x.a.Material;var n,r=new x.a.Material,i=new x.a.Material;this.world.addContactMaterial(new x.a.ContactMaterial(r,this.dice_body_material,{friction:.01,restitution:.5})),this.world.addContactMaterial(new x.a.ContactMaterial(i,this.dice_body_material,{friction:0,restitution:1})),this.world.addContactMaterial(new x.a.ContactMaterial(this.dice_body_material,this.dice_body_material,{friction:0,restitution:.5})),this.world.add(new x.a.Body({mass:0,shape:new x.a.Plane,material:r})),(n=new x.a.Body({mass:0,shape:new x.a.Plane,material:i})).quaternion.setFromAxisAngle(new x.a.Vec3(1,0,0),Math.PI/2),n.position.set(0,.93*this.h,0),this.world.add(n),(n=new x.a.Body({mass:0,shape:new x.a.Plane,material:i})).quaternion.setFromAxisAngle(new x.a.Vec3(1,0,0),-Math.PI/2),n.position.set(0,.93*-this.h,0),this.world.add(n),(n=new x.a.Body({mass:0,shape:new x.a.Plane,material:i})).quaternion.setFromAxisAngle(new x.a.Vec3(0,1,0),-Math.PI/2),n.position.set(.93*this.w,0,0),this.world.add(n),(n=new x.a.Body({mass:0,shape:new x.a.Plane,material:i})).quaternion.setFromAxisAngle(new x.a.Vec3(0,1,0),Math.PI/2),n.position.set(.93*-this.w,0,0),this.world.add(n),this.last_time=0,this.running=!1,this.renderer.render(this.scene,this.camera)},this.dice_box.prototype.reinit=function(e,t){this.cw=e.clientWidth/2,this.ch=e.clientHeight/2,t?(this.w=t.w,this.h=t.h):(this.w=this.cw,this.h=this.ch),this.aspect=Math.min(this.cw/this.w,this.ch/this.h),o.scale=Math.sqrt(this.w*this.w+this.h*this.h)/13,this.renderer.setSize(2*this.cw,2*this.ch),this.wh=this.ch/this.aspect/Math.tan(10*Math.PI/180),this.camera&&this.scene.remove(this.camera),this.camera=new E.i(20,this.cw/this.ch,1,1.3*this.wh),this.camera.position.z=this.wh;var a=Math.max(this.w,this.h);this.light&&this.scene.remove(this.light),this.light=new E.n(o.spot_light_color,2),this.light.position.set(-a/2,a/2,2*a),this.light.target.position.set(0,0,0),this.light.distance=5*a,this.light.castShadow=!0,this.light.shadow.camera.near=a/10,this.light.shadow.camera.far=5*a,this.light.shadow.camera.fov=50,this.light.shadow.bias=.001,this.light.shadow.mapSize.width=1024,this.light.shadow.mapSize.height=1024,this.scene.add(this.light),this.desk&&this.scene.remove(this.desk),this.desk=new E.f(new E.j(2*this.w,2*this.h,1,1),new E.g({color:o.desk_color})),this.desk.receiveShadow=o.use_shadows,this.scene.add(this.desk),this.renderer.render(this.scene,this.camera)},this.dice_box.prototype.generate_vectors=function(e,t,n){var r=[];for(var i in e.set){var s=c(t),l={x:this.w*(s.x>0?-1:1)*.9,y:this.h*(s.y>0?-1:1)*.9,z:200*a()+200},u=Math.abs(s.x/s.y);u>1?l.y/=u:l.x*=u;var d=c(t),h={x:d.x*n,y:d.y*n,z:-10},m=o.dice_inertia[e.set[i]],f={x:-(a()*s.y*5+m*s.y),y:a()*s.x*5+m*s.x,z:0},p={x:a(),y:a(),z:a(),a:a()};r.push({set:e.set[i],pos:l,velocity:h,angle:f,axis:p})}return r},this.dice_box.prototype.create_dice=function(e,t,a,n,r){var i=o["create_"+e]();i.castShadow=!0,i.dice_type=e,i.body=new x.a.Body({mass:o.dice_mass[e],shape:i.geometry.cannon_shape,material:this.dice_body_material}),i.body.position.set(t.x,t.y,t.z),i.body.quaternion.setFromAxisAngle(new x.a.Vec3(r.x,r.y,r.z),r.a*Math.PI*2),i.body.angularVelocity.set(n.x,n.y,n.z),i.body.velocity.set(a.x,a.y,a.z),i.body.linearDamping=.1,i.body.angularDamping=.1,this.scene.add(i),this.dices.push(i),this.world.add(i.body)},this.dice_box.prototype.check_if_throw_finished=function(){var e=!0;if(this.iteration<10/o.frame_rate)for(var t=0;t<this.dices.length;++t){var a=this.dices[t];if(!0!==a.dice_stopped){var n=a.body.angularVelocity,r=a.body.velocity;if(Math.abs(n.x)<6&&Math.abs(n.y)<6&&Math.abs(n.z)<6&&Math.abs(r.x)<6&&Math.abs(r.y)<6&&Math.abs(r.z)<6){if(a.dice_stopped){if(this.iteration-a.dice_stopped>3){a.dice_stopped=!0;continue}}else a.dice_stopped=this.iteration;e=!1}else a.dice_stopped=void 0,e=!1}}return e},this.dice_box.prototype.emulate_throw=function(){for(;!this.check_if_throw_finished();)++this.iteration,this.world.step(o.frame_rate);return l(this.dices)},this.dice_box.prototype.__animate=function(e){var t,a,n=(new Date).getTime(),r=(n-this.last_time)/1e3;if(r>3&&(r=o.frame_rate),++this.iteration,this.use_adapvite_timestep){for(;r>1.1*o.frame_rate;)this.world.step(o.frame_rate),r-=o.frame_rate;this.world.step(r)}else this.world.step(o.frame_rate);for(var i in this.scene.children){var c=this.scene.children[i];void 0!=c.body&&(c.position.copy(c.body.position),c.quaternion.copy(c.body.quaternion))}this.renderer.render(this.scene,this.camera),this.last_time=this.last_time?n:(new Date).getTime(),this.running==e&&this.check_if_throw_finished()&&(this.running=!1,this.callback&&this.callback.call(this,l(this.dices))),this.running==e&&(t=this,a=e,!this.use_adapvite_timestep&&r<o.frame_rate?setTimeout((function(){requestAnimationFrame((function(){t.__animate(a)}))}),1e3*(o.frame_rate-r)):requestAnimationFrame((function(){t.__animate(a)})))},this.dice_box.prototype.clear=function(){var e;for(this.running=!1;e=this.dices.pop();)this.scene.remove(e),e.body&&this.world.remove(e.body);this.pane&&this.scene.remove(this.pane),this.renderer.render(this.scene,this.camera);var t=this;setTimeout((function(){t.renderer.render(t.scene,t.camera)}),100)},this.dice_box.prototype.prepare_dices_for_roll=function(e){for(var t in this.clear(),this.iteration=0,e)this.create_dice(e[t].set,e[t].pos,e[t].velocity,e[t].angle,e[t].axis)},this.dice_box.prototype.roll=function(e,t,a){if(this.prepare_dices_for_roll(e),void 0!=t&&t.length){this.use_adapvite_timestep=!1;var n=this.emulate_throw();for(var r in this.prepare_dices_for_roll(e),n)u(this.dices[r],t[r],n[r])}this.callback=a,this.running=(new Date).getTime(),this.last_time=0,this.__animate(this.running)},this.dice_box.prototype.__selector_animate=function(e){var t=(new Date).getTime(),a=(t-this.last_time)/1e3;a>3&&(a=o.frame_rate);var n,r,i=.3*a*Math.PI*Math.min(24e3+e-t,6e3)/6e3;for(var c in i<0&&(this.running=!1),this.dices)this.dices[c].rotation.y+=i,this.dices[c].rotation.x+=i/4,this.dices[c].rotation.z+=i/10;this.last_time=t,this.renderer.render(this.scene,this.camera),this.running==e&&(n=this,r=e,requestAnimationFrame((function(){n.__selector_animate(r)})))},this.dice_box.prototype.search_dice_by_mouse=function(e){var t=S.get_mouse_coords(e),a=new E.k(this.camera.position,new E.q((t.x-this.cw)/this.aspect,1-(t.y-this.ch)/this.aspect,this.w/9).sub(this.camera.position).normalize()).intersectObjects(this.dices);if(a.length)return a[0].object.userData},this.dice_box.prototype.draw_selector=function(){this.clear();var e=this.w/4.5;this.pane=new E.f(new E.j(6*this.w,6*this.h,1,1),new E.g(o.selector_back_colors)),this.pane.receiveShadow=!0,this.pane.position.set(0,0,1),this.scene.add(this.pane);for(var t=0,a=-3;t<o.known_types.length;++t,++a){var n=S.dice["create_"+o.known_types[t]]();n.position.set(a*e,0,.5*e),n.castShadow=!0,n.userData=o.known_types[t],this.dices.push(n),this.scene.add(n)}this.running=(new Date).getTime(),this.last_time=0,this.animate_selector?this.__selector_animate(this.running):this.renderer.render(this.scene,this.camera)},this.dice_box.prototype.bind_mouse_listener=function(e,t){var a=this;S.bind(e,["mousedown","touchstart"],(function(e){a.mouse_time=(new Date).getTime(),a.mouse_start=S.get_mouse_coords(e)})),S.bind(e,["mouseup","touchend"],(function(e){if(!a.rolling&&void 0!=a.mouse_start){var n=S.get_mouse_coords(e),r={x:n.x-a.mouse_start.x,y:-(n.y-a.mouse_start.y)};a.mouse_start=void 0;var i=Math.sqrt(r.x*r.x+r.y*r.y);if(!(i<Math.sqrt(a.w*a.h*.01))){var o=(new Date).getTime()-a.mouse_time;o>2e3&&(o=2e3);var c=Math.sqrt((2500-o)/2500)*i*2;t(r,c,i)}}}))},this.dice_box.prototype.start_throw=function(e,n,r,i,o,c){var s=this;s.rolling||function(e){if(!t.length&&S.dice.use_true_random)try{return void S.rpc({method:"random",n:512},(function(a){a.error?S.dice.use_true_random=!1:t=a.result.random.data,e()}))}catch(a){S.dice.use_true_random=!1}e()}((function(){var t=Object.assign({},i)||{x:(2*a()-1)*s.w,y:-(2*a()-1)*s.h},l=c||Math.sqrt(t.x*t.x+t.y*t.y),u=o||(a()+3)*l;!function(e,t,a,n,r,i,o){var c=S.dice.use_adapvite_timestep;function s(t){o&&(e.clear(),e.roll(u,t||l.result,(function(t){o&&o.call(e,l,t),e.rolling=!1,S.dice.use_adapvite_timestep=c})))}t.x/=n,t.y/=n;var l=r.call(e);if(0!=l.set.length){var u=e.generate_vectors(l,t,a);e.rolling=!0,i?i.call(e,u,l,s):s()}}(s,t,u,l,e,n,r)}))}}.apply(j.dice=j.dice||{});var C=S;function D(e,t){var a=Object.assign({},{idCanvas:"canvas",idLabel:"label",idSet:"set",idSelectorDiv:"selector_div",idControlPanel:"control_panel",idInfoDiv:"info_div",useTrueRandom:!1,chromakey:!1,useShadows:!0,whiteDice:!1,noresult:!1,roll:!1,diceThrow$:null,diceBeforeThrow$:null,diceAfterThrow$:null,requestNewThrow$:null},t),n=e.getBoundingClientRect(),r=C.id(a.idCanvas);r.style.width=n.width-1+"px",r.style.height=n.height-1+"px",C.dice.use_true_random=a.useTrueRandom,a.chromakey&&(C.dice.desk_color=65280),C.dice.use_shadows=a.useShadows,a.whiteDice&&(C.dice.dice_color="#808080",C.dice.label_color="#202020");var i=new C.dice.dice_box(r,{w:n.width,h:n.height});return i.animate_selector=!1,i.draw_selector(),i.bind_mouse_listener(e,(function(e,t,n){a.requestNewThrow$.next({vectors:e,boost:t,dist:n})})),a.diceThrow$.subscribe((function(e){i.start_throw((function(){return C.dice.parse_notation(function(e){e=R(e);var t="";return Object.keys(e).sort(T).forEach((function(a){var n=e[a];n&&(t=t+n+a+"+")})),t=t.slice(0,-1)}(e.diceSet))}),(function(t,n,r){a.diceBeforeThrow$.next({throwConfig:e}),r(function(e){e=R(e);var t=[];return Object.keys(e).sort(T).forEach((function(a){t=[].concat(Object(y.a)(t),Object(y.a)(e[a]))})),t}(e.result))}),(function(t,n){a.diceAfterThrow$.next({throwConfig:e,result:n})}),e.diceThrowConfig.vectors,e.diceThrowConfig.boost,e.diceThrowConfig.dist)})),new w.ResizeSensor(e,(function(){n=e.getBoundingClientRect(),r.style.width=n.width.toFixed()-1+"px",r.style.height=n.height.toFixed()-1+"px",i.reinit(r,{w:n.width.toFixed(),h:n.height.toFixed()})}))}function R(e){var t={};return Object.keys(e).sort(T).forEach((function(a){t[a]=e[a]})),t}function T(e,t){return parseInt(e.slice(1))-parseInt(t.slice(1))}a.d(t,"a",(function(){return A}));var A=Object(l.a)((function(e){return Object(s.a)({root:{width:"100%",height:"calc(100% - ".concat(e.spacing(2),"px)"),position:"relative"},diceCanvas:{width:"100%",height:"100%",cursor:"grab"},grabbing:{cursor:"grabbing"}})}))((function(e){var t=e.classes,a=e.visible,s=void 0===a||a,l=c.a.useRef(null),y=Object(o.useRef)(null),w=Object(o.useState)(!1),E=Object(r.a)(w,2),O=E[0],x=E[1],j=Object(o.useState)(!1),S=Object(r.a)(j,2),C=S[0],R=S[1],T=Object(o.useState)(!1),A=Object(r.a)(T,2),k=A[0],M=A[1],P=Object(o.useContext)(_.a);Object(o.useEffect)((function(){return function(e,t){var a=new h.a;Object(m.a)(300).pipe(Object(f.a)((function(){var t;return null===(t=null===e||void 0===e?void 0:e.current)||void 0===t?void 0:t.getBoundingClientRect()})),Object(p.a)((function(e){return!((null===e||void 0===e?void 0:e.width)&&(null===e||void 0===e?void 0:e.height))})),Object(v.a)(300),Object(g.a)(a)).subscribe((function(){a.next(),t(!0)}))}(l,M)}),[]),Object(o.useEffect)((function(){if(P&&!O&&k){var e=D(y.current,Object(n.a)({},b,{diceThrow$:P.diceThrow$,diceBeforeThrow$:P.diceBeforeThrow$,diceAfterThrow$:P.diceAfterThrow$,requestNewThrow$:P.requestNewThrow$}));return x(!0),function(){return e.detach()}}}),[k,!!P]);var N=function(e){R(e)};return c.a.createElement(u.a,{in:s},c.a.createElement(d.a,{elevation:3,className:t.root},c.a.createElement("div",{id:"diceCanvasContainer",ref:y,className:Object(i.a)(t.diceCanvas,C&&t.grabbing),onMouseDown:function(){return N(!0)},onMouseUp:function(){return N(!1)}},c.a.createElement("div",{ref:l,id:"canvas"}))))}))},376:function(e,t,a){"use strict";var n,r=a(36),i=a(4),o=a(0),c=a.n(o),s=a(662),l=a(676),u=a(678),d=a(672),h=a(677),m=a(401),f=a(5),p=a(387),v=a(687),g=a(10),b=a(691),_=a(398),y=a(111),w=a(9),E=a(287),O=Object(_.a)((function(e){return{inputSlider:{width:"100%",marginLeft:e.spacing(0),paddingRight:e.spacing(2),minWidth:e.spacing(40)}}}));var x=c.a.memo(Object(b.a)({form:"diceSetForm",initialValues:(n={},Object(g.a)(n,w.a.D4,0),Object(g.a)(n,w.a.D6,0),Object(g.a)(n,w.a.D8,0),Object(g.a)(n,w.a.D10,0),Object(g.a)(n,w.a.D12,0),Object(g.a)(n,w.a.D20,0),Object(g.a)(n,w.a.D100,0),n)})((function(e){var t=e.diceType,a=O();return c.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},c.a.createElement("h2",null,"Set your dices!"),c.a.createElement("div",{className:a.inputSlider},null===t||void 0===t?void 0:t.map((function(e){return c.a.createElement(E.b,Object.assign({key:e},y.c[e]))}))))}))),j=a(611),S=a(668),C=a(138),D=a(664);function R(e){var t=e.throwResult;return c.a.createElement("article",null,c.a.createElement(C.a,{variant:"h5",component:"h2"},"Throw result:"),c.a.createElement(D.a,null,(null===t||void 0===t?void 0:t.result)?Object.keys(t.result).map((function(e){return c.a.createElement(j.a,{key:e},c.a.createElement(S.a,{container:!0,spacing:2},c.a.createElement(S.a,{item:!0},c.a.createElement(C.a,{variant:"h4",component:"span",color:"textSecondary"},e,":")),c.a.createElement(S.a,{item:!0},c.a.createElement(C.a,{variant:"h3",component:"span"},t.result[e].join(", ")))))})):""))}var T=a(127);a.d(t,"a",(function(){return A}));var A=Object(f.a)((function(e){return Object(m.a)({root:{display:"flex",backgroundColor:"#f4f4f2ef"},details:{display:"flex",flexDirection:"column"},content:{flex:"1 0 auto"},cover:{width:e.spacing(18)},playIcon:{height:38,width:38},clickable:{cursor:"pointer"}})}))((function(e){var t=e.classes,a=e.visible,n=void 0===a||a,m=e.room,f=new p.a,g=Object(o.useContext)(T.a),b=Object(o.useState)(null),_=Object(r.a)(b,2),y=_[0],w=_[1];return Object(o.useEffect)((function(){null===g||void 0===g||g.diceThrowDelayedWhen$.pipe(Object(v.a)(f)).subscribe((function(e){return w(e)}))}),[!!g]),Object(o.useEffect)((function(){return function(){return f.next()}}),[]),c.a.createElement(s.a,{in:n},c.a.createElement(l.a,{className:Object(i.a)(t.root,!!y&&t.clickable),onClick:function(){return w(null)}},c.a.createElement("div",{className:t.details},c.a.createElement(u.a,{className:t.content},c.a.createElement(d.a,{in:!y},c.a.createElement(x,{diceType:null===m||void 0===m?void 0:m.diceType})),c.a.createElement(d.a,{in:!!y},c.a.createElement(R,{throwResult:y})))),(null===m||void 0===m?void 0:m.gameMasterAvatar)&&c.a.createElement(h.a,{className:t.cover,image:null===m||void 0===m?void 0:m.gameMasterAvatar,title:"Bot avatar"})))}))},38:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n={isRequesting:function(e){return!Object.values(e.firestore.status.requesting).every((function(e){return!e}))},userProfile:function(e){return e.firebase.auth},authenticatingSelector:function(e){var t=e.firebase,a=t.auth,n=t.isInitializing;return!a.isLoaded||n},isAuthenticated:function(e){var t=e.firebase.auth;return!t.isEmpty&&!!t.uid},userConnected:function(e){return e.firebase.data.connected},applicationStats:function(e){return e.firebase.data.applicationStats}}},390:function(e){e.exports=JSON.parse('{"a":"1.0.0"}')},414:function(e,t,a){e.exports=a(607)},419:function(e,t,a){},570:function(e,t,a){},59:function(e,t,a){"use strict";var n;a.d(t,"a",(function(){return n})),function(e){e.SELECTED="@@rooms/SELECTED",e.SET_DRAWER_OPEN_VALUE="@@rooms/SET_DRAWER_OPEN_VALUE",e.SET_CHAT_OPEN_VALUE="@@rooms/SET_CHAT_OPEN_VALUE",e.SET_PLAYERS_OPEN_VALUE="@@rooms/SET_PLAYERS_OPEN_VALUE",e.SET_DICE_ROLLING="@@rooms/SET_DICE_ROLLING"}(n||(n={}))},60:function(e,t,a){"use strict";var n;a.d(t,"a",(function(){return n})),function(e){e.CHATS="chats",e.USERS="users",e.ROOMS="rooms"}(n||(n={}))},607:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(19),o=a.n(i),c=(a(419),a(669)),s=a(391),l=a(681),u=a(12),d=a(35),h=a(48),m=a(60),f=function(e){var t=e&&0!==(null===e||void 0===e?void 0:e.length)?e:"unknown";return{collection:m.a.CHATS,where:[["players","array-contains",t]],storeAs:"userChats"}},p=a(38),v={getProfilesByUid:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{collection:"users",where:[["uid","in",e]],storeAs:"usersProfiles"}},connected:{path:".info/connected",storeAs:"connected"}},g=function(e){return{collection:m.a.ROOMS,where:[["gameMasterUid","==",e]],storeAs:"userRoomsAsGameMaster"}},b=function(e){return{collection:m.a.ROOMS,where:[["playersUid","array-contains",e]],storeAs:"userRoomsAsPlayer"}},_=function(e){var t=e.length?e:"unknown";return{collection:m.a.ROOMS,doc:t,storeAs:"selectedRoom"}},y=a(65),w=a(283);function E(){var e=Object(d.useFirestore)(),t=Object(d.useFirebase)(),a=Object(u.useSelector)(p.a.userProfile),i=Object(u.useSelector)(y.a.selectedRoomUid),o=Object(h.a)(Object(u.useSelector)(w.a.getAllNeededPlayersUid)),c=Object(u.useSelector)(p.a.userConnected);function s(t){e.doc("".concat(m.a.USERS,"/").concat(a.uid)).update({connected:t})}return Object(n.useEffect)((function(){if(!0===c&&a.uid)return s(c),t.ref("".concat(m.a.USERS,"/").concat(a.uid)).onDisconnect().update({connected:!1}),function(){s(!1)}}),[c,a.uid]),Object(d.useFirebaseConnect)([v.connected]),Object(d.useFirestoreConnect)([v.getProfilesByUid(o.length?o:["unknown"]),f(a.uid),g(a.uid||"unknown"),b(a.uid||"unknown"),_(i||"unknown")]),r.a.createElement(r.a.Fragment,null)}function O(e){var t=Object(u.useSelector)(p.a.isAuthenticated);return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement(E,null),e.children)}var x=a(401),j=a(617),S=a(398),C=a(84),D=a(30),R=r.a.lazy((function(){return Promise.all([a.e(0),a.e(9)]).then(a.bind(null,796))})),T={path:[D.a.CHATS_PATH_ID,D.a.CHATS_PATH],component:R},A=a(36),k=a(4),M=a(682),P=a(680),N=a(138),I=a(5),L=a(616),U=a(683),F=a(666),$=a(668),H=a(693),B=a(608),W=a(379),z=a.n(W),q=a(667),G=a(695),V=a(393),Y=a(665);var J=Object(I.a)((function(e){return Object(x.a)({iconButtonAvatar:{padding:4},avatarSize:{border:"4px solid ".concat(e.palette.primary.main),width:e.spacing(6),height:e.spacing(6)}})}))((function(e){var t=Object(d.useFirebase)(),a=Object(C.f)(),n=Object(u.useSelector)(p.a.userProfile),i=Object(u.useSelector)(p.a.isAuthenticated),o=r.a.useState(null),c=Object(A.a)(o,2),s=c[0],l=c[1],h=e.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{color:"inherit",className:h.iconButtonAvatar,onClick:function(e){l(e.currentTarget)}},r.a.createElement(G.a,{src:n.avatarUrl||n.photoURL,alt:n.displayName,className:h.avatarSize})),r.a.createElement(V.a,{id:"simple-menu",anchorEl:s,keepMounted:!0,open:Boolean(s),onClose:function(){return l(null)}},i?r.a.createElement(Y.a,{onClick:function(){t.logout().then((function(){l(null),a.push(D.a.HOME_PATH)}))}},"Logout"):r.a.createElement(Y.a,{onClick:function(){t.login({provider:"google",type:"popup"}).then((function(){l(null),a.push(D.a.ROOMS_PATH)})).catch((function(e){return alert(e.message)}))}},"Login with Google")))}));var X=r.a.memo(Object(I.a)((function(e){return Object(x.a)({ornament:{backgroundImage:"url(".concat("/roll-a-dice","/assets/svg/ornament-knot.svg)"),width:"100%",height:"100%",backgroundRepeatX:"repeat",backgroundRepeatY:"no-repeat",backgroundSize:"contain"},vartical:{backgroundImage:"url(".concat("/roll-a-dice","/assets/svg/ornament-knot-vartical.svg)"),backgroundRepeatX:"no-repeat",backgroundRepeatY:"repeat"}})}))((function(e){var t=e.classes,a=e.vartical;return r.a.createElement("div",{className:Object(k.a)(t.ornament,a&&t.vartical)})})));var K=r.a.memo(Object(I.a)((function(e){return Object(x.a)({secondaryBar:{zIndex:0},menuButton:{marginLeft:-e.spacing(1)},link:{textDecoration:"none",color:"rgba(255, 255, 255, 0.7)","&:hover":{color:e.palette.common.white}},button:{borderColor:"rgba(255, 255, 255, 0.7)"},ornament:{bottom:"2px",height:"24px",opacity:.2,position:"absolute",zIndex:-1,width:" 100%"},avatar:{marginBottom:"-16px"}})}))((function(e){var t=e.classes,a=e.onDrawerToggle;return r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{color:"primary",position:"sticky",elevation:2},r.a.createElement(q.a,null,r.a.createElement($.a,{container:!0,spacing:1,alignItems:"center"},r.a.createElement(H.a,{smUp:!0},r.a.createElement($.a,{item:!0},r.a.createElement(B.a,{color:"inherit","aria-label":"open drawer",onClick:a,className:t.menuButton},r.a.createElement(z.a,null)))),r.a.createElement($.a,{item:!0,xs:!0}),r.a.createElement($.a,{item:!0},r.a.createElement("div",{className:t.avatar},r.a.createElement(J,null))))),r.a.createElement("div",{className:t.ornament},r.a.createElement(X,null))))}))),Q=a(612),Z=a(286),ee=r.a.memo(Object(I.a)((function(e){return Object(x.a)({container:{opacity:0,visibility:"hidden",transitionDelay:"1300ms",transition:"opacity 225ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"},visible:{opacity:1,visibility:"visible"}})}))((function(e){var t=e.children,a=e.isAuthenticating,n=void 0===a||a;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Q.a,{in:n},r.a.createElement(Z.a,null)),t)}))),te=a(10),ae=a(107),ne=a(382),re=a.n(ne),ie=a(679),oe=a(383),ce=a.n(oe),se=a(380),le=a.n(se),ue=a(381),de=a.n(ue),he=a(664),me=a(611),fe=a(273),pe=a(88),ve=a(162),ge=a(357),be=a.n(ge),_e=a(674),ye=a(671),we=a(696),Ee=a(673),Oe=a(675),xe=a(110);var je=r.a.memo(Object(I.a)((function(e){return Object(x.a)({item:{paddingTop:1,paddingBottom:1,color:"rgba(255, 255, 255, 0.7)","&:hover,&:focus":{backgroundColor:"rgba(255, 255, 255, 0.08)"}},itemCategoryWrapper:{minHeight:"60px"},itemCategory:{width:"100%",paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},itemCategoryAbsolute:{position:"absolute",top:0},itemActiveItem:{color:e.palette.secondary.main},itemPrimary:{fontSize:"inherit"},itemIcon:{minWidth:"auto",marginRight:e.spacing(2)},expansionPanel:{borderRadius:"0 !important",padding:"0 !important",margin:"0 !important",backgroundColor:e.palette.background.secondary},expansionPanelSummary:{margin:"0 !important",padding:"0 16px 0px 0 !important"},expansionPanelSummaryContainer:{padding:"0 !important",margin:"0 !important"},expandIcon:{color:"rgba(255, 255, 255, 0.7)"},divider:{boxShadow:"0 -1px 0 #404854 inset"}})}))((function(e){var t=e.classes,a=e.children,n=e.icon,i=e.text,o=e.navLink,c=e.active,s=e.expandable,l=e.defaultExpanded,u=function(e){return o?r.a.createElement(xe.b,{to:o},e):r.a.createElement(r.a.Fragment,null,e)};return s?r.a.createElement(we.a,{className:Object(k.a)(t.expansionPanel,t.divider),defaultExpanded:l},r.a.createElement(Ee.a,{"aria-controls":"additional-actions1-content","aria-label":"Expand",classes:{content:t.expansionPanelSummaryContainer,expandIcon:t.expandIcon},className:t.expansionPanelSummary,expandIcon:r.a.createElement(be.a,null),id:"additional-actions1-header"},r.a.createElement("div",{className:t.itemCategoryWrapper}),u(r.a.createElement(me.a,{button:!0,className:Object(k.a)(t.item,t.itemCategory,c&&t.itemActiveItem,t.itemCategoryAbsolute)},n&&r.a.createElement(_e.a,{className:t.itemIcon},n),i&&r.a.createElement(ye.a,{classes:{primary:t.itemPrimary}},i)))),a&&r.a.createElement(Oe.a,null,a)):u(r.a.createElement(me.a,{button:!0,className:Object(k.a)(t.item,t.itemCategory,c&&t.itemActiveItem,t.divider)},n&&r.a.createElement(_e.a,{className:t.itemIcon},n),i&&r.a.createElement(ye.a,{classes:{primary:t.itemPrimary}},i)))}))),Se=a(676),Ce=a(677),De=a(678);var Re=Object(I.a)((function(e){return Object(x.a)({cards:{maxWidth:936,width:"100%"},media:{height:140}})}))((function(e){var t,a=e.classes,n=e.room;return r.a.createElement(Se.a,{className:a.cards},n.roomImage&&r.a.createElement(Ce.a,{className:a.media,image:n.roomImage,title:"Room image"}),r.a.createElement(De.a,null,r.a.createElement(N.a,{gutterBottom:!0,variant:"h5",component:"h2"},n.roomName),r.a.createElement(N.a,{gutterBottom:!0,variant:"h6",component:"h6"},n.campaignTitle),r.a.createElement(N.a,{variant:"body2",color:"textSecondary",component:"p"},n.description),r.a.createElement("p",null,r.a.createElement(N.a,{variant:"caption",color:"textSecondary",component:"span"},"Max players:")," ",r.a.createElement(N.a,{color:"textSecondary",variant:"h6",component:"span"},n.maxPlayers)),r.a.createElement("p",null,r.a.createElement(N.a,{variant:"caption",color:"textSecondary",component:"span"},"Room Game Master:"),r.a.createElement("br",null),r.a.createElement(N.a,{variant:"subtitle1",color:"textSecondary",component:"span"},null===(t=Object.values(n.players).find((function(e){return!!e.gameMaster})))||void 0===t?void 0:t.displayName))))}));var Te=Object(I.a)((function(e){return Object(x.a)({logo:{fontSize:24,color:e.palette.common.white,"&:hover,&:focus":{backgroundColor:"rgba(255, 255, 255, 0.08)"},backgroundColor:e.palette.background.secondary,boxShadow:"0 -1px 0 #404854 inset",paddingTop:e.spacing(2),paddingBottom:e.spacing(2)}})}))((function(e){var t=e.classes,a=Object(ae.a)(e,["classes"]),n=Object(u.useSelector)(ve.a.match).path,i=Object(u.useSelector)(pe.a.selectedRoom),o=Object(u.useSelector)(y.a.drawerOpened);return r.a.createElement(ie.a,Object.assign({open:o,variant:n===D.a.ROOMS_PATH_ID?"persistent":"permanent"},a),r.a.createElement(he.a,{disablePadding:!0},r.a.createElement(me.a,{className:t.logo},"Roll a Dice...")),r.a.createElement(je,{navLink:D.a.HOME_PATH,icon:r.a.createElement(le.a,null),text:"HomePage Page",active:D.a.HOME_PATH===n}),r.a.createElement(je,{navLink:D.a.ROOMS_PATH,icon:r.a.createElement(de.a,null),text:"Rooms",expandable:-1===n.indexOf(D.a.ROOMS_PATH),active:n.indexOf(D.a.ROOMS_PATH)>-1},r.a.createElement(r.a.Fragment,null,"List here")),r.a.createElement(je,{navLink:D.a.CHATS_PATH,icon:r.a.createElement(re.a,null),text:"Chats",expandable:-1===n.indexOf(D.a.CHATS_PATH),active:n.indexOf(D.a.CHATS_PATH)>-1},r.a.createElement(fe.a,{viewType:fe.b.EMBEDDED})),i&&r.a.createElement(je,{icon:r.a.createElement(ce.a,null),text:"Room Ditails",expandable:!0,active:n.indexOf(D.a.ROOM_PATH)>-1,defaultExpanded:!0},r.a.createElement(Re,{room:i})))})),Ae=a(17);var ke=function(){var e=Object(s.a)({palette:{primary:{light:"#afaf4c",main:"#9b9c20",dark:"#6c6d16"},secondary:{light:"#cba234",main:"#be8b02",dark:"#856101"},background:{default:"#e0e0d3",paper:"#f4f4f2",secondary:"#111b0e"}},typography:{fontFamily:["ringbearermedium","-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),h5:{fontWeight:500,fontSize:26,letterSpacing:.5}},shape:{borderRadius:8},props:{MuiTab:{disableRipple:!0}},mixins:{toolbar:{minHeight:48}}});return e=Object(Ae.a)({},e,{overrides:{MuiDrawer:{paper:{backgroundColor:"#121b0f"}},MuiButton:{label:{textTransform:"none"},contained:{boxShadow:"none","&:active":{boxShadow:"none"}}},MuiTabs:{root:{marginLeft:e.spacing(1)},indicator:{height:3,borderTopLeftRadius:3,borderTopRightRadius:3}},MuiTab:{root:Object(te.a)({textTransform:"none",margin:"0 16px",minWidth:0,padding:0},e.breakpoints.up("md"),{padding:0,minWidth:0})},MuiIconButton:{root:{padding:e.spacing(1)}},MuiTooltip:{tooltip:{borderRadius:4}},MuiDivider:{root:{backgroundColor:"#404854"}},MuiListItemText:{primary:{fontWeight:e.typography.fontWeightMedium}},MuiListItemIcon:{root:{color:"inherit",marginRight:0,"& svg":{fontSize:20}}},MuiAvatar:{root:{width:32,height:32}}}})}(),Me=(Object(Ae.a)({},ke,{palette:Object(Ae.a)({},ke.palette,{type:"dark"})}),Object(Ae.a)({},ke,{palette:Object(Ae.a)({},ke.palette,{type:"dark"})}),Object(x.a)({drawer:Object(te.a)({},ke.breakpoints.up("sm"),{flexShrink:0,width:"100%",maxWidth:320,transition:"max-width 225ms cubic-bezier(0, 0, 0.2, 1) 0ms"})}));var Pe=Object(I.a)(Me)((function(e){var t=e.classes,a=e.mobileOpen,n=Object(u.useSelector)(y.a.drawerOpened);return r.a.createElement("nav",{className:t.drawer,style:{maxWidth:n?320:0}},r.a.createElement(H.a,{smUp:!0,implementation:"js"},r.a.createElement(Te,{PaperProps:{style:{width:320}},variant:"temporary",open:a,onClose:e.handleDrawerToggle})),r.a.createElement(H.a,{xsDown:!0,implementation:"css"},r.a.createElement(Te,{PaperProps:{style:{width:320}}})))})),Ne=function(e){return e.ui.isPending};function Ie(){return r.a.createElement(N.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(P.a,{color:"inherit",href:"mailto:markky21@gmail.com"},"Marcin Mirecki")," ",(new Date).getFullYear(),".")}var Le=Object(x.a)({root:{display:"flex",minHeight:"100vh"},lineLoader:{position:"fixed",height:ke.spacing(.75),top:0,left:0,width:"100%",zIndex:1e4,transition:"max-height 0.2s ease;"},app:{flex:1,display:"flex",flexDirection:"column",maxWidth:"100vw",overflow:"hidden"},appWhenAuth:{maxWidth:"calc(100vw - ".concat(ke.spacing(40),")")},main:{flex:1,padding:ke.spacing(6,4),background:ke.palette.background.default},footer:{padding:ke.spacing(1),background:ke.palette.background.default}});var Ue=Object(I.a)(Le)((function(e){var t=e.classes,a=e.children,n=r.a.useState(!1),i=Object(A.a)(n,2),o=i[0],c=i[1],s=Object(u.useSelector)(p.a.isAuthenticated),d=Object(u.useSelector)(p.a.authenticatingSelector),h=Object(u.useSelector)(p.a.isRequesting),m=Object(u.useSelector)(Ne),f=function(){c(!o)};return r.a.createElement(l.a,{theme:ke},r.a.createElement(ee,{isAuthenticating:d},r.a.createElement("div",{className:t.root},r.a.createElement(M.a,null),r.a.createElement(L.a,{in:h||m,direction:"down"},r.a.createElement(U.a,{className:t.lineLoader,color:"secondary"})),s&&r.a.createElement(Pe,{mobileOpen:o,handleDrawerToggle:f}),r.a.createElement("div",{className:Object(k.a)(t.app,s&&t.appWhenAuth)},r.a.createElement(K,{onDrawerToggle:f}),r.a.createElement("main",{className:t.main},a),r.a.createElement("footer",{className:t.footer},r.a.createElement(Ie,null))))))})),Fe=(a(570),a(662)),$e=a(278);var He=Object(I.a)((function(e){return Object(x.a)({root:{width:"100%"},paper:{padding:e.spacing(2,4),height:"100%"},label:{textAlign:"center"},value:{lineHeight:"70%",textAlign:"center"}})}))((function(e){var t=e.classes,a=Object(u.useSelector)(p.a.applicationStats),n=[{label:"Players:",value:(null===a||void 0===a?void 0:a.players)||0},{label:"Rooms created:",value:(null===a||void 0===a?void 0:a.rooms)||0},{label:"Dice throws:",value:(null===a||void 0===a?void 0:a.diceThrows)||0}];return r.a.createElement($.a,{container:!0,direction:"row",justify:"space-between",alignItems:"stretch",spacing:4,className:t.root},n.map((function(e,a){return r.a.createElement(Fe.a,{key:e.label,in:!0,timeout:300*a+300},r.a.createElement($.a,{item:!0,xs:4},r.a.createElement($e.a,{className:t.paper},r.a.createElement(N.a,{component:"h5",variant:"h5",color:"textSecondary",className:t.label},e.label),r.a.createElement(N.a,{component:"div",variant:"h1",className:t.value},e.value))))})))})),Be=a(9),We=a(375),ze=a(376),qe=a(127),Ge=a(690),Ve=Object(S.a)((function(e){return{root:{position:"relative",margin:e.spacing(-4,-2),height:"calc(100% + ".concat(e.spacing(10),"px)")},cssGrid:{display:"grid",gridTemplateColumns:"1fr",gridTemplateRows:"auto 1fr",rowGap:"".concat(e.spacing(2),"px"),columnGap:"".concat(e.spacing(2),"px")},cssItem1:{gridColumn:1,gridRow:1},cssItem2:{gridColumn:1,gridRow:2},mainInfoCard:{},diceCard:{},diceDashboard:{position:"fixed",zIndex:1e3,bottom:e.spacing(8),right:e.spacing(3)}}})),Ye={diceType:[Be.a.D4,Be.a.D6,Be.a.D8,Be.a.D10,Be.a.D12,Be.a.D20,Be.a.D100],gameMasterAvatar:"".concat("/roll-a-dice","/assets/images/avatar-1.jpg")};function Je(e){var t=Ve(),a=Object(u.useSelector)(y.a.diceRolling),i=Object(n.useState)(!1),o=Object(A.a)(i,2),c=o[0],s=o[1];return Object(n.useEffect)((function(){Object(Ge.a)(300).subscribe((function(){return s(!0)}))}),[]),r.a.createElement("div",{className:Object(k.a)(t.root,t.cssGrid)},r.a.createElement("section",{className:Object(k.a)(t.mainInfoCard,t.cssGrid)},r.a.createElement(He,null)),r.a.createElement(qe.b,null,r.a.createElement("nav",{className:t.diceDashboard},r.a.createElement(ze.a,{visible:!a,room:Ye})),r.a.createElement("section",{className:t.diceCard},c&&r.a.createElement(We.a,null))))}var Xe=a(288),Ke={applicationStats:{path:"applicationStats",storeAs:"applicationStats"}};var Qe={path:"/",component:function(e){var t=e.match,a=Object(u.useDispatch)(),i=Object(u.useSelector)(ve.a.match);return Object(d.useFirebaseConnect)([Ke.applicationStats]),Object(n.useEffect)((function(){JSON.stringify(t)!==JSON.stringify(i)&&a(Xe.a.matchChange(t))})),r.a.createElement(Je,null)}},Ze=r.a.lazy((function(){return Promise.all([a.e(0),a.e(1),a.e(5),a.e(6)]).then(a.bind(null,792))})),et={path:[D.a.ROOMS_PATH_ID],component:Ze},tt=r.a.lazy((function(){return Promise.all([a.e(0),a.e(1),a.e(7)]).then(a.bind(null,795))})),at={path:[D.a.ROOM_CREATE_PATH,D.a.ROOMS_PATH],component:tt},nt=Object(S.a)((function(e){return Object(x.a)({backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}})}));function rt(){var e=nt();return r.a.createElement(Ue,null,r.a.createElement(n.Suspense,{fallback:r.a.createElement(j.a,{className:e.backdrop,open:!0})},r.a.createElement(C.c,null,r.a.createElement(C.a,{exact:!0,path:Qe.path,component:Qe.component}),[at,et,T].map((function(e,t){return r.a.createElement(C.a,Object.assign({key:"Route-".concat(t)},e))})))))}var it=a(130),ot=a.n(it),ct=(a(600),a(602),a(604),a(209)),st=a(134),lt={firebase:ot.a,config:{userProfile:"users",useFirestoreForProfile:!0},dispatch:st.a.dispatch,createFirestoreInstance:ct.createFirestoreInstance};Object(it.initializeApp)({apiKey:"AIzaSyA0bXhCXcLJC9FGk3ynZoJP5KJ6CY3sqYY",authDomain:"roll-a-dice-4cba1.firebaseapp.com",databaseURL:"https://roll-a-dice-4cba1.firebaseio.com",projectId:"roll-a-dice-4cba1",storageBucket:"roll-a-dice-4cba1.appspot.com",messagingSenderId:"768622256477",appId:"1:768622256477:web:51a5c9f0ef4030d366c8b4",measurementId:"G-J2M3QQ0M89"}),Object(it.firestore)();var ut=a(91);function dt(e){var t=Object(c.a)("(prefers-color-scheme: dark)"),a=r.a.useMemo((function(){return Object(s.a)({palette:{type:t?"dark":"light"}})}),[t]);return window.theme=a,r.a.createElement(u.Provider,{store:st.a},r.a.createElement(d.ReactReduxFirebaseProvider,lt,r.a.createElement(l.a,{theme:a},r.a.createElement(ut.c,null,r.a.createElement(O,null,r.a.createElement(xe.a,null,r.a.createElement(rt,null)))))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ht=a(390);window.version=ht.a,window.env="local",o.a.render(r.a.createElement(dt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},65:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n={selectedRoomUid:function(e){return e.rooms.selectedRoom||null},drawerOpened:function(e){return e.rooms.drawerOpened},chatOpened:function(e){return e.rooms.chatOpened},playersOpened:function(e){return e.rooms.playersOpened},diceRolling:function(e){return e.rooms.diceRolling}}},88:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(17),r={userChats:function(e){return e.firestore.data.userChats},getChat:function(e){return function(t){return e&&t.firestore.data.userChats?t.firestore.data.userChats[e]:null}},selectedRoom:function(e){return e.firestore.data.selectedRoom},selectedRoomFormData:function(e){if(e.firestore.data.selectedRoom){var t=e.firestore.data.selectedRoom;return{roomName:t.roomName,diceType:t.diceType,description:t.description,roomImage:t.roomImage,gameMasterAvatar:t.gameMasterAvatar,campaignTitle:t.campaignTitle,maxPlayers:t.maxPlayers}}},userRoomsAsGameMaster:function(e){return e.firestore.data.userRoomsAsGameMaster},userRoomsAsPlayer:function(e){return e.firestore.data.userRoomsAsPlayer},allUserRoomsUid:function(e){return Object.keys(Object(n.a)({},e.firestore.data.userRoomsAsGameMaster,{},e.firestore.data.userRoomsAsPlayer))},usersProfiles:function(e){return e.firestore.data.usersProfiles||{}},selectedRoomPlayers:function(e){var t;return null===(t=e.firestore.data.selectedRoom)||void 0===t?void 0:t.players},selectedRoomGameMasterUid:function(e){var t;return null===(t=e.firestore.data.selectedRoom)||void 0===t?void 0:t.gameMasterUid},selectedRoomLogs:function(e){var t;return null===(t=e.firestore.data.selectedRoom)||void 0===t?void 0:t.logs}}},9:function(e,t,a){"use strict";var n;a.d(t,"a",(function(){return n})),function(e){e.D4="d4",e.D6="d6",e.D8="d8",e.D10="d10",e.D12="d12",e.D20="d20",e.D100="d100"}(n||(n={}))},91:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return h})),a.d(t,"c",(function(){return f}));var n,r=a(17),i=a(36),o=a(0),c=a.n(o),s=a(622),l=a(620),u=a(401),d=a(398);!function(e){e.SUCCESS="success",e.ERROR="error",e.WARNING="warning"}(n||(n={}));var h=c.a.createContext(null),m=Object(d.a)((function(e){return Object(u.a)({snackbar:{top:e.spacing(8)}})})),f=function(e){var t=e.children,a=m(),n=c.a.useState(null),o=Object(i.a)(n,2),u=o[0],d=o[1];return c.a.createElement(h.Provider,{value:{snackbarConfig:u,setSnackbarConfig:d}},t,c.a.createElement(s.a,{className:a.snackbar,anchorOrigin:{vertical:"top",horizontal:"right"},open:null===u||void 0===u?void 0:u.open,autoHideDuration:6e3,onClose:function(){return d(Object(r.a)({},u,{open:!1}))}},c.a.createElement(l.a,{variant:"filled",onClose:function(){return d(Object(r.a)({},u,{open:!1}))},severity:null===u||void 0===u?void 0:u.type},null===u||void 0===u?void 0:u.text)))}}},[[414,3,4]]]);
//# sourceMappingURL=main.60b90204.chunk.js.map