{"version":3,"sources":["models/rooms.model.tsx","store/ui/ui.actions.ts","utils/object.utils.ts","utils/rxjs/distinctUntilObjectChanged.pipe.ts","services/store.service.ts","services/dice.service.ts","contexts/DiceService.context.tsx","store/chats/chats.reducer.ts","store/location/location.reducer.ts","store/rooms/rooms.reducer.ts","store/ui/ui.reducer.ts","store/main.ts","config/store.config.ts","utils/dice.utils.ts","store/location/location.selectors.ts","store/chats/chats.selectors.ts","store/chats/chats.actions.ts","store/chats/chats.model.ts","store/ui/ui.model.ts","store/location/location.model.ts","models/paths.ts","modules/ChatList/components/ChatListElements.tsx","modules/ChatList/ChatList.tsx","store/main.selectors.ts","components/Loader.tsx","utils/date.utils.ts","components/FormComponents.tsx","store/location/location.actions.ts","store/rooms/rooms.actions.ts","store/firebase/firebase.selectors.ts","utils/text.utils.ts","modules/DiceDashboard/components/DiceDashboardForm.tsx","modules/DiceDashboard/components/DiceDashboardResult.tsx","modules/DiceDashboard/DiceDashboard.tsx","config/dice.config.ts","modules/DiceCard/DiceCard.tsx","store/rooms/rooms.model.ts","models/firebase.model.ts","queries/chat.query.ts","queries/profile.query.ts","queries/rooms.query.ts","containers/WhenAuthenticated.tsx","containers/Core.tsx","routes/ChatList/index.ts","containers/ProfileAvatar.tsx","components/Ornament.tsx","layouts/Header/Header.tsx","components/LoaderScreen.tsx","layouts/Navigator/components/NavigatorItem.tsx","containers/RoomCard.tsx","layouts/Navigator/Navigator.tsx","styles/theme.styles.ts","layouts/NavBar.tsx","store/ui/ui.selectors.ts","layouts/CoreLayout.tsx","modules/AppStats/AppStats.tsx","routes/Home/components/HomeWrapper.tsx","queries/app.query.ts","routes/Home/HomePage.tsx","routes/Room/index.ts","routes/RoomList/index.ts","routes/index.tsx","config/firebase.config.ts","App.tsx","serviceWorker.ts","index.tsx","config/main.config.ts","store/rooms/rooms.selectors.ts","models/dice.model.ts","store/firebase/firestore.selectors.ts"],"names":["Log","createRoomFormModel","roomName","name","label","fullWidth","description","multiline","campaignTitle","roomImage","gameMasterAvatar","maxPlayers","type","InputProps","inputProps","min","max","diceType","options","Dice","D4","value","D6","D8","D10","D12","D20","D100","diceDashboardFormModel","d4","style","width","display","d6","d8","d10","d12","d20","d100","playersCharacterFormModel","characterName","maxLength","characterAvatarUrl","characterDescription","notes","uiActions","payload","action","UiAction","PENDING","isArray","Array","keyList","Object","keys","hasProp","prototype","hasOwnProperty","equal","a","b","length","key","arrA","arrB","i","dateA","Date","dateB","getTime","regexpA","RegExp","regexpB","toString","call","distinctUntilObjectChanged","fn","p","q","source","pipe","distinctUntilChanged","StoreService","store","takeUntil$","Subject","_store$","ReplaySubject","_storeUnsubscribeFn","this","subscribe","next","getState","store$","map","state","form","diceSetForm","values","firestore","data","selectedRoom","filter","room","getSelectedRoomData$","logs","getSelectedRoomDataLogs$","log","DICE_ROLL","logA","logB","timestamp","diceSet","diceUtils","sortObjectWithDiceKey","result","firebase","profile","dispatch","instance","asObservable","DiceService","diceThrow$","diceBeforeThrow$","diceAfterThrow$","requestNewThrow$","diceThrowDelayedWhen$","delayWhen","roomUid","storeService","getInstance","createSubscriptions","setDiceRolling","takeUntil","diceThrow","setIsPending","handleRequestNewThrow$","performDiceThrowWhenNewDiceThrowLogAppears$","diceRolling","roomsActions","isPending","getSelectedRoomLastDiceThrowLog$","tap","withLatestFrom","getDiceSetFormValues","diceThrowConfig","generateThrowResultFromDiceSet","concatMap","createNewThrowLogInRoomLogs$","of","documentRef","doc","FirestoreCollection","ROOMS","from","runTransaction","t","get","then","newLog","authorUid","uid","now","update","DiceServiceContext","React","createContext","DiceServiceContextC","children","useFirestore","diceService","useSelector","firebaseSelectors","userProfile","roomsSelectors","selectedRoomUid","useEffect","hostDestroyed","Provider","initialState","selectedChat","chatsReducer","ChatsAction","SELECTED","match","params","isExact","path","url","locationReducer","LocationAction","MATCH_CHANGE","drawerOpened","chatOpened","playersOpened","roomsReducer","RoomsAction","SET_DRAWER_OPEN_VALUE","SET_CHAT_OPEN_VALUE","SET_PLAYERS_OPEN_VALUE","SET_DICE_ROLLING","uiReducer","combineReducers","firebaseReducer","enhancers","window","location","hostname","devToolsExtension","__REDUX_DEVTOOLS_EXTENSION__","push","middleware","thunk","withExtraArgument","getFirebase","getFirestore","module","createStore","chats","rooms","formReducer","ui","asyncReducers","compose","applyMiddleware","configureStore","___INITIAL_STATE__","authError","roller","DiceRoller","diceSetToString","dices","diceName","dice","join","diceTrowResult","forEach","diceKey","rollSet","rollOutput","exec","roll","split","d","sortDiceFunction","parseInt","slice","obj","sort","locationSelectors","chatsSelectors","profilesUidFromSelectedChat","userChats","players","chatsActions","setSelectedChat","RouterPath","ChatListType","ChatListElements","memo","withStyles","theme","createStyles","root","backgroundColor","palette","background","paper","height","overflowY","item","cursor","props","classes","onChatClick","List","className","chatId","id","Grow","in","timeout","ListItem","onClick","selected","button","dense","alignItems","ListItemAvatar","Avatar","firstLettersJoined","ListItemText","primary","secondary","dateUtils","timeStampToFormattedDate","createdAt","ChatList","maxWidth","margin","overflow","searchBar","borderBottom","searchInput","fontSize","typography","block","addUser","marginRight","spacing","contentWrapper","showSearchBar","viewType","CARD","firestoreSelectors","useDispatch","Paper","AppBar","position","color","elevation","Toolbar","Grid","container","xs","TextField","placeholder","disableUnderline","mainSelectors","getAllNeededPlayersUid","selectedRoomPlayers","selectedRoomGM","gameMasterUid","selectedChatPlayers","v","indexOf","isGameMasterOfSelectedRoom","getFormCreateRoom","createRoom","getFormPlayerProfile","playerProfile","isUserARoomPlayerOrGameMaster","Loader","flexDirection","justifyContent","zIndex","left","top","progress","svg","src","process","alt","time","dayjs","format","timeStampToDetailedTime","useStyles","makeStyles","formField","marginBottom","sliderFormField","marginLeft","FormFieldHelperText","touched","error","FormFieldText","component","input","meta","invalid","custom","variant","helperText","FormFieldCheckboxGroup","htmlFor","native","control","checked","onChange","inputValue","checkboxesFormControls","index","includes","event","arr","target","splice","row","FormFieldSlider","valuetext","inputRest","labelPlacement","defaultValue","getAriaValueText","aria-labelledby","valueLabelDisplay","step","marks","e","locationActions","matchChange","setSelectedRoom","setDrawerOpenValue","setChatOpenValue","setPlayersOpenValue","isRequesting","status","requesting","every","auth","authenticatingSelector","isInitializing","isLoaded","isAuthenticated","isEmpty","userConnected","connected","applicationStats","sentence","word","charAt","substring","toUpperCase","inputSlider","paddingRight","minWidth","DiceDashboardForm","reduxForm","initialValues","onSubmit","preventDefault","DiceDashboardResult","throwResult","Typography","DiceDashboard","details","content","flex","cover","playIcon","clickable","visible","destroyed$","useContext","useState","setThrowResult","Card","clsx","CardContent","Collapse","CardMedia","image","title","diceDefaultConfig","idCanvas","idLabel","idSet","idSelectorDiv","idInfoDiv","useTrueRandom","useShadows","whiteDice","noresult","diceThrowResult$","DiceCard","diceCanvas","grabbing","canvasRef","useRef","diceContainerEl","diceInitialized","setDiceInitialized","mouseDown","setMouseDown","canvasWidth","current","getBoundingClientRect","timer","dice_initialize","onMouseDown","isDown","ref","onMouseUp","chatsQuery","uidNonEmptyArray","collection","CHATS","where","storeAs","profileQuery","getProfilesByUid","uids","roomsQuery","DocUid","WhenAuthenticated","useFirebase","uniqProfilesUid","updateUserStatus","USERS","onDisconnect","useFirebaseConnect","useFirestoreConnect","Fragment","Core","ChatListLazy","lazy","CHATS_PATH_ID","CHATS_PATH","ProfileAvatar","iconButtonAvatar","padding","avatarSize","border","main","history","useHistory","anchorEl","setAnchorEl","IconButton","currentTarget","avatarUrl","photoURL","displayName","keepMounted","open","Boolean","onClose","MenuItem","logout","HOME_PATH","login","provider","ROOMS_PATH","err","alert","message","Ornament","ornament","backgroundImage","backgroundRepeatX","backgroundRepeatY","backgroundSize","vartical","Header","secondaryBar","menuButton","link","textDecoration","common","white","borderColor","bottom","opacity","avatar","onDrawerToggle","Hidden","smUp","aria-label","LoaderScreen","visibility","transitionDelay","transition","isAuthenticating","Fade","NavigatorItem","paddingTop","paddingBottom","itemCategoryWrapper","minHeight","itemCategory","itemCategoryAbsolute","itemActiveItem","itemPrimary","itemIcon","expansionPanel","borderRadius","expansionPanelSummary","expansionPanelSummaryContainer","expandIcon","divider","boxShadow","icon","text","navLink","active","expandable","defaultExpanded","setNavLink","to","ExpansionPanel","ExpansionPanelSummary","aria-controls","ListItemIcon","ExpansionPanelDetails","RoomCard","cards","media","gutterBottom","find","player","gameMaster","Navigator","logo","other","locationPath","selectedRoomData","Drawer","ROOMS_PATH_ID","disablePadding","EMBEDDED","ROOM_PATH","createMuiTheme","light","dark","default","fontFamily","h5","fontWeight","letterSpacing","shape","MuiTab","disableRipple","mixins","toolbar","overrides","MuiDrawer","MuiButton","textTransform","contained","MuiTabs","indicator","borderTopLeftRadius","borderTopRightRadius","breakpoints","up","MuiIconButton","MuiTooltip","tooltip","MuiDivider","MuiListItemText","fontWeightMedium","MuiListItemIcon","MuiAvatar","themeFn","styles","drawer","flexShrink","NavBar","mobileOpen","implementation","PaperProps","handleDrawerToggle","xsDown","uiSelectors","Copyright","align","Link","href","getFullYear","lineLoader","app","appWhenAuth","footer","CoreLayout","setMobileOpen","ThemeProvider","CssBaseline","Slide","direction","LinearProgress","AppStats","textAlign","lineHeight","appStats","statsView","diceThrows","justify","stat","cssGrid","gridTemplateColumns","gridTemplateRows","rowGap","columnGap","cssItem1","gridColumn","gridRow","cssItem2","mainInfoCard","diceCard","diceDashboard","right","HomeWrapper","showDiceCard","setShowDiceCard","appQuery","HomePage","storeLocationMatch","JSON","stringify","RoomLazy","Room","RoomListLazy","RoomList","ROOM_CREATE_PATH","backdrop","CreateRoutes","fallback","Backdrop","exact","settings","reactReduxFirebaseProps","firebaseApp","config","useFirestoreForProfile","createFirestoreInstance","App","prefersDarkMode","useMediaQuery","useMemo","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","version","env","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister","getChat","selectedRoomFormData","userRoomsAsGameMaster","userRoomsAsPlayer","allUserRoomsUid","usersProfiles","selectedRoomGameMasterUid","selectedRoomLogs"],"mappings":"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","file":"static/js/main.4cbc96ae.chunk.js","sourcesContent":["import React from 'react';\nimport { Dice, IDiceThrow } from './dice.model';\nimport { Dictionary } from 'react-redux-firebase';\n\nexport enum Log {\n  DICE_ROLL = 'DICE_ROLL',\n  NEW_PLAYER = 'NEW_PLAYER',\n}\n\nexport interface IProfile {\n  uid: string;\n  avatarUrl?: string;\n  displayName: string;\n  email: string;\n  photoURL: string;\n  connected?: boolean;\n}\n\nexport interface IPlayerProfile extends IProfile {\n  characterName?: string;\n  characterAvatarUrl?: string;\n  characterDescription?: string;\n  notes?: string;\n  gameMaster?: boolean;\n}\n\nexport interface IRoomLog {\n  timestamp: number;\n  type: Log;\n  authorUid: string;\n  payload?: IDiceThrow;\n}\n\nexport interface IRoom extends IRoomCreateForm {\n  createdAt: string;\n  gameMasterUid: string;\n  players: Dictionary<IPlayerProfile>;\n  playersUid: string[];\n  logs: IRoomLog[];\n  chatUid?: string;\n}\n\nexport interface IRoomCreateForm {\n  roomName: string;\n  diceType: Dice[];\n  description: string;\n  roomImage: string;\n  gameMasterAvatar: string;\n  campaignTitle: string;\n  maxPlayers: number;\n}\n\nexport interface IRoomPlayerProfileForm extends IPlayerProfile {}\n\nexport const createRoomFormModel = {\n  roomName: { name: 'roomName', label: 'Name of the Room *', fullWidth: true },\n  description: { name: 'description', label: 'Room description', multiline: true, fullWidth: true },\n  campaignTitle: { name: 'campaignTitle', label: 'Current campaign tittle', fullWidth: true },\n  roomImage: { name: 'roomImage', label: 'Room image URL', fullWidth: true },\n  gameMasterAvatar: { name: 'gameMasterAvatar', label: 'Game master avatar URL', fullWidth: true },\n  maxPlayers: {\n    name: 'maxPlayers',\n    label: 'Maximum players *',\n    multiline: false,\n    fullWidth: true,\n    type: 'number',\n    InputProps: { inputProps: { min: 1, max: 8 } },\n  },\n  diceType: {\n    name: 'diceType',\n    label: 'Allowed dice *',\n    options: [\n      { label: Dice.D4, value: Dice.D4 },\n      { label: Dice.D6, value: Dice.D6 },\n      { label: Dice.D8, value: Dice.D8 },\n      { label: Dice.D10, value: Dice.D10 },\n      { label: Dice.D12, value: Dice.D12 },\n      { label: Dice.D20, value: Dice.D20 },\n      { label: Dice.D100, value: Dice.D100 },\n    ],\n  },\n};\n\nexport const diceDashboardFormModel = {\n  d4: { label: <span style={{ width: '48px', display: 'inline-block' }}>{Dice.D4}</span>, name: Dice.D4 },\n  d6: { label: <span style={{ width: '48px', display: 'inline-block' }}>{Dice.D6}</span>, name: Dice.D6 },\n  d8: { label: <span style={{ width: '48px', display: 'inline-block' }}>{Dice.D8}</span>, name: Dice.D8 },\n  d10: { label: <span style={{ width: '48px', display: 'inline-block' }}>{Dice.D10}</span>, name: Dice.D10 },\n  d12: { label: <span style={{ width: '48px', display: 'inline-block' }}>{Dice.D12}</span>, name: Dice.D12 },\n  d20: { label: <span style={{ width: '48px', display: 'inline-block' }}>{Dice.D20}</span>, name: Dice.D20 },\n  d100: { label: <span style={{ width: '48px', display: 'inline-block' }}>{Dice.D100}</span>, name: Dice.D100 },\n};\n\nexport const playersCharacterFormModel = {\n  characterName: { name: 'characterName', label: 'Name of character', fullWidth: true, maxLength: 80 },\n  characterAvatarUrl: { name: 'characterAvatarUrl', label: 'Character avatar URL', fullWidth: true, maxLength: 256 },\n  characterDescription: {\n    name: 'characterDescription',\n    label: 'Character description',\n    multiline: true,\n    fullWidth: true,\n    maxLength: 1024,\n  },\n  notes: {\n    name: 'notes',\n    label: 'Notes (not visible for other players)',\n    multiline: true,\n    fullWidth: true,\n    maxLength: 2024,\n  },\n};\n","import { action } from 'typesafe-actions';\nimport { UiAction } from './ui.model';\n\nexport const uiActions = {\n  setIsPending: (payload: boolean) => action(UiAction.PENDING, payload),\n};\n","/* eslint-disable eqeqeq,no-self-compare */\n/* tslint:disable:triple-equals */\n\nconst isArray = Array.isArray;\nconst keyList = Object.keys;\nconst hasProp = Object.prototype.hasOwnProperty;\n\n/**\n * Function makes deep compare of two objects\n *\n * == used in purpose to do the type coercion\n * using === main gain a bit in performance\n *\n * @param a - object a to compare\n * @param b - object a to compare\n * @return boolean\n */\nexport const equal: (a: any, b: any) => boolean = (a: any, b: any) => {\n  if (a === b) {\n    return true;\n  }\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    const arrA = isArray(a);\n    const arrB = isArray(b);\n    let length;\n    let key;\n\n    if (arrA && arrB) {\n      length = a.length;\n      if (length != b.length) {\n        return false;\n      }\n      for (let i = length; i-- !== 0; ) {\n        if (!equal(a[i], b[i])) {\n          return false;\n        }\n      }\n      return true;\n    }\n\n    if (arrA != arrB) {\n      return false;\n    }\n\n    const dateA = a instanceof Date;\n    const dateB = b instanceof Date;\n    if (dateA != dateB) {\n      return false;\n    }\n    if (dateA && dateB) {\n      return a.getTime() == b.getTime();\n    }\n\n    const regexpA = a instanceof RegExp,\n      regexpB = b instanceof RegExp;\n    if (regexpA != regexpB) {\n      return false;\n    }\n    if (regexpA && regexpB) {\n      return a.toString() == b.toString();\n    }\n\n    const keys = keyList(a);\n    length = keys.length;\n\n    if (length !== keyList(b).length) {\n      return false;\n    }\n\n    for (let i = length; i-- !== 0; ) {\n      if (!hasProp.call(b, keys[i])) {\n        return false;\n      }\n    }\n\n    for (let i = length; i-- !== 0; ) {\n      key = keys[i];\n      if (!equal(a[key], b[key])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return a !== a && b !== b;\n};\n","import { Observable } from 'rxjs';\nimport { distinctUntilChanged } from 'rxjs/operators';\n\nimport { equal } from '../object.utils';\n\nexport const distinctUntilObjectChanged = (fn: (p: any, q: any) => boolean = (p: any, q: any) => equal(p, q)) => <T>(\n  source: Observable<T>\n) => {\n  return source.pipe(distinctUntilChanged(fn));\n};\n","import { AnyAction, Store } from 'redux';\nimport { distinctUntilChanged, filter, map } from 'rxjs/operators';\nimport { Observable, ReplaySubject, Subject } from 'rxjs';\n\nimport { store } from '../config/store.config';\nimport { AppState, IDiceSetForm } from '../store/main';\nimport { IProfile, IRoom, IRoomLog, Log } from '../models/rooms.model';\nimport { distinctUntilObjectChanged } from '../utils/rxjs/distinctUntilObjectChanged.pipe';\nimport { IDiceSet } from '../models/dice.model';\nimport { diceUtils } from '../utils/dice.utils';\n\nexport class StoreService {\n  private static instance: StoreService | null;\n\n  public store: Store = store;\n\n  private readonly takeUntil$ = new Subject();\n  private readonly _store$ = new ReplaySubject<AppState>(1);\n  private readonly _storeUnsubscribeFn: Function;\n\n  private constructor() {\n    this._storeUnsubscribeFn = this.store.subscribe(() => {\n      this._store$.next(this.store.getState());\n    });\n  }\n\n  public get store$(): Observable<AppState> {\n    return this._store$.asObservable();\n  }\n\n  public getDiceSetForm(): Observable<IDiceSetForm> {\n    return this.store$.pipe(\n      map(state => state.form.diceSetForm),\n      distinctUntilObjectChanged()\n    );\n  }\n\n  public getDiceSetFormValues(): Observable<IDiceSet> {\n    return this.store$.pipe(\n      map(state => state.form.diceSetForm?.values),\n      distinctUntilObjectChanged()\n    );\n  }\n\n  public getSelectedRoomData$(): Observable<IRoom> {\n    return this.store$.pipe(\n      map(state => state.firestore.data.selectedRoom),\n      filter(room => !!room)\n    );\n  }\n\n  public getSelectedRoomDataLogs$(): Observable<Array<IRoomLog>> {\n    return this.getSelectedRoomData$().pipe(\n      map(room => room.logs),\n      filter(logs => !!logs)\n    );\n  }\n\n  public getSelectedRoomLastDiceThrowLog$(): Observable<IRoomLog> {\n    return this.getSelectedRoomDataLogs$().pipe(\n      map(logs => logs[logs.length ? logs.length - 1 : 0]),\n      filter(log => !!log && log.type === Log.DICE_ROLL),\n      distinctUntilChanged((logA, logB) => logA.timestamp === logB.timestamp),\n      map((log: IRoomLog) => ({\n        ...log,\n        payload: {\n          ...log.payload,\n          diceSet: diceUtils.sortObjectWithDiceKey(log.payload.diceSet),\n          result: diceUtils.sortObjectWithDiceKey(log.payload.result),\n        },\n      }))\n    );\n  }\n\n  public getUserProfile$(): Observable<IProfile> {\n    return this.store$.pipe(map(state => state.firebase.profile));\n  }\n\n  public dispatch(action: AnyAction): AnyAction {\n    return this.store.dispatch(action);\n  }\n\n  public hostDestroyed(): void {\n    this.takeUntil$.next();\n    this._storeUnsubscribeFn();\n    StoreService.instance = null;\n  }\n\n  static getInstance(): StoreService {\n    if (!StoreService.instance) {\n      StoreService.instance = new StoreService();\n    }\n\n    return StoreService.instance;\n  }\n}\n","import { from, Observable, of, ReplaySubject, Subject } from 'rxjs';\nimport { firestore } from 'firebase/app';\nimport { concatMap, delayWhen, map, takeUntil, tap, withLatestFrom } from 'rxjs/operators';\n\nimport { IDiceAfterThrow, IDiceBeforeThrow, IDiceSet, IDiceThrow, IDiceThrowConfig } from '../models/dice.model';\nimport { roomsActions } from '../store/rooms/rooms.actions';\nimport { uiActions } from '../store/ui/ui.actions';\nimport { FirestoreCollection } from '../models/firebase.model';\nimport { IProfile, IRoomLog, Log } from '../models/rooms.model';\nimport { StoreService } from './store.service';\nimport { diceUtils } from '../utils/dice.utils';\n\nexport class DiceService {\n  private static instance: DiceService | null;\n\n  public readonly diceThrow$ = new Subject<IDiceThrow>();\n  public readonly diceBeforeThrow$ = new Subject<IDiceBeforeThrow>();\n  public readonly diceAfterThrow$ = new ReplaySubject<IDiceAfterThrow>(1);\n  public readonly requestNewThrow$ = new Subject<IDiceThrowConfig>();\n  public readonly diceThrowDelayedWhen$ = this.diceThrow$.pipe(delayWhen(() => this.diceAfterThrow$));\n\n  public profile: IProfile | null = null;\n  public roomUid: string | null = null;\n\n  private readonly takeUntil$ = new Subject();\n  private readonly storeService: StoreService = StoreService.getInstance();\n\n  private constructor(private firestore: firestore.Firestore) {\n    this.createSubscriptions();\n  }\n\n  public hostDestroyed(): void {\n    this.takeUntil$.next();\n    DiceService.instance = null;\n    this.setDiceRolling(false);\n  }\n\n  static getInstance(firestore: firestore.Firestore): DiceService {\n    if (!DiceService.instance) {\n      DiceService.instance = new DiceService(firestore);\n    }\n\n    return DiceService.instance;\n  }\n\n  private createSubscriptions(): void {\n    // this.diceThrow$.pipe(takeUntil(this.takeUntil$)).subscribe(diceThrow => {\n    //   console.log('diceThrow$: ', diceThrow);\n    // });\n\n    this.diceBeforeThrow$.pipe(takeUntil(this.takeUntil$)).subscribe(diceThrow => {\n      this.setDiceRolling(true);\n      this.setIsPending(false);\n    });\n\n    this.diceAfterThrow$.pipe(takeUntil(this.takeUntil$)).subscribe(diceThrow => {\n      this.setDiceRolling(false);\n      this.setIsPending(false);\n    });\n\n    this.handleRequestNewThrow$().subscribe();\n    this.performDiceThrowWhenNewDiceThrowLogAppears$().subscribe();\n  }\n\n  private setDiceRolling(diceRolling: boolean): void {\n    this.storeService.dispatch(roomsActions.diceRolling(diceRolling));\n  }\n\n  private setIsPending(isPending: boolean): void {\n    this.storeService.dispatch(uiActions.setIsPending(isPending));\n  }\n\n  private performDiceThrowWhenNewDiceThrowLogAppears$(): Observable<IRoomLog> {\n    return this.storeService.getSelectedRoomLastDiceThrowLog$().pipe(\n      tap(({ payload }: IRoomLog) => this.diceThrow$.next(payload as IDiceThrow)),\n      takeUntil(this.takeUntil$)\n    );\n  }\n\n  private handleRequestNewThrow$(): Observable<IDiceThrow> {\n    return this.requestNewThrow$.pipe(\n      tap(() => {\n        this.setDiceRolling(true);\n        this.setIsPending(true);\n      }),\n      withLatestFrom(this.storeService.getDiceSetFormValues()),\n      map(([diceThrowConfig, diceSet]: [IDiceThrowConfig, IDiceSet]) => {\n        const diceThrow: IDiceThrow = {\n          diceThrowConfig,\n          diceSet,\n          result: diceUtils.generateThrowResultFromDiceSet(diceSet),\n        };\n        return diceThrow;\n      }),\n      concatMap(diceThrow => {\n        if (!this.roomUid) {\n          return of(null).pipe(\n            tap(() => this.diceThrow$.next(diceThrow)),\n            map(() => diceThrow)\n          );\n        }\n        return this.createNewThrowLogInRoomLogs$(diceThrow);\n      }),\n      takeUntil(this.takeUntil$)\n    );\n  }\n\n  private createNewThrowLogInRoomLogs$(diceThrow: IDiceThrow): Observable<IDiceThrow> {\n    if (!this.roomUid) return of(null);\n\n    // TODO: catch error and show toastBar\n    const documentRef = this.firestore.doc(`${FirestoreCollection.ROOMS}/${this.roomUid}`);\n    return from(\n      this.firestore.runTransaction((t: firestore.Transaction) => {\n        return t.get(documentRef).then(doc => {\n          const newLog: IRoomLog = {\n            authorUid: this.profile?.uid,\n            payload: diceThrow,\n            timestamp: Date.now(),\n            type: Log.DICE_ROLL,\n          };\n\n          const logs: IRoomLog[] = [...doc.data().logs, newLog];\n          return t.update(documentRef, { logs });\n        });\n      })\n    ).pipe(map(() => diceThrow));\n  }\n}\n","import React, { useEffect } from 'react';\nimport { useFirestore } from 'react-redux-firebase';\nimport { useSelector } from 'react-redux';\n\nimport { DiceService } from '../services/dice.service';\nimport { firebaseSelectors } from '../store/firebase/firebase.selectors';\nimport { roomsSelectors } from '../store/rooms/rooms.selectors';\n\nexport const DiceServiceContext = React.createContext<DiceService | null>(null);\n\ninterface DiceServiceContextProps {}\n\nexport const DiceServiceContextC: React.FC<DiceServiceContextProps> = ({ children }) => {\n  const firestore = useFirestore();\n\n  const diceService = DiceService.getInstance(firestore);\n  const profile = useSelector(firebaseSelectors.userProfile);\n  const roomUid = useSelector(roomsSelectors.selectedRoomUid);\n\n  useEffect(() => {\n    diceService.profile = profile;\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [profile]);\n\n  useEffect(() => {\n    diceService.roomUid = roomUid || null;\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [roomUid]);\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(() => () => diceService.hostDestroyed(), []);\n\n  return <DiceServiceContext.Provider value={diceService}>{children}</DiceServiceContext.Provider>;\n};\n","import { Reducer } from 'redux';\nimport { ChatsAction, ChatsState } from './chats.model';\n\nexport const initialState: ChatsState = {\n  selectedChat: null,\n};\n\nexport const chatsReducer: Reducer<ChatsState> = (state = initialState, action) => {\n  switch (action.type) {\n    case ChatsAction.SELECTED: {\n      return { ...state, selectedChat: action.payload };\n    }\n    default: {\n      return state;\n    }\n  }\n};\n","import { Reducer } from 'redux';\nimport { LocationAction, LocationState } from './location.model';\n\nexport const initialState: LocationState = {\n  match: {\n    params: {},\n    isExact: false,\n    path: '',\n    url: '',\n  },\n};\n\nexport const locationReducer: Reducer<LocationState> = (state: LocationState = initialState, action) => {\n  switch (action.type) {\n    case LocationAction.MATCH_CHANGE: {\n      return { ...state, match: action.payload };\n    }\n    default: {\n      return state;\n    }\n  }\n};\n","import { Reducer } from 'redux';\nimport { RoomsAction, RoomsState } from './rooms.model';\n\nexport const initialState: RoomsState = {\n  selectedRoom: null,\n  drawerOpened: true,\n  chatOpened: true,\n  playersOpened: true,\n  diceRolling: false,\n};\n\nexport const roomsReducer: Reducer<RoomsState> = (state = initialState, action) => {\n  switch (action.type) {\n    case RoomsAction.SELECTED: {\n      return { ...state, selectedRoom: action.payload };\n    }\n    case RoomsAction.SET_DRAWER_OPEN_VALUE: {\n      return { ...state, drawerOpened: action.payload };\n    }\n    case RoomsAction.SET_CHAT_OPEN_VALUE: {\n      return { ...state, chatOpened: action.payload };\n    }\n    case RoomsAction.SET_PLAYERS_OPEN_VALUE: {\n      return { ...state, playersOpened: action.payload };\n    }\n    case RoomsAction.SET_DICE_ROLLING: {\n      return { ...state, diceRolling: action.payload };\n    }\n    default: {\n      return state;\n    }\n  }\n};\n","import { Reducer } from 'redux';\nimport { UiState } from './ui.model';\nimport { UiAction } from './ui.model';\n\nexport const initialState: UiState = {\n  isPending: false,\n};\n\nexport const uiReducer: Reducer<UiState> = (state = initialState, action) => {\n  switch (action.type) {\n    case UiAction.PENDING: {\n      return { ...state, isPending: action.payload };\n    }\n    default: {\n      return state;\n    }\n  }\n};\n\n","import { Action, combineReducers, Reducer } from 'redux';\nimport { firebaseReducer, FirebaseReducer, FirestoreReducer } from 'react-redux-firebase';\nimport { FormReducer, reducer as formReducer } from 'redux-form';\n// @ts-ignore\nimport firestore from 'redux-firestore/lib/reducer';\n\nimport {\n  FirebaseQuerySchema,\n  FirebaseUserProfile,\n  FirestoreQuerySchema,\n  FirestoreSchema,\n} from './firebase/firebase.types';\nimport { IProfile, IRoomCreateForm, IRoomPlayerProfileForm } from '../models/rooms.model';\nimport { chatsReducer } from './chats/chats.reducer';\nimport { ChatsState } from './chats/chats.model';\nimport { locationReducer } from './location/location.reducer';\nimport { LocationState } from './location/location.model';\nimport { RoomsState } from './rooms/rooms.model';\nimport { roomsReducer } from './rooms/rooms.reducer';\nimport { UiState } from './ui/ui.model';\nimport { uiReducer } from './ui/ui.reducer';\n\n/**********************************************************\n * Interfaces\n **********************************************************/\n\ninterface RootState {\n  firestore: FirestoreReducer.Reducer & {\n    data: FirestoreSchema & FirestoreQuerySchema;\n  };\n  firebase: FirebaseReducer.Reducer<FirebaseUserProfile> & {\n    auth: IProfile;\n    profile: IProfile;\n    data: FirebaseQuerySchema | any;\n  };\n}\n\n/**********************************************************\n * functions\n **********************************************************/\nexport function makeRootReducer<S = any, A extends Action = Action>(asyncReducers?: Reducer<S, A>) {\n  return combineReducers({\n    firebase: firebaseReducer,\n    firestore,\n    chats: chatsReducer,\n    rooms: roomsReducer,\n    location: locationReducer,\n    form: formReducer,\n    ui: uiReducer,\n    ...asyncReducers,\n  });\n}\n\nconst rootReducer = combineReducers<RootState>({\n  firebase: firebaseReducer as any,\n  firestore,\n});\n\nexport interface IDiceSetForm {\n  registeredFields: {\n    [key: string]: Object;\n  };\n  values: {\n    [key: string]: number;\n  };\n}\n\nexport interface AppState extends ReturnType<typeof rootReducer> {\n  chats: ChatsState;\n  rooms: RoomsState;\n  location: LocationState;\n  form: FormReducer & {\n    diceSetForm: IDiceSetForm;\n    createRoom: { values: IRoomCreateForm };\n    playerProfile: { values: IRoomPlayerProfileForm };\n  };\n  ui: UiState;\n}\n","import thunk from 'redux-thunk';\nimport { applyMiddleware, compose, createStore } from 'redux';\nimport { getFirebase } from 'react-redux-firebase';\nimport { getFirestore } from 'redux-firestore';\n\nimport { makeRootReducer } from '../store/main';\n\nconst initialState = (window as any).___INITIAL_STATE__ || {\n  firebase: { authError: null },\n};\n\nexport const store = configureStore(initialState);\n\nfunction configureStore(initialState: any): any {\n  // ======================================================\n  // Store Enhancers\n  // ======================================================\n  const enhancers = [];\n\n  if (window && window.location && window.location.hostname === 'localhost') {\n    const devToolsExtension = (window as any).__REDUX_DEVTOOLS_EXTENSION__;\n    if (typeof devToolsExtension === 'function') {\n      enhancers.push(devToolsExtension());\n    }\n  }\n\n  // ======================================================\n  // Middleware Configuration\n  // ======================================================\n  const middleware = [\n    thunk.withExtraArgument({ getFirebase, getFirestore }),\n    // This is where you add other middleware like redux-observable\n  ];\n\n  // ======================================================\n  // Store Instantiation and HMR Setup\n  // ======================================================\n  const store = createStore(makeRootReducer(), initialState, compose(applyMiddleware(...middleware), ...enhancers));\n\n  if ((module as any).hot) {\n    // Enable Webpack hot module replacement for reducers\n    (module as any).hot.accept('../store/main', () => {\n      const nextRootReducer = require('../store/main'); // eslint-disable-line global-require, @typescript-eslint/no-var-requires\n      store.replaceReducer(nextRootReducer);\n    });\n  }\n\n  return store;\n}\n","import { Dice, IDiceSet, INewDiceThrowResult } from '../models/dice.model';\nimport { DiceRoller } from 'rpg-dice-roller';\n\nconst roller = new DiceRoller();\n\nexport const diceUtils = {\n  diceSetToString: (dices: IDiceSet): string => {\n    return Object.keys(dices)\n      .map(diceName => (!!dices[diceName] ? dices[diceName] + diceName : ''))\n      .filter(dice => !!dice.length)\n      .join('+');\n  },\n\n  generateThrowResultFromDiceSet: (diceSet: IDiceSet): INewDiceThrowResult => {\n    let diceTrowResult: INewDiceThrowResult = {};\n\n    Object.keys(diceSet).forEach(diceKey => {\n      if (!diceSet[diceKey]) return;\n      const rollSet = diceKey === Dice.D100 ? `${diceSet[diceKey]}${Dice.D10}` : `${diceSet[diceKey]}${diceKey}`;\n      // @ts-ignore\n      let rollOutput = /\\[(.*)\\]/\n        .exec(roller.roll(rollSet))[1]\n        .split(/,\\s?/)\n        .map(d => +d);\n\n      if (diceKey === Dice.D100) {\n        rollOutput = rollOutput.map(d => (d === 10 ? 0 : d * 10));\n      }\n      diceTrowResult[diceKey] = [...rollOutput];\n    });\n\n    return diceTrowResult;\n  },\n\n  sortDiceFunction: (a, b) => parseInt(a.slice(1)) - parseInt(b.slice(1)),\n\n  sortObjectWithDiceKey: (obj: { [key: string]: any }): { [key: string]: any } => {\n    const result: { [key: string]: any } = {};\n    Object.keys(obj)\n      .sort((a, b) => parseInt(a.slice(1)) - parseInt(b.slice(1)))\n      .forEach(diceKey => (result[diceKey] = obj[diceKey]));\n    return result;\n  },\n};\n","import { AppState } from '../main';\nimport { LocationMatch } from './location.model';\n\nexport const locationSelectors = {\n  match: (state: AppState): LocationMatch => state.location.match,\n};\n","import { AppState } from '../main';\n\nexport const chatsSelectors = {\n  selectedChat: (state: AppState): string | null => state.chats.selectedChat,\n\n  profilesUidFromSelectedChat: (state: AppState): string[] => {\n    if (!state.chats.selectedChat) return [];\n\n    return state.firestore.data?.userChats?.[state.chats.selectedChat]?.players || [];\n  },\n};\n","import { action } from 'typesafe-actions';\nimport { ChatsAction } from './chats.model';\n\nexport const chatsActions = {\n  setSelectedChat: (payload: string | null) => action(ChatsAction.SELECTED, payload),\n};\n","export enum ChatsAction {\n  SELECTED = '@@chats/SELECTED',\n}\n\nexport interface ChatsState {\n  readonly selectedChat: string | null;\n}\n","export enum UiAction {\n  PENDING = '@@ui/PENDING',\n}\n\nexport interface UiState {\n  readonly isPending: boolean;\n}\n","import { RouterPath } from '../../models/paths';\n\nexport enum LocationAction {\n  MATCH_CHANGE = '@@location/MATCH_CHANGE',\n}\n\nexport interface LocationMatch<Params extends { [K in keyof Params]?: string } = {}> {\n  params: Params;\n  isExact: boolean;\n  path: RouterPath | string;\n  url: string;\n}\n\nexport interface LocationState {\n  readonly match: LocationMatch;\n}\n","export enum RouterPath {\n  CHATS_PATH = '/chats',\n  CHATS_PATH_ID = '/chats/:chatId',\n  HOME_PATH = '/',\n  ROOM_CREATE_PATH = '/rooms/create',\n  ROOM_PATH = '/room',\n  ROOMS_PATH = '/rooms',\n  ROOMS_PATH_ID = '/room/:roomId',\n}\n","import React from 'react';\nimport { Avatar, Grow, List, ListItem, ListItemAvatar, ListItemText } from '@material-ui/core';\nimport { createStyles, Theme, withStyles, WithStyles } from '@material-ui/core/styles';\nimport { Dictionary } from 'react-redux-firebase';\n\nimport { firstLettersJoined } from '../../../utils/text.utils';\nimport { IChat } from '../../../models/chats.model';\nimport { dateUtils } from '../../../utils/date.utils';\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    root: {\n      width: '100%',\n      backgroundColor: theme.palette.background.paper,\n      height: '20vh',\n      overflowY: 'scroll',\n    },\n    item: {\n      cursor: 'pointer',\n    },\n  });\n\ninterface ChatListElementProps extends WithStyles<typeof styles> {\n  chats: Dictionary<IChat>;\n  selectedChat: string | null;\n  onChatClick: (chatId: string) => void;\n}\n\nfunction ChatListElementC(props: ChatListElementProps) {\n  const { classes, chats, onChatClick, selectedChat } = props;\n\n  const renderElement = () =>\n    Object.keys(chats).map((chatId, id) => (\n      <Grow key={chatId} in timeout={1000 * id + 300}>\n        <ListItem\n          onClick={() => onChatClick(chatId)}\n          selected={chatId === selectedChat}\n          className={classes.item}\n          button\n          dense\n          alignItems=\"flex-start\"\n        >\n          <ListItemAvatar>\n            <Avatar>{firstLettersJoined(chats[chatId].roomName || 'No name')}</Avatar>\n          </ListItemAvatar>\n          <ListItemText\n            primary={chats[chatId].roomName || 'No name'}\n            secondary={dateUtils.timeStampToFormattedDate(chats[chatId].createdAt)}\n          />\n        </ListItem>\n      </Grow>\n    ));\n\n  return <List className={classes.root}>{renderElement()}</List>;\n}\n\nexport const ChatListElements = React.memo(withStyles(styles)(ChatListElementC));\n","import AppBar from '@material-ui/core/AppBar';\nimport Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\nimport React, { useEffect } from 'react';\nimport SearchIcon from '@material-ui/icons/Search';\nimport TextField from '@material-ui/core/TextField';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport { createStyles, Theme, withStyles, WithStyles } from '@material-ui/core/styles';\nimport { Dictionary } from 'react-redux-firebase';\nimport { Grow } from '@material-ui/core';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { IChat } from '../../models/chats.model';\nimport { ChatListElements } from './components/ChatListElements';\nimport { chatsActions } from '../../store/chats/chats.actions';\nimport { chatsSelectors } from '../../store/chats/chats.selectors';\nimport { firestoreSelectors } from '../../store/firebase/firestore.selectors';\n\nexport enum ChatListType {\n  EMBEDDED = 'EMBEDDED',\n  CARD = 'CARD',\n}\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    paper: {\n      maxWidth: 936,\n      margin: 'auto',\n      overflow: 'hidden',\n    },\n    searchBar: {\n      borderBottom: '1px solid rgba(0, 0, 0, 0.12)',\n    },\n    searchInput: {\n      fontSize: theme.typography.fontSize,\n    },\n    block: {\n      display: 'block',\n    },\n    addUser: {\n      marginRight: theme.spacing(1),\n    },\n    contentWrapper: {\n      margin: '16px 16px',\n    },\n  });\n\nexport interface ChatListProps extends WithStyles<typeof styles> {\n  showSearchBar?: boolean;\n  viewType?: ChatListType;\n}\n\nfunction ChatListC(props: ChatListProps) {\n  const { classes, showSearchBar = true, viewType = ChatListType.CARD } = props;\n  const userChats: Dictionary<IChat> = useSelector(firestoreSelectors.userChats) || {};\n  const selectedChat: string | null = useSelector(chatsSelectors.selectedChat);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    return () => {\n      dispatch(chatsActions.setSelectedChat(null));\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    if (!selectedChat && Object.keys(userChats || {}).length) {\n      dispatch(chatsActions.setSelectedChat(Object.keys(userChats as any)[0]));\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [!!selectedChat, Object.keys(userChats || {}).length === 0]);\n\n  const onChatClick = (chatId: string) => {\n    dispatch(chatsActions.setSelectedChat(chatId));\n  };\n\n  return (\n    <Grow in>\n      {viewType === ChatListType.CARD ? (\n        <Paper className={classes.paper}>\n          {showSearchBar && (\n            <AppBar className={classes.searchBar} position=\"static\" color=\"default\" elevation={0}>\n              <Toolbar>\n                <Grid container spacing={2} alignItems=\"center\">\n                  <Grid item>\n                    <SearchIcon className={classes.block} color=\"inherit\" />\n                  </Grid>\n                  <Grid item xs>\n                    <TextField\n                      fullWidth\n                      placeholder=\"Search chat by room name or players\"\n                      InputProps={{\n                        disableUnderline: true,\n                        className: classes.searchInput,\n                      }}\n                    />\n                  </Grid>\n                </Grid>\n              </Toolbar>\n            </AppBar>\n          )}\n          <div className={classes.contentWrapper}>\n            <ChatListElements chats={userChats} onChatClick={onChatClick} selectedChat={selectedChat} />\n          </div>\n        </Paper>\n      ) : (\n        <ChatListElements chats={userChats} onChatClick={onChatClick} selectedChat={selectedChat} />\n      )}\n    </Grow>\n  );\n}\n\nexport const ChatList = withStyles(styles)(ChatListC);\n","import { AppState } from './main';\nimport { firestoreSelectors } from './firebase/firestore.selectors';\nimport { chatsSelectors } from './chats/chats.selectors';\nimport {IRoomCreateForm, IRoomPlayerProfileForm} from '../models/rooms.model';\n\nexport const mainSelectors = {\n  getAllNeededPlayersUid: (state: AppState): string[] => {\n    const selectedRoomPlayers = firestoreSelectors.selectedRoom(state)?.players || {};\n    const selectedRoomGM = firestoreSelectors.selectedRoom(state)?.gameMasterUid;\n    const selectedChatPlayers = chatsSelectors.profilesUidFromSelectedChat(state) || [];\n    return [...selectedChatPlayers, ...Object.keys(selectedRoomPlayers), selectedRoomGM].filter(\n      (v, i, a) => !!v && a.indexOf(v) === i\n    );\n  },\n\n  isGameMasterOfSelectedRoom: (state: AppState): boolean => {\n    const selectedRoomGameMaster = state.firestore.data.selectedRoom\n      ? state.firestore.data.selectedRoom.gameMasterUid\n      : 'unknown';\n\n    return selectedRoomGameMaster === state.firebase.profile.uid;\n  },\n\n  getFormCreateRoom: (state: AppState): IRoomCreateForm => state.form.createRoom.values,\n\n  getFormPlayerProfile: (state: AppState): IRoomPlayerProfileForm => state.form.playerProfile.values,\n\n  isUserARoomPlayerOrGameMaster: (state: AppState): boolean => {\n    if (!state.firestore.data.selectedRoom || !state.firebase.profile.uid) return false;\n    return (\n      !!state.firestore.data.selectedRoom?.players[state.firebase.profile.uid] ||\n      state.firestore.data.selectedRoom?.gameMasterUid === state.firebase.profile.uid\n    );\n  },\n};\n","import React from 'react';\nimport { createStyles, Theme, withStyles, WithStyles } from '@material-ui/core/styles';\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    root: {\n      display: 'flex',\n      alignItems: 'center',\n      flexDirection: 'column',\n      justifyContent: 'flex-start',\n      height: '100%',\n      width: '100%',\n      backgroundColor: theme.palette.background.default,\n      position: 'absolute',\n      zIndex: 10000,\n      left: 0,\n      top: 0,\n    },\n    progress: {\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n      height: '100%',\n    },\n    svg: {\n      width: '15vw',\n      height: '15vh',\n    },\n  });\n\ninterface LoaderProps extends WithStyles<typeof styles> {\n  style?: Object;\n}\n\nfunction LoaderC(props: LoaderProps) {\n  const { classes, style } = props;\n\n  return (\n    <div className={classes.root} style={style}>\n      <div className={classes.progress}>\n        <img className={classes.svg} src={`${process.env.PUBLIC_URL}/assets/svg/loader-knot.svg`} alt=\"Roll a Dice...\" />\n      </div>\n    </div>\n  );\n}\n\nexport const Loader =  React.memo(withStyles(styles)(LoaderC));\n","import dayjs from 'dayjs';\n\nexport const dateUtils = {\n  timeStampToFormattedDate: (time: string | number): string =>\n    dayjs(new Date(new Date(+time))).format('dddd, MMMM D YYYY'),\n\n  timeStampToDetailedTime: (time: string | number): string =>\n    dayjs(new Date(new Date(+time))).format('h:mm:ss'),\n};\n","import React from 'react';\nimport {\n  Checkbox,\n  FormControl,\n  FormControlLabel,\n  FormGroup,\n  FormHelperText,\n  FormLabel,\n  InputLabel,\n  Select,\n  Slider,\n  TextField,\n} from '@material-ui/core';\nimport { Field } from 'redux-form';\nimport { makeStyles, Theme } from '@material-ui/core/styles';\n\n/*\n * Model\n */\ninterface FormFieldGenericProps<T = any> {\n  name: string;\n  label: string;\n  value?: T;\n  min?: number;\n  max?: number;\n  [key: string]: any;\n}\nexport interface IGroupOption {\n  label: string;\n  value: string | number;\n}\n\ninterface FormFieldWithOptionsProps extends FormFieldGenericProps {\n  options: IGroupOption[];\n}\n\n/*\n * Styles\n */\n\nconst styles = (theme: Theme) => ({\n  formField: { marginBottom: theme.spacing(2) },\n  sliderFormField: {\n    width: '100%',\n    marginLeft: 0,\n  },\n});\n\nconst useStyles = makeStyles(styles);\n\n/*\n * Components\n */\n\nexport const FormFieldHelperText = ({ touched, error }: any) => {\n  if (!(touched && error)) {\n    return;\n  } else {\n    return <FormHelperText>{touched && error}</FormHelperText>;\n  }\n};\n\nexport const FormFieldText = React.memo((props: FormFieldGenericProps) => {\n  const classes = useStyles();\n\n  const formField = ({ label, input, meta: { touched, invalid, error }, ...custom }: any) => (\n    <TextField\n      variant=\"outlined\"\n      label={label}\n      placeholder={label}\n      error={touched && invalid}\n      helperText={touched && error}\n      {...input}\n      {...custom}\n    />\n  );\n\n  return <Field {...props} component={formField} className={classes.formField} />;\n});\n\nexport const FormFieldSelect = React.memo((props: FormFieldGenericProps) => {\n  const classes = useStyles();\n\n  const field = ({ input, label, meta: { touched, error }, children, ...custom }: FormFieldGenericProps) => {\n    return (\n      <FormControl error={touched && error}>\n        <InputLabel htmlFor=\"age-native-simple\">Age</InputLabel>\n        <Select\n          variant=\"outlined\"\n          native\n          {...input}\n          {...custom}\n          inputProps={{\n            name: 'age',\n            id: 'age-native-simple',\n          }}\n        >\n          {children}\n        </Select>\n        {FormFieldHelperText({ touched, error })}\n      </FormControl>\n    );\n  };\n\n  return <Field {...props} type=\"checkbox\" component={field} className={classes.formField} />;\n});\n\nexport const FormFieldCheckbox = React.memo((props: FormFieldGenericProps) => {\n  const classes = useStyles();\n\n  const field = ({ input, label }: FormFieldGenericProps) => {\n    return <FormControlLabel control={<Checkbox checked={!!input.value} onChange={input.onChange} />} label={label} />;\n  };\n\n  return <Field {...props} type=\"checkbox\" component={field} className={classes.formField} />;\n});\n\nexport const FormFieldCheckboxGroup = React.memo((props: FormFieldWithOptionsProps) => {\n  const classes = useStyles();\n\n  const field = ({ input, meta, options, label }: FormFieldWithOptionsProps) => {\n    const { name, onChange } = input;\n    const { touched, error } = meta;\n    const inputValue = input.value;\n\n    const checkboxesFormControls = options.map(({ label, value }: any, index: number) => {\n      const handleChange = (event: any) => {\n        const arr = [...inputValue];\n        if (event.target.checked) {\n          arr.push(value);\n        } else {\n          arr.splice(arr.indexOf(value), 1);\n        }\n        return onChange(arr);\n      };\n      const checked = inputValue.includes(value);\n      return (\n        <FormControlLabel\n          key={index}\n          control={<Checkbox checked={checked} onChange={handleChange} name={`${name}[${index}]`} value={value} />}\n          label={label}\n        />\n      );\n    });\n\n    return (\n      <FormControl error={touched && !!error} component=\"fieldset\">\n        <FormLabel component=\"legend\">{label}</FormLabel>\n        <FormGroup row>{checkboxesFormControls}</FormGroup>\n        {FormFieldHelperText({ touched, error })}\n      </FormControl>\n    );\n  };\n\n  return <Field {...props} type=\"checkbox\" component={field} className={classes.formField} />;\n});\n\nexport const FormFieldSlider = React.memo((props: FormFieldGenericProps) => {\n  const classes = useStyles();\n\n  function valuetext(value: number) {\n    return `${value}`;\n  }\n\n  const formField = ({\n    min = 0,\n    max = 16,\n    label,\n    input: { value, onChange, ...inputRest },\n    meta: { touched, invalid, error },\n    ...custom\n  }: any) => {\n    return (\n      <FormControlLabel\n        className={classes.sliderFormField}\n        label={label}\n        labelPlacement=\"start\"\n        control={\n          <Slider\n            style={{ marginBottom: 0 }}\n            defaultValue={0}\n            getAriaValueText={valuetext}\n            aria-labelledby=\"number-of-dices\"\n            valueLabelDisplay=\"auto\"\n            step={1}\n            marks\n            min={min}\n            max={max}\n            value={typeof value === 'number' ? value : 0}\n            onChange={(e: Event, value: number) => onChange(value)}\n            {...inputRest}\n            {...custom}\n          />\n        }\n      />\n    );\n  };\n\n  return <Field {...props} component={formField} className={classes.formField} />;\n});\n","import { action } from 'typesafe-actions';\n\nimport { LocationAction, LocationMatch } from './location.model';\n\nexport const locationActions = {\n  matchChange: (payload: LocationMatch) => action(LocationAction.MATCH_CHANGE, payload),\n};\n","import { action } from 'typesafe-actions';\nimport { RoomsAction } from './rooms.model';\n\nexport const roomsActions = {\n  setSelectedRoom: (payload: string | null) => action(RoomsAction.SELECTED, payload),\n  setDrawerOpenValue: (payload: boolean) => action(RoomsAction.SET_DRAWER_OPEN_VALUE, payload),\n  setChatOpenValue: (payload: boolean) => action(RoomsAction.SET_CHAT_OPEN_VALUE, payload),\n  setPlayersOpenValue: (payload: boolean) => action(RoomsAction.SET_PLAYERS_OPEN_VALUE, payload),\n  diceRolling: (payload: boolean) => action(RoomsAction.SET_DICE_ROLLING, payload),\n};\n","import { AppState } from '../main';\nimport { IApplicationStats } from '../../models/firebase.model';\n\nexport const firebaseSelectors = {\n  isRequesting: (state: AppState): boolean => !Object.values(state.firestore.status.requesting).every(v => !v),\n\n  userProfile: (state: AppState) => state.firebase.auth,\n\n  authenticatingSelector: (state: AppState) => {\n    const {\n      firebase: { auth, isInitializing },\n    } = state;\n    return !auth.isLoaded || isInitializing;\n  },\n\n  isAuthenticated: (state: AppState) => {\n    const {\n      firebase: { auth },\n    } = state;\n    return !auth.isEmpty && !!auth.uid;\n  },\n\n  userConnected: (state: AppState): boolean => state.firebase.data.connected,\n\n  applicationStats: (state: AppState): IApplicationStats => state.firebase.data.applicationStats,\n};\n","export const firstLettersJoined: (sentence: string) => string = sentence =>\n  sentence\n    .split(' ')\n    .map(word => word.charAt(0))\n    .join('')\n    .substring(0, 2)\n    .toUpperCase();\n","import React from 'react';\nimport { InjectedFormProps, reduxForm } from 'redux-form';\nimport { makeStyles, Theme } from '@material-ui/core/styles';\n\nimport { diceDashboardFormModel } from '../../../models/rooms.model';\nimport { Dice } from '../../../models/dice.model';\nimport { FormFieldSlider } from '../../../components/FormComponents';\n\nconst styles = (theme: Theme) => ({\n  inputSlider: {\n    width: '100%',\n    marginLeft: theme.spacing(0),\n    paddingRight: theme.spacing(2),\n    minWidth: theme.spacing(40),\n  },\n});\n\ninterface DiceDashboardFormProps extends InjectedFormProps {\n  diceType: Dice[];\n}\n\nconst useStyles = makeStyles(styles);\n\nfunction DiceDashboardFormC(props: DiceDashboardFormProps) {\n  const { diceType } = props;\n  const classes = useStyles();\n  return (\n    <form onSubmit={(e: any) => e.preventDefault()}>\n      <h2>Set your dices!</h2>\n\n      <div className={classes.inputSlider}>\n        {diceType?.map(dice => (\n          <FormFieldSlider key={dice} {...(diceDashboardFormModel[dice] as any)} />\n        ))}\n      </div>\n    </form>\n  );\n}\nexport const DiceDashboardForm = React.memo(\n  reduxForm({\n    form: 'diceSetForm',\n    initialValues: {\n      [Dice.D4]: 0,\n      [Dice.D6]: 0,\n      [Dice.D8]: 0,\n      [Dice.D10]: 0,\n      [Dice.D12]: 0,\n      [Dice.D20]: 0,\n      [Dice.D100]: 0,\n    },\n  })(DiceDashboardFormC as any) as any\n);\n","import React from 'react';\nimport { Grid, List, ListItem, Typography } from '@material-ui/core';\n\nimport { IDiceThrow } from '../../../models/dice.model';\n\ninterface DiceDashboardResultProps {\n  throwResult: IDiceThrow;\n}\n\nexport function DiceDashboardResult(props: DiceDashboardResultProps) {\n  const { throwResult } = props;\n\n  const renderResultItem = () => {\n    if (!throwResult?.result) {\n      return '';\n    }\n\n    return Object.keys(throwResult.result).map(diceName => (\n      <ListItem key={diceName}>\n        <Grid container spacing={2}>\n          <Grid item>\n            <Typography variant=\"h4\" component=\"span\" color={'textSecondary'}>\n              {diceName}:\n            </Typography>\n          </Grid>\n          <Grid item>\n            <Typography variant=\"h3\" component=\"span\">\n              {throwResult.result[diceName].join(', ')}\n            </Typography>\n          </Grid>\n        </Grid>\n      </ListItem>\n    ));\n  };\n\n  return (\n    <article>\n      <Typography variant=\"h5\" component=\"h2\">\n        Throw result:\n      </Typography>\n      <List>{renderResultItem()}</List>\n    </article>\n  );\n}\n","import clsx from 'clsx';\nimport React, { useContext, useEffect, useState } from 'react';\nimport { Card, CardContent, CardMedia, Collapse, Grow } from '@material-ui/core';\nimport { createStyles, Theme, withStyles, WithStyles } from '@material-ui/core/styles';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\n\nimport { DiceDashboardForm } from './components/DiceDashboardForm';\nimport { DiceDashboardResult } from './components/DiceDashboardResult';\nimport { DiceServiceContext } from '../../contexts/DiceService.context';\nimport { IDiceThrow } from '../../models/dice.model';\nimport { IRoom } from '../../models/rooms.model';\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    root: {\n      display: 'flex',\n      backgroundColor: '#f4f4f2ef',\n    },\n    details: {\n      display: 'flex',\n      flexDirection: 'column',\n    },\n    content: {\n      flex: '1 0 auto',\n    },\n    cover: {\n      width: theme.spacing(18),\n    },\n    playIcon: {\n      height: 38,\n      width: 38,\n    },\n    clickable: {\n      cursor: 'pointer',\n    },\n  });\n\nexport interface DiceDashboardProps extends WithStyles<typeof styles> {\n  visible?: boolean;\n  room?: IRoom;\n}\n\nfunction DiceDashboardC(props: DiceDashboardProps) {\n  const { classes, visible = true, room } = props;\n\n  const destroyed$ = new Subject();\n\n  const diceService = useContext(DiceServiceContext);\n  const [throwResult, setThrowResult] = useState<IDiceThrow>(null);\n\n  useEffect(() => {\n    diceService?.diceThrowDelayedWhen$.pipe(takeUntil(destroyed$)).subscribe(result => setThrowResult(result));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [!!diceService]);\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(() => () => destroyed$.next(), []);\n\n  return (\n    <Grow in={visible}>\n      <Card className={clsx(classes.root, !!throwResult && classes.clickable)} onClick={() => setThrowResult(null)}>\n        <div className={classes.details}>\n          <CardContent className={classes.content}>\n            <Collapse in={!throwResult}>\n              <DiceDashboardForm diceType={room?.diceType} />\n            </Collapse>\n\n            <Collapse in={!!throwResult}>\n              <DiceDashboardResult throwResult={throwResult} />\n            </Collapse>\n          </CardContent>\n        </div>\n        {room?.gameMasterAvatar && (\n          <CardMedia className={classes.cover} image={room?.gameMasterAvatar} title=\"Bot avatar\" />\n        )}\n      </Card>\n    </Grow>\n  );\n}\n\nexport const DiceDashboard = withStyles(styles)(DiceDashboardC);\n","export const diceDefaultConfig = {\n  idCanvas: 'canvas',\n  idLabel: 'label',\n  idSet: 'set',\n  idSelectorDiv: 'selector_div',\n  idInfoDiv: 'info_div',\n  useTrueRandom: false,\n  useShadows: true,\n  whiteDice: false,\n  noresult: false,\n  diceThrow$: null,\n  diceThrowResult$: null,\n};\n","import clsx from 'clsx';\nimport React, { useContext, useEffect, useRef, useState } from 'react';\nimport { createStyles, Theme, withStyles, WithStyles } from '@material-ui/core/styles';\nimport { Paper, Grow } from '@material-ui/core';\n\nimport { diceDefaultConfig } from '../../config/dice.config';\nimport { DiceServiceContext } from '../../contexts/DiceService.context';\nimport { timer } from 'rxjs';\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    root: {\n      width: '100%',\n      height: `calc(100% - ${theme.spacing(2)}px)`,\n      position: 'relative' as 'relative',\n    },\n    diceCanvas: {\n      width: '100%',\n      height: '100%',\n      cursor: 'grab',\n    },\n    grabbing: {\n      cursor: 'grabbing',\n    },\n  });\n\ninterface DiceCardProps extends WithStyles<typeof styles> {\n  visible?: boolean;\n}\n\nfunction DiceCardC(props: DiceCardProps) {\n  const { classes, visible = true } = props;\n\n  const canvasRef = React.useRef(null);\n  const diceContainerEl = useRef(null);\n\n  const [diceInitialized, setDiceInitialized] = useState(false);\n  const [mouseDown, setMouseDown] = useState(false);\n  const diceService = useContext(DiceServiceContext);\n  const canvasWidth: number = (canvasRef.current && (canvasRef.current as any).getBoundingClientRect().width) || 0;\n\n  useEffect(() => {\n    if (!!diceService && !diceInitialized && canvasWidth !== 0) {\n      timer(300).subscribe(() => {\n        (window as any).dice_initialize(diceContainerEl.current, {\n          ...diceDefaultConfig,\n          diceThrow$: diceService.diceThrow$,\n          diceBeforeThrow$: diceService.diceBeforeThrow$,\n          diceAfterThrow$: diceService.diceAfterThrow$,\n          requestNewThrow$: diceService.requestNewThrow$\n        });\n        setDiceInitialized(true);\n      });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [!!canvasWidth, !!diceService]);\n\n  const onMouseDown = (isDown: boolean): void => {\n    setMouseDown(isDown);\n  };\n\n  return (\n    <Grow in={visible}>\n      <Paper elevation={3} className={classes.root}>\n        <div\n          id=\"diceCanvasContainer\"\n          ref={diceContainerEl}\n          className={clsx(classes.diceCanvas, mouseDown && classes.grabbing)}\n          onMouseDown={() => onMouseDown(true)}\n          onMouseUp={() => onMouseDown(false)}\n        >\n          <div ref={canvasRef} id=\"canvas\" />\n        </div>\n      </Paper>\n    </Grow>\n  );\n}\n\nexport const DiceCard = withStyles(styles)(DiceCardC);\n","export enum RoomsAction {\n  SELECTED = '@@rooms/SELECTED',\n  SET_DRAWER_OPEN_VALUE = '@@rooms/SET_DRAWER_OPEN_VALUE',\n  SET_CHAT_OPEN_VALUE = '@@rooms/SET_CHAT_OPEN_VALUE',\n  SET_PLAYERS_OPEN_VALUE = '@@rooms/SET_PLAYERS_OPEN_VALUE',\n  SET_DICE_ROLLING = '@@rooms/SET_DICE_ROLLING',\n}\n\nexport interface RoomsState {\n  readonly selectedRoom: string | null;\n  readonly drawerOpened: boolean;\n  readonly chatOpened: boolean;\n  readonly playersOpened: boolean;\n  readonly diceRolling: boolean;\n}\n","export enum FirestoreCollection {\n  CHATS = 'chats',\n  USERS = 'users',\n  ROOMS = 'rooms',\n}\n\nexport interface IApplicationStats {\n  rooms: number;\n  diceThrows: number;\n  players: number;\n}\n","import { ReduxFirestoreQuerySetting } from 'react-redux-firebase';\nimport { FirestoreCollection } from '../models/firebase.model';\n\nexport const chatsQuery = {\n  getUserChats: (uid: string): ReduxFirestoreQuerySetting => {\n    const uidNonEmptyArray = uid && uid?.length !== 0 ? uid : 'unknown';\n\n    return {\n      collection: FirestoreCollection.CHATS,\n      where: [['players', 'array-contains', uidNonEmptyArray]],\n      storeAs: 'userChats',\n    };\n  },\n};\n","import { ReduxFirestoreQuerySetting } from 'react-redux-firebase';\n\nexport const profileQuery = {\n  getProfilesByUid: (uids: string[] = []): ReduxFirestoreQuerySetting => ({\n    collection: 'users',\n    where: [['uid', 'in', uids]],\n    storeAs: 'usersProfiles',\n  }),\n  connected: { path: '.info/connected',  storeAs: 'connected' },\n};\n","import { ReduxFirestoreQuerySetting } from 'react-redux-firebase';\nimport { FirestoreCollection } from '../models/firebase.model';\n\nexport const roomsQuery = {\n         getUserRoomsAsGameMaster: (uid: string): ReduxFirestoreQuerySetting => ({\n           collection: FirestoreCollection.ROOMS,\n           where: [['gameMasterUid', '==', uid]],\n           storeAs: 'userRoomsAsGameMaster',\n         }),\n\n         getUserRoomsAsPlayer: (uid: string): ReduxFirestoreQuerySetting => ({\n           collection: FirestoreCollection.ROOMS,\n           where: [['playersUid', 'array-contains', uid]],\n           storeAs: 'userRoomsAsPlayer',\n         }),\n\n         getRoom: (DocUid: string): ReduxFirestoreQuerySetting => {\n           const doc = DocUid.length ? DocUid : 'unknown';\n           return {\n             collection: FirestoreCollection.ROOMS,\n             doc,\n             storeAs: 'selectedRoom',\n           };\n         },\n       };\n","import React, { useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport { useFirebase, useFirebaseConnect, useFirestore, useFirestoreConnect } from 'react-redux-firebase';\n\nimport { chatsQuery } from '../queries/chat.query';\nimport { firebaseSelectors } from '../store/firebase/firebase.selectors';\nimport { profileQuery } from '../queries/profile.query';\nimport { roomsQuery } from '../queries/rooms.query';\nimport { roomsSelectors } from '../store/rooms/rooms.selectors';\nimport { mainSelectors } from '../store/main.selectors';\nimport { FirestoreCollection } from '../models/firebase.model';\n\nexport function WhenAuthenticated() {\n  const firestore = useFirestore();\n  const firebase = useFirebase();\n\n  const profile = useSelector(firebaseSelectors.userProfile);\n  const selectedRoomUid = useSelector(roomsSelectors.selectedRoomUid);\n  const uniqProfilesUid: string[] = [...useSelector(mainSelectors.getAllNeededPlayersUid)];\n  const userConnected = useSelector(firebaseSelectors.userConnected);\n\n  function updateUserStatus(connected: boolean): void {\n    const docUserRef = firestore.doc(`${FirestoreCollection.USERS}/${profile.uid}`);\n    docUserRef.update({ connected });\n  }\n\n  function updateUserStatusOnDisconnect(): void {\n    const docUserRef = firebase.ref(`${FirestoreCollection.USERS}/${profile.uid}`);\n    docUserRef.onDisconnect().update({ connected: false });\n  }\n\n  useEffect(() => {\n    if (userConnected !== true || !profile.uid) {\n      return;\n    }\n    updateUserStatus(userConnected);\n    updateUserStatusOnDisconnect();\n    return () => {\n      updateUserStatus(false);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [userConnected, profile.uid]);\n\n  useFirebaseConnect([profileQuery.connected]);\n\n  useFirestoreConnect([\n    /**\n     * Get all profiles data listed in array (for chat and room)\n     */\n    profileQuery.getProfilesByUid(uniqProfilesUid.length ? uniqProfilesUid : ['unknown']),\n    /**\n     * Get all profiles listed in chat messages\n     */\n    chatsQuery.getUserChats(profile.uid),\n    /**\n     * Get all rooms where user is MG\n     */\n    roomsQuery.getUserRoomsAsGameMaster(profile.uid || 'unknown'),\n    /**\n     * Get all rooms where user is Player\n     */\n    roomsQuery.getUserRoomsAsPlayer(profile.uid || 'unknown'),\n    /**\n     * Get selectedRoom by player\n     */\n    roomsQuery.getRoom(selectedRoomUid || 'unknown'),\n  ]);\n  return <React.Fragment />;\n}\n","import React from 'react';\nimport { useSelector } from 'react-redux';\n\nimport { WhenAuthenticated } from './WhenAuthenticated';\nimport { firebaseSelectors } from '../store/firebase/firebase.selectors';\n\ninterface CoreProps {\n  children: React.ReactElement;\n}\n\nexport function Core(props: CoreProps) {\n  const isAuthenticated = useSelector(firebaseSelectors.isAuthenticated);\n\n  return (\n    <React.Fragment>\n      {isAuthenticated && <WhenAuthenticated />}\n      {props.children}\n    </React.Fragment>\n  );\n}\n","import React from 'react';\nimport { RouteProps } from 'react-router';\n\nimport { RouterPath } from '../../models/paths';\n\n// @ts-ignore\nconst ChatListLazy = React.lazy(() => import('./ChatListPage'));\n\nexport const ChatList: RouteProps = {\n  path: [RouterPath.CHATS_PATH_ID, RouterPath.CHATS_PATH],\n  component: ChatListLazy as React.ComponentClass,\n};\n","import { createStyles, Theme, withStyles, WithStyles } from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport Avatar from '@material-ui/core/Avatar';\nimport React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { useFirebase } from 'react-redux-firebase';\nimport { Menu, MenuItem } from '@material-ui/core';\n\nimport { useSelector } from 'react-redux';\nimport { firebaseSelectors } from '../store/firebase/firebase.selectors';\nimport { RouterPath } from '../models/paths';\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    iconButtonAvatar: {\n      padding: 4,\n    },\n    avatarSize: {\n      border: `4px solid ${theme.palette.primary.main}`,\n      width: theme.spacing(6),\n      height: theme.spacing(6),\n    },\n  });\n\ninterface ProfileAvatarProps extends WithStyles<typeof styles> {}\n\nfunction ProfileAvatarC(props: ProfileAvatarProps) {\n  const firebase = useFirebase();\n  const history = useHistory();\n  const profile = useSelector(firebaseSelectors.userProfile);\n  const isAuthenticated = useSelector(firebaseSelectors.isAuthenticated);\n  const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\n\n  const handleClick = (event: React.MouseEvent<HTMLButtonElement>) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleLogout = () => {\n    firebase.logout().then(() => {\n      setAnchorEl(null);\n      history.push(RouterPath.HOME_PATH);\n    });\n  };\n\n  const handleLogin = () => {\n    firebase\n      .login({ provider: 'google', type: 'popup' })\n      .then(() => {\n        setAnchorEl(null);\n        history.push(RouterPath.ROOMS_PATH);\n      })\n      .catch(err => alert(err.message));\n  };\n\n  const { classes } = props;\n\n  return (\n    <React.Fragment>\n      <IconButton color=\"inherit\" className={classes.iconButtonAvatar} onClick={handleClick}>\n        <Avatar src={profile.avatarUrl || profile.photoURL} alt={profile.displayName} className={classes.avatarSize} />\n      </IconButton>\n\n      <Menu id=\"simple-menu\" anchorEl={anchorEl} keepMounted open={Boolean(anchorEl)} onClose={() => setAnchorEl(null)}>\n        {isAuthenticated ? (\n          <MenuItem onClick={handleLogout}>Logout</MenuItem>\n        ) : (\n          <MenuItem onClick={handleLogin}>Login with Google</MenuItem>\n        )}\n      </Menu>\n    </React.Fragment>\n  );\n}\n\nexport const ProfileAvatar = withStyles(styles)(ProfileAvatarC);\n","import clsx from 'clsx';\nimport React from 'react';\nimport { createStyles, Theme, withStyles, WithStyles } from '@material-ui/core/styles';\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    ornament: {\n      backgroundImage: `url(${process.env.PUBLIC_URL}/assets/svg/ornament-knot.svg)`,\n      width: '100%',\n      height: '100%',\n      backgroundRepeatX: 'repeat',\n      backgroundRepeatY: 'no-repeat',\n      backgroundSize: 'contain',\n    },\n    vartical: {\n      backgroundImage: `url(${process.env.PUBLIC_URL}/assets/svg/ornament-knot-vartical.svg)`,\n      backgroundRepeatX: 'no-repeat',\n      backgroundRepeatY: 'repeat',\n    },\n  });\n\ninterface OrnamentProps extends WithStyles<typeof styles> {\n  vartical?: boolean;\n}\n\nfunction OrnamentC(props: OrnamentProps) {\n  const { classes, vartical } = props;\n\n  return <div className={clsx(classes.ornament, vartical && classes.vartical)} />;\n}\n\nexport const Ornament =  React.memo(withStyles(styles)(OrnamentC));\n","import AppBar from '@material-ui/core/AppBar';\nimport Grid from '@material-ui/core/Grid';\nimport Hidden from '@material-ui/core/Hidden';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport React from 'react';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport { createStyles, Theme, withStyles, WithStyles } from '@material-ui/core/styles';\n\nimport { ProfileAvatar } from '../../containers/ProfileAvatar';\nimport { Ornament } from '../../components/Ornament';\n\nconst lightColor = 'rgba(255, 255, 255, 0.7)';\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    secondaryBar: {\n      zIndex: 0,\n    },\n    menuButton: {\n      marginLeft: -theme.spacing(1),\n    },\n    link: {\n      textDecoration: 'none',\n      color: lightColor,\n      '&:hover': {\n        color: theme.palette.common.white,\n      },\n    },\n    button: {\n      borderColor: lightColor,\n    },\n    ornament: {\n      bottom: '2px',\n      height: '24px',\n      opacity: 0.2,\n      position: 'absolute',\n      zIndex: -1,\n      width: ' 100%',\n    },\n    avatar: {\n      marginBottom: '-16px',\n    },\n  });\n\ninterface HeaderProps extends WithStyles<typeof styles> {\n  onDrawerToggle: () => void;\n}\n\nfunction HeaderC(props: HeaderProps) {\n  const { classes, onDrawerToggle } = props;\n\n  return (\n    <React.Fragment>\n      <AppBar color=\"primary\" position=\"sticky\" elevation={2}>\n        <Toolbar>\n          <Grid container spacing={1} alignItems=\"center\">\n            <Hidden smUp>\n              <Grid item>\n                <IconButton\n                  color=\"inherit\"\n                  aria-label=\"open drawer\"\n                  onClick={onDrawerToggle}\n                  className={classes.menuButton}\n                >\n                  <MenuIcon />\n                </IconButton>\n              </Grid>\n            </Hidden>\n            <Grid item xs />\n            <Grid item>\n              <div className={classes.avatar}>\n                <ProfileAvatar />\n              </div>\n            </Grid>\n          </Grid>\n        </Toolbar>\n        <div className={classes.ornament}>\n          <Ornament />\n        </div>\n      </AppBar>\n    </React.Fragment>\n  );\n}\n\nexport const Header =  React.memo(withStyles(styles)(HeaderC));\n","import React from 'react';\nimport { createStyles, Theme, withStyles, WithStyles } from '@material-ui/core/styles';\nimport { Fade } from '@material-ui/core';\n\nimport { Loader } from './Loader';\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    container: {\n      opacity: 0,\n      visibility: 'hidden',\n      transitionDelay: '1300ms',\n      transition: 'opacity 225ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n    },\n    visible: {\n      opacity: 1,\n      visibility: 'visible',\n    },\n  });\n\ninterface LoaderScreenProps extends WithStyles<typeof styles> {\n  children: React.ReactElement;\n  isAuthenticating: boolean;\n}\n\nexport const LoaderScreenC = (props: LoaderScreenProps) => {\n  const { children, isAuthenticating = true } = props;\n\n  return (\n    <React.Fragment>\n      <Fade in={isAuthenticating}>\n        <Loader />\n      </Fade>\n      {children}\n    </React.Fragment>\n  );\n};\n\nexport const LoaderScreen =  React.memo(withStyles(styles)(LoaderScreenC));\n","import clsx from 'clsx';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport React from 'react';\nimport { createStyles, Theme, withStyles, WithStyles } from '@material-ui/core/styles';\nimport { DrawerProps } from '@material-ui/core/Drawer';\nimport { ExpansionPanel, ExpansionPanelDetails, ExpansionPanelSummary } from '@material-ui/core';\nimport { NavLink } from 'react-router-dom';\nimport { Omit } from '@material-ui/types';\n\nimport { RouterPath } from '../../../models/paths';\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    item: {\n      paddingTop: 1,\n      paddingBottom: 1,\n      color: 'rgba(255, 255, 255, 0.7)',\n      '&:hover,&:focus': {\n        backgroundColor: 'rgba(255, 255, 255, 0.08)',\n      },\n    },\n    itemCategoryWrapper: {\n      minHeight: '60px',\n    },\n    itemCategory: {\n      width: '100%',\n      paddingTop: theme.spacing(2),\n      paddingBottom: theme.spacing(2),\n    },\n    itemCategoryAbsolute: {\n      position: 'absolute',\n      top: 0,\n    },\n    itemActiveItem: {\n      color: theme.palette.secondary.main,\n    },\n    itemPrimary: {\n      fontSize: 'inherit',\n    },\n    itemIcon: {\n      minWidth: 'auto',\n      marginRight: theme.spacing(2),\n    },\n    expansionPanel: {\n      borderRadius: '0 !important',\n      padding: '0 !important',\n      margin: '0 !important',\n      backgroundColor: (theme.palette.background as any).secondary,\n    },\n    expansionPanelSummary: {\n      margin: '0 !important',\n      padding: '0 16px 0px 0 !important',\n    },\n    expansionPanelSummaryContainer: {\n      padding: '0 !important',\n      margin: '0 !important',\n    },\n    expandIcon: {\n      color: 'rgba(255, 255, 255, 0.7)',\n    },\n    divider: {\n      boxShadow: '0 -1px 0 #404854 inset',\n    },\n  });\n\nexport interface NavigatorItemProps extends Omit<DrawerProps, 'classes'>, WithStyles<typeof styles> {\n  active?: boolean;\n  children?: React.ReactElement | React.ReactFragment;\n  icon?: React.ReactElement;\n  navLink?: RouterPath;\n  text?: string;\n  expandable?: boolean;\n  defaultExpanded?: boolean;\n}\n\nfunction NavigatorItemC(props: NavigatorItemProps) {\n  const { classes, children, icon, text, navLink, active, expandable, defaultExpanded } = props;\n\n  const setNavLink = (children: React.ReactElement) =>\n    navLink ? <NavLink to={navLink}>{children}</NavLink> : <React.Fragment>{children}</React.Fragment>;\n\n  return expandable ? (\n    <ExpansionPanel className={clsx(classes.expansionPanel, classes.divider)} defaultExpanded={defaultExpanded}>\n      <ExpansionPanelSummary\n        aria-controls=\"additional-actions1-content\"\n        aria-label=\"Expand\"\n        classes={{ content: classes.expansionPanelSummaryContainer, expandIcon: classes.expandIcon }}\n        className={classes.expansionPanelSummary}\n        expandIcon={<ExpandMoreIcon />}\n        id=\"additional-actions1-header\"\n      >\n        <div className={classes.itemCategoryWrapper} />\n\n        {setNavLink(\n          <ListItem\n            button\n            className={clsx(\n              classes.item,\n              classes.itemCategory,\n              active && classes.itemActiveItem,\n              classes.itemCategoryAbsolute\n            )}\n          >\n            {icon && <ListItemIcon className={classes.itemIcon}>{icon}</ListItemIcon>}\n            {text && <ListItemText classes={{ primary: classes.itemPrimary }}>{text}</ListItemText>}\n          </ListItem>\n        )}\n      </ExpansionPanelSummary>\n      {children && <ExpansionPanelDetails>{children}</ExpansionPanelDetails>}\n    </ExpansionPanel>\n  ) : (\n    setNavLink(\n      <ListItem\n        button\n        className={clsx(classes.item, classes.itemCategory, active && classes.itemActiveItem, classes.divider)}\n      >\n        {icon && <ListItemIcon className={classes.itemIcon}>{icon}</ListItemIcon>}\n        {text && <ListItemText classes={{ primary: classes.itemPrimary }}>{text}</ListItemText>}\n      </ListItem>\n    )\n  );\n}\n\nexport const NavigatorItem =  React.memo(withStyles(styles)(NavigatorItemC));\n","import React from 'react';\nimport { createStyles, Theme, withStyles, WithStyles } from '@material-ui/core/styles';\nimport { Card, CardContent, CardMedia, Typography } from '@material-ui/core';\n\nimport { IRoom } from '../models/rooms.model';\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    cards: {\n      maxWidth: 936,\n      width: '100%',\n    },\n    media: {\n      height: 140,\n    },\n  });\n\ninterface RoomCardProps extends WithStyles<typeof styles> {\n  room: IRoom;\n}\n\nfunction RoomCardC(props: RoomCardProps) {\n  const { classes, room } = props;\n\n  return (\n    <Card className={classes.cards}>\n      {room.roomImage && <CardMedia className={classes.media} image={room.roomImage} title=\"Room image\" />}\n      <CardContent>\n        <Typography gutterBottom variant=\"h5\" component=\"h2\">\n          {room.roomName}\n        </Typography>\n        <Typography gutterBottom variant=\"h6\" component=\"h6\">\n          {room.campaignTitle}\n        </Typography>\n        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n          {room.description}\n        </Typography>\n        <p>\n          <Typography variant=\"caption\" color=\"textSecondary\" component=\"span\">\n            Max players:\n          </Typography>{' '}\n          <Typography color=\"textSecondary\" variant=\"h6\" component=\"span\">\n            {room.maxPlayers}\n          </Typography>\n        </p>\n        <p>\n          <Typography variant=\"caption\" color=\"textSecondary\" component=\"span\">\n            Room Game Master:\n          </Typography>\n          <br />\n          <Typography variant=\"subtitle1\" color=\"textSecondary\" component=\"span\">\n            {Object.values(room.players).find(player => !!player.gameMaster)?.displayName}\n          </Typography>\n        </p>\n      </CardContent>\n    </Card>\n  );\n}\n\nexport const RoomCard = withStyles(styles)(RoomCardC);\n","import ChatIcon from '@material-ui/icons/Chat';\nimport Drawer, { DrawerProps } from '@material-ui/core/Drawer';\nimport GamesIcon from '@material-ui/icons/Games';\nimport HomeIcon from '@material-ui/icons/Home';\nimport MeetingRoomIcon from '@material-ui/icons/MeetingRoom';\nimport React from 'react';\nimport { createStyles, Theme, withStyles, WithStyles } from '@material-ui/core/styles';\nimport { List, ListItem } from '@material-ui/core';\nimport { Omit } from '@material-ui/types';\nimport { useSelector } from 'react-redux';\n\nimport { ChatList, ChatListType } from '../../modules/ChatList/ChatList';\nimport { firestoreSelectors } from '../../store/firebase/firestore.selectors';\nimport { locationSelectors } from '../../store/location/location.selectors';\nimport { NavigatorItem } from './components/NavigatorItem';\nimport { RoomCard } from '../../containers/RoomCard';\nimport { RouterPath } from '../../models/paths';\nimport { roomsSelectors } from '../../store/rooms/rooms.selectors';\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    logo: {\n      fontSize: 24,\n      color: theme.palette.common.white,\n      '&:hover,&:focus': {\n        backgroundColor: 'rgba(255, 255, 255, 0.08)',\n      },\n      backgroundColor: (theme.palette.background as any).secondary,\n      boxShadow: '0 -1px 0 #404854 inset',\n      paddingTop: theme.spacing(2),\n      paddingBottom: theme.spacing(2),\n    },\n  });\n\nexport interface NavigatorProps extends Omit<DrawerProps, 'classes'>, WithStyles<typeof styles> {}\n\nfunction NavigatorC(props: NavigatorProps) {\n  const { classes, ...other } = props;\n\n  const { path: locationPath } = useSelector(locationSelectors.match);\n  const selectedRoomData = useSelector(firestoreSelectors.selectedRoom);\n  const drawerOpened = useSelector(roomsSelectors.drawerOpened);\n\n  return (\n    <Drawer\n      open={drawerOpened}\n      variant={locationPath === RouterPath.ROOMS_PATH_ID ? 'persistent' : 'permanent'}\n      {...other}\n    >\n      <List disablePadding>\n        <ListItem className={classes.logo}>Roll a Dice...</ListItem>\n      </List>\n\n      <NavigatorItem\n        navLink={RouterPath.HOME_PATH}\n        icon={<HomeIcon />}\n        text=\"HomePage Page\"\n        active={RouterPath.HOME_PATH === locationPath}\n      />\n\n      <NavigatorItem\n        navLink={RouterPath.ROOMS_PATH}\n        icon={<MeetingRoomIcon />}\n        text=\"Rooms\"\n        expandable={locationPath.indexOf(RouterPath.ROOMS_PATH) === -1}\n        active={locationPath.indexOf(RouterPath.ROOMS_PATH) > -1}\n      >\n        <React.Fragment>List here</React.Fragment>\n      </NavigatorItem>\n\n      <NavigatorItem\n        navLink={RouterPath.CHATS_PATH}\n        icon={<ChatIcon />}\n        text=\"Chats\"\n        expandable={locationPath.indexOf(RouterPath.CHATS_PATH) === -1}\n        active={locationPath.indexOf(RouterPath.CHATS_PATH) > -1}\n      >\n        <ChatList viewType={ChatListType.EMBEDDED} />\n      </NavigatorItem>\n\n      {selectedRoomData && (\n        <NavigatorItem\n          icon={<GamesIcon />}\n          text=\"Room Ditails\"\n          expandable={true}\n          active={locationPath.indexOf(RouterPath.ROOM_PATH) > -1}\n          defaultExpanded\n        >\n          <RoomCard room={selectedRoomData} />\n        </NavigatorItem>\n      )}\n    </Drawer>\n  );\n}\n\nexport const Navigator = withStyles(styles)(NavigatorC);\n","import { createMuiTheme, Theme } from '@material-ui/core/styles';\n\nfunction themeFn() {\n  let theme = createMuiTheme({\n    palette: {\n      primary: {\n        light: '#afaf4c',\n        main: '#9b9c20',\n        dark: '#6c6d16',\n      },\n      secondary: {\n        light: '#cba234',\n        main: '#be8b02',\n        dark: '#856101',\n      },\n      background: {\n        default: '#e0e0d3',\n        paper: '#f4f4f2',\n        // @ts-ignore\n        secondary: '#111b0e',\n      },\n    },\n    typography: {\n      fontFamily: [\n        'ringbearermedium',\n        '-apple-system',\n        'BlinkMacSystemFont',\n        '\"Segoe UI\"',\n        'Roboto',\n        '\"Helvetica Neue\"',\n        'Arial',\n        'sans-serif',\n        '\"Apple Color Emoji\"',\n        '\"Segoe UI Emoji\"',\n        '\"Segoe UI Symbol\"',\n      ].join(','),\n      h5: {\n        fontWeight: 500,\n        fontSize: 26,\n        letterSpacing: 0.5,\n      },\n    },\n    shape: {\n      borderRadius: 8,\n    },\n    props: {\n      MuiTab: {\n        disableRipple: true,\n      },\n    },\n    mixins: {\n      toolbar: {\n        minHeight: 48,\n      },\n    },\n  });\n\n  theme = {\n    ...theme,\n    overrides: {\n      MuiDrawer: {\n        paper: {\n          backgroundColor: '#121b0f',\n        },\n      },\n      MuiButton: {\n        label: {\n          textTransform: 'none',\n        },\n        contained: {\n          boxShadow: 'none',\n          '&:active': {\n            boxShadow: 'none',\n          },\n        },\n      },\n      MuiTabs: {\n        root: {\n          marginLeft: theme.spacing(1),\n        },\n        indicator: {\n          height: 3,\n          borderTopLeftRadius: 3,\n          borderTopRightRadius: 3,\n        },\n      },\n      MuiTab: {\n        root: {\n          textTransform: 'none',\n          margin: '0 16px',\n          minWidth: 0,\n          padding: 0,\n          [theme.breakpoints.up('md')]: {\n            padding: 0,\n            minWidth: 0,\n          },\n        },\n      },\n      MuiIconButton: {\n        root: {\n          padding: theme.spacing(1),\n        },\n      },\n      MuiTooltip: {\n        tooltip: {\n          borderRadius: 4,\n        },\n      },\n      MuiDivider: {\n        root: {\n          backgroundColor: '#404854',\n        },\n      },\n      MuiListItemText: {\n        primary: {\n          fontWeight: theme.typography.fontWeightMedium,\n        },\n      },\n      MuiListItemIcon: {\n        root: {\n          color: 'inherit',\n          marginRight: 0,\n          '& svg': {\n            fontSize: 20,\n          },\n        },\n      },\n      MuiAvatar: {\n        root: {\n          width: 32,\n          height: 32,\n        },\n      },\n    },\n  };\n\n  return theme;\n}\n\nexport const theme = themeFn();\n\nexport const darkTheme: Theme = { ...theme, palette: { ...theme.palette, type: 'dark' } };\nexport const lightTheme: Theme = { ...theme, palette: { ...theme.palette, type: 'dark' } };\n","import Hidden from '@material-ui/core/Hidden';\nimport React from 'react';\nimport { createStyles, withStyles, WithStyles } from '@material-ui/core/styles';\nimport { useSelector } from 'react-redux';\n\nimport { Navigator } from './Navigator/Navigator';\nimport { theme } from '../styles/theme.styles';\nimport { roomsSelectors } from '../store/rooms/rooms.selectors';\n\nlet drawerWidth = 320;\n\nconst styles = createStyles({\n  drawer: {\n    [theme.breakpoints.up('sm')]: {\n      flexShrink: 0,\n      width: '100%',\n      maxWidth: drawerWidth,\n      transition: 'max-width 225ms cubic-bezier(0, 0, 0.2, 1) 0ms',\n    },\n  },\n});\n\ninterface NavBarProps extends WithStyles<typeof styles> {\n  mobileOpen: boolean;\n  handleDrawerToggle: () => void;\n}\n\nexport function NavBarC(props: NavBarProps) {\n  const { classes, mobileOpen } = props;\n  const drawerOpened = useSelector(roomsSelectors.drawerOpened);\n\n  return (\n    <nav className={classes.drawer} style={{ maxWidth: drawerOpened ? drawerWidth : 0 }}>\n      <Hidden smUp implementation=\"js\">\n        <Navigator\n          PaperProps={{ style: { width: drawerWidth } }}\n          variant=\"temporary\"\n          open={mobileOpen}\n          onClose={props.handleDrawerToggle}\n        />\n      </Hidden>\n      <Hidden xsDown implementation=\"css\">\n        <Navigator PaperProps={{ style: { width: drawerWidth } }} />\n      </Hidden>\n    </nav>\n  );\n}\n\nexport const NavBar = withStyles(styles)(NavBarC);\n","import { AppState } from '../main';\n\nexport const uiSelectors = {\n  isPending: (state: AppState): boolean => state.ui.isPending,\n};\n","import clsx from 'clsx';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Link from '@material-ui/core/Link';\nimport React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport { createStyles, ThemeProvider, withStyles, WithStyles } from '@material-ui/core/styles';\nimport { LinearProgress, Slide } from '@material-ui/core';\nimport { useSelector } from 'react-redux';\n\nimport { firebaseSelectors } from '../store/firebase/firebase.selectors';\nimport { Header } from './Header/Header';\nimport { LoaderScreen } from '../components/LoaderScreen';\nimport { NavBar } from './NavBar';\nimport { theme } from '../styles/theme.styles';\nimport { uiSelectors } from '../store/ui/ui.selectors';\n\nfunction Copyright() {\n  return (\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\n      {'Copyright  '}\n      <Link color=\"inherit\" href=\"mailto:markky21@gmail.com\">\n        Marcin Mirecki\n      </Link>{' '}\n      {new Date().getFullYear()}\n      {'.'}\n    </Typography>\n  );\n}\n\nconst styles = createStyles({\n  root: {\n    display: 'flex',\n    minHeight: '100vh',\n  },\n  lineLoader: {\n    position: 'fixed',\n    height: theme.spacing(0.75),\n    top: 0,\n    left: 0,\n    width: '100%',\n    zIndex: 10000,\n    transition: 'max-height 0.2s ease;',\n  },\n  app: {\n    flex: 1,\n    display: 'flex',\n    flexDirection: 'column',\n    maxWidth: '100vw',\n    overflow: 'hidden',\n  },\n  appWhenAuth: {\n    maxWidth: `calc(100vw - ${theme.spacing(40)})`,\n  },\n  main: {\n    flex: 1,\n    padding: theme.spacing(6, 4),\n    background: theme.palette.background.default,\n  },\n\n  footer: {\n    padding: theme.spacing(1),\n    background: theme.palette.background.default,\n  },\n});\n\nexport interface PaperbaseProps extends WithStyles<typeof styles> {\n  children?: any;\n}\nfunction CoreLayoutC(props: PaperbaseProps) {\n  const { classes, children } = props;\n  const [mobileOpen, setMobileOpen] = React.useState(false);\n  const isAuthenticated = useSelector(firebaseSelectors.isAuthenticated);\n  const isAuthenticating = useSelector(firebaseSelectors.authenticatingSelector);\n  const isRequesting = useSelector(firebaseSelectors.isRequesting);\n  const isPending = useSelector(uiSelectors.isPending);\n\n  const handleDrawerToggle = () => {\n    setMobileOpen(!mobileOpen);\n  };\n\n  return (\n    <ThemeProvider theme={theme}>\n      <LoaderScreen isAuthenticating={isAuthenticating}>\n        <div className={classes.root}>\n          <CssBaseline />\n          <Slide in={isRequesting || isPending} direction={'down'}>\n            <LinearProgress className={classes.lineLoader} color={'secondary'} />\n          </Slide>\n          {isAuthenticated && <NavBar mobileOpen={mobileOpen} handleDrawerToggle={handleDrawerToggle} />}\n\n          <div className={clsx(classes.app, isAuthenticated && classes.appWhenAuth)}>\n            <Header onDrawerToggle={handleDrawerToggle} />\n            <main className={classes.main}>{children}</main>\n            <footer className={classes.footer}>\n              <Copyright />\n            </footer>\n          </div>\n        </div>\n      </LoaderScreen>\n    </ThemeProvider>\n  );\n}\n\nexport const CoreLayout = withStyles(styles)(CoreLayoutC);\n","import React from 'react';\nimport { createStyles, Theme, withStyles, WithStyles } from '@material-ui/core/styles';\nimport { Grid, Grow, Paper, Typography } from '@material-ui/core';\nimport { useSelector } from 'react-redux';\n\nimport { firebaseSelectors } from '../../store/firebase/firebase.selectors';\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    root: {\n      width: '100%',\n    },\n    paper: {\n      padding: theme.spacing(2, 4),\n      height: '100%',\n    },\n    label: { textAlign: 'center' },\n    value: {\n      lineHeight: '70%',\n      textAlign: 'center',\n    },\n  });\n\ninterface AppStatsProps extends WithStyles<typeof styles> {}\n\nfunction AppStatsC(props: AppStatsProps) {\n  const { classes } = props;\n\n  const appStats = useSelector(firebaseSelectors.applicationStats);\n  const statsView = [\n    { label: 'Players:', value: appStats?.players || 0 },\n    { label: 'Rooms created:', value: appStats?.rooms || 0 },\n    { label: 'Dice throws:', value: appStats?.diceThrows || 0 },\n  ];\n\n  return (\n    <Grid container direction=\"row\" justify=\"space-between\" alignItems=\"stretch\" spacing={4} className={classes.root}>\n      {statsView.map((stat, id) => (\n        <Grow key={stat.label} in timeout={id * 300 + 300}>\n          <Grid item xs={4}>\n            <Paper className={classes.paper}>\n              <Typography component=\"h5\" variant=\"h5\" color=\"textSecondary\" className={classes.label}>\n                {stat.label}\n              </Typography>\n              <Typography component=\"div\" variant=\"h1\" className={classes.value}>\n                {stat.value}\n              </Typography>\n            </Paper>\n          </Grid>\n        </Grow>\n      ))}\n    </Grid>\n  );\n}\n\nexport const AppStats = withStyles(styles)(AppStatsC);\n","import clsx from 'clsx';\nimport React, { useEffect, useState } from 'react';\nimport { makeStyles, Theme } from '@material-ui/core/styles';\nimport { useSelector } from 'react-redux';\n\nimport { AppStats } from '../../../modules/AppStats/AppStats';\nimport { Dice } from '../../../models/dice.model';\nimport { DiceCard } from '../../../modules/DiceCard/DiceCard';\nimport { DiceDashboard } from '../../../modules/DiceDashboard/DiceDashboard';\nimport { DiceServiceContextC } from '../../../contexts/DiceService.context';\nimport { IRoom } from '../../../models/rooms.model';\nimport { roomsSelectors } from '../../../store/rooms/rooms.selectors';\nimport { timer } from 'rxjs';\n\nconst styles = (theme: Theme) => ({\n  root: {\n    position: 'relative' as 'relative',\n    margin: theme.spacing(-4, -2),\n    height: `calc(100% + ${theme.spacing(10)}px)`,\n  },\n  cssGrid: {\n    display: 'grid',\n    gridTemplateColumns: '1fr',\n    gridTemplateRows: 'auto 1fr',\n    rowGap: `${theme.spacing(2)}px`,\n    columnGap: `${theme.spacing(2)}px`,\n  },\n  cssItem1: {\n    gridColumn: 1,\n    gridRow: 1,\n  },\n  cssItem2: {\n    gridColumn: 1,\n    gridRow: 2,\n  },\n  mainInfoCard: {},\n  diceCard: {},\n  diceDashboard: {\n    position: 'fixed' as 'fixed',\n    zIndex: 1000,\n    bottom: theme.spacing(8),\n    right: theme.spacing(3),\n  },\n});\n\nconst useStyles = makeStyles(styles);\n\ninterface HomeWrapperProps {}\n\nconst room: Partial<IRoom> = {\n  diceType: [Dice.D4, Dice.D6, Dice.D8, Dice.D10, Dice.D12, Dice.D20, Dice.D100],\n  gameMasterAvatar: `${process.env.PUBLIC_URL}/assets/images/avatar-1.jpg`,\n};\n\nexport function HomeWrapper(props: HomeWrapperProps) {\n  const classes = useStyles();\n  const diceRolling = useSelector(roomsSelectors.diceRolling);\n\n  const [showDiceCard, setShowDiceCard] = useState(false);\n  useEffect(() => {\n    timer(300).subscribe(() => setShowDiceCard(true));\n  }, []);\n\n  return (\n    <div className={clsx(classes.root, classes.cssGrid)}>\n      <section className={clsx(classes.mainInfoCard, classes.cssGrid)}>\n        <AppStats />\n      </section>\n\n      <DiceServiceContextC>\n        <nav className={classes.diceDashboard}>\n          <DiceDashboard visible={!diceRolling} room={room as IRoom} />\n        </nav>\n        <section className={classes.diceCard}>{showDiceCard && <DiceCard />}</section>\n      </DiceServiceContextC>\n    </div>\n  );\n}\n","export const appQuery = {\n  applicationStats: { path: 'applicationStats', storeAs: 'applicationStats' },\n};\n","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport '../../App.css';\nimport { HomeWrapper } from './components/HomeWrapper';\nimport { locationActions } from '../../store/location/location.actions';\nimport { LocationMatch } from '../../store/location/location.model';\nimport { locationSelectors } from '../../store/location/location.selectors';\nimport { useFirebaseConnect } from 'react-redux-firebase';\nimport { appQuery } from '../../queries/app.query';\n\nexport interface HomeProps {\n  match: LocationMatch;\n}\n\nexport function HomeC(props: HomeProps) {\n  const { match } = props;\n  const dispatch = useDispatch();\n  const storeLocationMatch = useSelector(locationSelectors.match);\n\n  useFirebaseConnect([appQuery.applicationStats]);\n\n  useEffect(() => {\n    if (JSON.stringify(match) !== JSON.stringify(storeLocationMatch)) {\n      dispatch(locationActions.matchChange(match));\n    }\n  });\n\n  return <HomeWrapper />;\n}\n\nexport const HomePage = {\n  path: '/',\n  component: HomeC,\n};\n","import React from 'react';\nimport { RouteProps } from 'react-router';\n\nimport { RouterPath } from '../../models/paths';\n\n// @ts-ignore\nconst RoomLazy = React.lazy(() => import('./RoomPage'));\n\nexport const Room: RouteProps = {\n  path: [RouterPath.ROOMS_PATH_ID],\n  component: RoomLazy as React.ComponentClass,\n};\n","import React from 'react';\nimport { RouteProps } from 'react-router';\n\nimport { RouterPath } from '../../models/paths';\n\n// @ts-ignore\nconst RoomListLazy = React.lazy(() => import('./RoomListPage'))\n\n\nexport const RoomList: RouteProps = {\n  path: [RouterPath.ROOM_CREATE_PATH, RouterPath.ROOMS_PATH],\n  component: RoomListLazy,\n};\n","import React, { Suspense } from 'react';\nimport { Backdrop, createStyles, Theme } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Route, Switch } from 'react-router-dom';\n\nimport { ChatList } from './ChatList';\nimport { CoreLayout } from '../layouts/CoreLayout';\nimport { HomePage } from './Home/HomePage';\nimport { Room } from './Room';\nimport { RoomList } from './RoomList';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    backdrop: {\n      zIndex: theme.zIndex.drawer + 1,\n      color: '#fff',\n    },\n  })\n);\n\nexport function CreateRoutes() {\n  const classes = useStyles();\n  return (\n    <CoreLayout>\n      <Suspense fallback={<Backdrop className={classes.backdrop} open />}>\n        <Switch>\n          <Route exact path={HomePage.path} component={HomePage.component} />\n\n          {[RoomList, Room, ChatList].map((settings, index) => (\n            <Route key={`Route-${index}`} {...settings} />\n          ))}\n\n          {/*<Route component={NotFoundRoute.component} />* // TODO to implement */}\n        </Switch>\n      </Suspense>\n    </CoreLayout>\n  );\n}\n","import { firestore, initializeApp } from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/database';\nimport 'firebase/firestore';\nimport firebaseApp from 'firebase/app';\nimport { createFirestoreInstance } from 'redux-firestore';\nimport { store } from './store.config';\n\nexport const firebaseConfig = {\n  apiKey: 'AIzaSyA0bXhCXcLJC9FGk3ynZoJP5KJ6CY3sqYY',\n  authDomain: 'roll-a-dice-4cba1.firebaseapp.com',\n  databaseURL: 'https://roll-a-dice-4cba1.firebaseio.com',\n  projectId: 'roll-a-dice-4cba1',\n  storageBucket: 'roll-a-dice-4cba1.appspot.com',\n  messagingSenderId: '768622256477',\n  appId: '1:768622256477:web:51a5c9f0ef4030d366c8b4',\n  measurementId: 'G-J2M3QQ0M89',\n};\n\nexport const reactReduxFirebaseConfig = {\n  userProfile: 'users',\n  useFirestoreForProfile: true,\n};\n\nexport const reactReduxFirebaseProps = {\n  firebase: firebaseApp,\n  config: reactReduxFirebaseConfig,\n  dispatch: store.dispatch,\n  createFirestoreInstance,\n};\n\ninitializeApp(firebaseConfig);\nfirestore();\n","import React from 'react';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core';\nimport { Provider } from 'react-redux';\nimport { ReactReduxFirebaseProvider } from 'react-redux-firebase';\n\nimport { HashRouter} from 'react-router-dom';\nimport { Core } from './containers/Core';\nimport { CreateRoutes } from './routes';\nimport { reactReduxFirebaseProps } from './config/firebase.config';\nimport { store } from './config/store.config';\n\nexport interface AppProps {}\n\nexport default function App(props: AppProps) {\n  const prefersDarkMode = useMediaQuery('(prefers-color-scheme: dark)');\n\n  const theme = React.useMemo(\n    () =>\n      createMuiTheme({\n        palette: {\n          // TODO: provide theming\n          type: prefersDarkMode ? 'dark' : 'light',\n        },\n      }),\n    [prefersDarkMode]\n  );\n\n  (window as any).theme = theme;\n\n  return (\n    <Provider store={store}>\n      <ReactReduxFirebaseProvider {...reactReduxFirebaseProps}>\n        <ThemeProvider theme={theme}>\n          <Core>\n            <HashRouter>\n              <CreateRoutes />\n            </HashRouter>\n          </Core>\n        </ThemeProvider>\n      </ReactReduxFirebaseProvider>\n    </Provider>\n  );\n}\n","/* eslint-disable */\n// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\ninterface Config {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n}\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL((process as { env: { [key: string]: string } }).env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (response.status === 404 || (contentType != null && contentType.indexOf('javascript') === -1)) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './styles/index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { version } from '../package.json';\nimport { env } from './config/main.config';\nimport { initScripts } from './utils/initail.utils';\n\n// Window Variables\n// ------------------------------------\n(window as any).version = version;\n(window as any).env = env;\ninitScripts();\n\n// Store Initialization\n// ------------------------------------\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","export const env = 'local';\n","import { AppState } from '../main';\n\nexport const roomsSelectors = {\n  selectedRoomUid: (state: AppState): string | null => state.rooms.selectedRoom || null,\n  drawerOpened: (state: AppState): boolean => state.rooms.drawerOpened,\n  chatOpened: (state: AppState): boolean => state.rooms.chatOpened,\n  playersOpened: (state: AppState): boolean => state.rooms.playersOpened,\n  diceRolling: (state: AppState): boolean => state.rooms.diceRolling,\n};\n","export interface IDiceBeforeThrow {\n  throwConfig: IDiceThrowConfig;\n}\n\nexport interface IDiceAfterThrow {\n  throwConfig: IDiceThrowConfig;\n  result: number[];\n}\n\nexport enum Dice {\n  D4 = 'd4',\n  D6 = 'd6',\n  D8 = 'd8',\n  D10 = 'd10',\n  D12 = 'd12',\n  D20 = 'd20',\n  D100 = 'd100',\n}\n\nexport interface IDiceVector {\n  x: number;\n  y: number;\n}\n\nexport interface IDiceThrowConfig {\n  vectors: IDiceVector[];\n  boost: number;\n  dist: number;\n}\n\nexport interface INewDiceThrowResult {\n  [Dice.D4]?: number[];\n  [Dice.D6]?: number[];\n  [Dice.D8]?: number[];\n  [Dice.D10]?: number[];\n  [Dice.D12]?: number[];\n  [Dice.D20]?: number[];\n  [Dice.D100]?: number[];\n}\n\nexport interface IDiceSet {\n  [Dice.D4]?: number;\n  [Dice.D6]?: number;\n  [Dice.D8]?: number;\n  [Dice.D10]?: number;\n  [Dice.D12]?: number;\n  [Dice.D20]?: number;\n  [Dice.D100]?: number;\n}\n\nexport interface IDiceThrow {\n  diceSet: IDiceSet;\n  diceThrowConfig?: IDiceThrowConfig;\n  result?: INewDiceThrowResult;\n}\n","import { AppState } from '../main';\nimport { Dictionary } from 'react-redux-firebase';\nimport { IChat } from '../../models/chats.model';\nimport { IPlayerProfile, IProfile, IRoom, IRoomCreateForm } from '../../models/rooms.model';\n\nexport const firestoreSelectors = {\n  userChats: (state: AppState): Dictionary<IChat> | undefined => state.firestore.data.userChats,\n\n  getChat: (chatId: string | null) => (state: AppState): IChat | null =>\n    !!chatId && state.firestore.data.userChats ? state.firestore.data.userChats[chatId] : null,\n\n  selectedRoom: (state: AppState): IRoom | undefined => state.firestore.data.selectedRoom,\n\n  selectedRoomFormData: (state: AppState): IRoomCreateForm | undefined => {\n    if (!state.firestore.data.selectedRoom) return;\n    const {\n      roomName,\n      diceType,\n      description,\n      roomImage,\n      gameMasterAvatar,\n      campaignTitle,\n      maxPlayers,\n    } = state.firestore.data.selectedRoom;\n    return { roomName, diceType, description, roomImage, gameMasterAvatar, campaignTitle, maxPlayers };\n  },\n\n  userRoomsAsGameMaster: (state: AppState): Dictionary<IRoom> | undefined => state.firestore.data.userRoomsAsGameMaster,\n\n  userRoomsAsPlayer: (state: AppState): Dictionary<IRoom> | undefined => state.firestore.data.userRoomsAsPlayer,\n\n  allUserRoomsUid: (state: AppState): string[] =>\n    Object.keys({\n      ...state.firestore.data.userRoomsAsGameMaster,\n      ...state.firestore.data.userRoomsAsPlayer,\n    }),\n\n  usersProfiles: (state: AppState): Dictionary<IProfile> => state.firestore.data.usersProfiles || {},\n\n  selectedRoomPlayers: (state: AppState): Dictionary<IPlayerProfile> => state.firestore.data.selectedRoom?.players,\n\n  selectedRoomGameMasterUid: (state: AppState): string => state.firestore.data.selectedRoom?.gameMasterUid,\n\n  selectedRoomLogs: (state: AppState) => state.firestore.data.selectedRoom?.logs,\n};\n"],"sourceRoot":""}