(this["webpackJsonproll-a-dice"]=this["webpackJsonproll-a-dice"]||[]).push([[2],{101:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(18),r={userChats:function(e){return e.firestore.data.userChats},getChat:function(e){return function(t){return e&&t.firestore.data.userChats?t.firestore.data.userChats[e]:null}},selectedRoom:function(e){return e.firestore.data.selectedRoom},selectedRoomFormData:function(e){if(e.firestore.data.selectedRoom){var t=e.firestore.data.selectedRoom;return{roomName:t.roomName,diceType:t.diceType,description:t.description,roomImage:t.roomImage,gameMasterAvatar:t.gameMasterAvatar,campaignTitle:t.campaignTitle,maxPlayers:t.maxPlayers}}},userRoomsAsGameMaster:function(e){return e.firestore.data.userRoomsAsGameMaster},userRoomsAsPlayer:function(e){return e.firestore.data.userRoomsAsPlayer},allUserRoomsUid:function(e){return Object.keys(Object(n.a)({},e.firestore.data.userRoomsAsGameMaster,{},e.firestore.data.userRoomsAsPlayer))},usersProfiles:function(e){return e.firestore.data.usersProfiles||{}},selectedRoomPlayers:function(e){var t,a=e.firestore.data.usersProfiles||{};return((null===(t=e.firestore.data.selectedRoom)||void 0===t?void 0:t.players)||[]).map((function(e){return a[e]})).filter((function(e){return!!e}))},selectedRoomGameMasterProfile:function(e){var t,a=e.firestore.data.usersProfiles||{},n=null===(t=e.firestore.data.selectedRoom)||void 0===t?void 0:t.gameMaster.uid;return a&&n?a[n]:null},selectedRoomLogs:function(e){var t;return null===(t=e.firestore.data.selectedRoom)||void 0===t?void 0:t.logs}}},111:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return c}));var n,r=a(7),o=a(0),i=a.n(o);!function(e){e.DICE_ROLL="DICE_ROLL"}(n||(n={}));var c={roomName:{name:"roomName",label:"Name of the Room *",fullWidth:!0},description:{name:"description",label:"Room description",multiline:!0,fullWidth:!0},campaignTitle:{name:"campaignTitle",label:"Current campaign tittle",multiline:!1,fullWidth:!0},roomImage:{name:"roomImage",label:"Room image URL",multiline:!1,fullWidth:!0},gameMasterAvatar:{name:"gameMasterAvatar",label:"Game master avatar URL",multiline:!1,fullWidth:!0},maxPlayers:{name:"maxPlayers",label:"Maximum players *",multiline:!1,fullWidth:!0,type:"number",InputProps:{inputProps:{min:1,max:8}}},diceType:{name:"diceType",label:"Allowed dice *",options:[{label:r.a.D4,value:r.a.D4},{label:r.a.D6,value:r.a.D6},{label:r.a.D8,value:r.a.D8},{label:r.a.D10,value:r.a.D10},{label:r.a.D12,value:r.a.D12},{label:r.a.D20,value:r.a.D20},{label:r.a.D100,value:r.a.D100}]},d4:{label:i.a.createElement("span",{style:{width:"48px",display:"inline-block"}},r.a.D4),name:r.a.D4},d6:{label:i.a.createElement("span",{style:{width:"48px",display:"inline-block"}},r.a.D6),name:r.a.D6},d8:{label:i.a.createElement("span",{style:{width:"48px",display:"inline-block"}},r.a.D8),name:r.a.D8},d10:{label:i.a.createElement("span",{style:{width:"48px",display:"inline-block"}},r.a.D10),name:r.a.D10},d12:{label:i.a.createElement("span",{style:{width:"48px",display:"inline-block"}},r.a.D12),name:r.a.D12},d20:{label:i.a.createElement("span",{style:{width:"48px",display:"inline-block"}},r.a.D20),name:r.a.D20},d100:{label:i.a.createElement("span",{style:{width:"48px",display:"inline-block"}},r.a.D100),name:r.a.D100}};r.a.D4,r.a.D4,r.a.D6,r.a.D6,r.a.D8,r.a.D8,r.a.D10,r.a.D10,r.a.D12,r.a.D12,r.a.D20,r.a.D20,r.a.D100,r.a.D100},119:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(31),i=a(11),c=a(58),l=a(48),s=a(197),u=a(198),m=a(379),d=a(675),f=a(385),p=a(383),b=(a(122),a(671)),h=a(672),g=a(682),v=a(673),E=a(380),O=a(683),j=a(281),y=a(55),w=a(199),S=function(e){return Object(y.action)(w.a.PENDING,e)},D=a(57),R=a(111),T=a(18),x=a(670),C=a(669),A=a(126),k=Array.isArray,N=Object.keys,P=Object.prototype.hasOwnProperty,_=function e(t,a){if(t===a)return!0;if(t&&a&&"object"==typeof t&&"object"==typeof a){var n,r,o=k(t),i=k(a);if(o&&i){if((n=t.length)!=a.length)return!1;for(var c=n;0!==c--;)if(!e(t[c],a[c]))return!1;return!0}if(o!=i)return!1;var l=t instanceof Date,s=a instanceof Date;if(l!=s)return!1;if(l&&s)return t.getTime()==a.getTime();var u=t instanceof RegExp,m=a instanceof RegExp;if(u!=m)return!1;if(u&&m)return t.toString()==a.toString();var d=N(t);if((n=d.length)!==N(a).length)return!1;for(var f=n;0!==f--;)if(!P.call(a,d[f]))return!1;for(var p=n;0!==p--;)if(!e(t[r=d[p]],a[r]))return!1;return!0}return t!==t&&a!==a},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e,t){return _(e,t)};return function(t){return t.pipe(Object(C.a)(e))}},L=a(146),M=function(){function e(){var t=this;Object(s.a)(this,e),this.store=A.a,this.takeUntil$=new m.a,this._store$=new d.a(1),this._storeUnsubscribeFn=void 0,this._storeUnsubscribeFn=this.store.subscribe((function(){t._store$.next(t.store.getState())}))}return Object(u.a)(e,[{key:"getDiceSetForm",value:function(){return this.store$.pipe(Object(E.a)((function(e){return e.form.diceSetForm})),I())}},{key:"getDiceSetFormValues",value:function(){return this.store$.pipe(Object(E.a)((function(e){var t;return null===(t=e.form.diceSetForm)||void 0===t?void 0:t.values})),I())}},{key:"getSelectedRoomData$",value:function(){return this.store$.pipe(Object(E.a)((function(e){return e.firestore.data.selectedRoom})),Object(x.a)((function(e){return!!e})))}},{key:"getSelectedRoomDataLogs$",value:function(){return this.getSelectedRoomData$().pipe(Object(E.a)((function(e){return e.logs})),Object(x.a)((function(e){return!!e})))}},{key:"getSelectedRoomLastDiceThrowLog$",value:function(){return this.getSelectedRoomDataLogs$().pipe(Object(E.a)((function(e){return e[e.length?e.length-1:0]})),Object(x.a)((function(e){return!!e&&e.type===R.a.DICE_ROLL})),Object(C.a)((function(e,t){return e.timestamp===t.timestamp})),Object(E.a)((function(e){return Object(T.a)({},e,{payload:Object(T.a)({},e.payload,{diceSet:L.a.sortObjectWithDiceKey(e.payload.diceSet),result:L.a.sortObjectWithDiceKey(e.payload.result)})})})))}},{key:"getUserProfile$",value:function(){return this.store$.pipe(Object(E.a)((function(e){return e.firebase.profile})))}},{key:"dispatch",value:function(e){return this.store.dispatch(e)}},{key:"hostDestroyed",value:function(){this.takeUntil$.next(),this._storeUnsubscribeFn(),e.instance=null}},{key:"store$",get:function(){return this._store$.asObservable()}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}();M.instance=void 0;var U=function(){function e(t){var a=this;Object(s.a)(this,e),this.firestore=t,this.diceThrow$=new m.a,this.diceBeforeThrow$=new m.a,this.diceAfterThrow$=new d.a(1),this.requestNewThrow$=new m.a,this.diceThrowDelayedWhen$=this.diceThrow$.pipe(Object(b.a)((function(){return a.diceAfterThrow$}))),this.profile=null,this.roomUid=null,this.takeUntil$=new m.a,this.storeService=M.getInstance(),this.createSubscriptions()}return Object(u.a)(e,[{key:"hostDestroyed",value:function(){this.takeUntil$.next(),e.instance=null,this.setDiceRolling(!1)}},{key:"createSubscriptions",value:function(){var e=this;this.diceBeforeThrow$.pipe(Object(h.a)(this.takeUntil$)).subscribe((function(t){e.setDiceRolling(!0),e.setIsPending(!1)})),this.diceAfterThrow$.pipe(Object(h.a)(this.takeUntil$)).subscribe((function(t){e.setDiceRolling(!1),e.setIsPending(!1)})),this.handleRequestNewThrow$().subscribe(),this.performDiceThrowWhenNewDiceThrowLogAppears$().subscribe()}},{key:"setDiceRolling",value:function(e){this.storeService.dispatch(j.a.diceRolling(e))}},{key:"setIsPending",value:function(e){this.storeService.dispatch(S(e))}},{key:"performDiceThrowWhenNewDiceThrowLogAppears$",value:function(){var e=this;return this.storeService.getSelectedRoomLastDiceThrowLog$().pipe(Object(g.a)((function(t){var a=t.payload;return e.diceThrow$.next(a)})),Object(h.a)(this.takeUntil$))}},{key:"handleRequestNewThrow$",value:function(){var e=this;return this.requestNewThrow$.pipe(Object(g.a)((function(){e.setDiceRolling(!0),e.setIsPending(!0)})),Object(v.a)(this.storeService.getDiceSetFormValues()),Object(E.a)((function(e){var t=Object(l.a)(e,2),a=t[0],n=t[1];return{diceThrowConfig:a,diceSet:n,result:L.a.generateThrowResultFromDiceSet(n)}})),Object(O.a)((function(t){return e.roomUid?e.createNewThrowLogInRoomLogs$(t):Object(f.a)(null).pipe(Object(g.a)((function(){return e.diceThrow$.next(t)})),Object(E.a)((function(){return t})))})),Object(h.a)(this.takeUntil$))}},{key:"createNewThrowLogInRoomLogs$",value:function(e){var t=this;if(!this.roomUid)return Object(f.a)(null);var a=this.firestore.doc("".concat(D.a.ROOMS,"/").concat(this.roomUid));return Object(p.a)(this.firestore.runTransaction((function(n){return n.get(a).then((function(r){var o,i={authorUid:null===(o=t.profile)||void 0===o?void 0:o.uid,payload:e,timestamp:Date.now().toString(),type:R.a.DICE_ROLL},l=[].concat(Object(c.a)(r.data().logs),[i]);return n.update(a,{logs:l})}))}))).pipe(Object(E.a)((function(){return e})))}}],[{key:"getInstance",value:function(t){return e.instance||(e.instance=new e(t)),e.instance}}]),e}();U.instance=void 0;var F=a(33),H=a(63);a.d(t,"a",(function(){return $})),a.d(t,"b",(function(){return W}));var $=r.a.createContext(null),W=function(e){var t=e.children,a=Object(o.useFirestore)(),c=U.getInstance(a),l=Object(i.useSelector)(F.a.userProfile),s=Object(i.useSelector)(H.a.selectedRoomUid);return Object(n.useEffect)((function(){c.profile=l}),[l]),Object(n.useEffect)((function(){c.roomUid=s||null}),[s]),Object(n.useEffect)((function(){return function(){return c.hostDestroyed()}}),[]),r.a.createElement($.Provider,{value:c},t)}},126:function(e,t,a){"use strict";var n=a(376),r=a(22),o=a(31),i=a(200),c=a(18),l=a(677),s=a(269),u=a.n(s),m=a(195),d={selectedChat:null},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m.a.SELECTED:return Object(c.a)({},e,{selectedChat:t.payload});default:return e}},p=a(201),b={match:{params:{},isExact:!1,path:"",url:""}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p.a.MATCH_CHANGE:return Object(c.a)({},e,{match:t.payload});default:return e}},g=a(56),v={selectedRoom:null,drawerOpened:!0,chatOpened:!0,playersOpened:!0,diceRolling:!1},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.a.SELECTED:return Object(c.a)({},e,{selectedRoom:t.payload});case g.a.SET_DRAWER_OPEN_VALUE:return Object(c.a)({},e,{drawerOpened:t.payload});case g.a.SET_CHAT_OPEN_VALUE:return Object(c.a)({},e,{chatOpened:t.payload});case g.a.SET_PLAYERS_OPEN_VALUE:return Object(c.a)({},e,{playersOpened:t.payload});case g.a.SET_DICE_ROLLING:return Object(c.a)({},e,{diceRolling:t.payload});default:return e}},O=a(199),j={isPending:!1},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O.a.PENDING:return Object(c.a)({},e,{isPending:t.payload});default:return e}};Object(r.c)({firebase:o.firebaseReducer,firestore:u.a});a.d(t,"a",(function(){return w}));var w=function(e){var t=[];if(window&&window.location&&"localhost"===window.location.hostname){var a=window.__REDUX_DEVTOOLS_EXTENSION__;"function"===typeof a&&t.push(a())}var s=[n.a.withExtraArgument({getFirebase:o.getFirebase,getFirestore:i.getFirestore})];0;return Object(r.e)(Object(r.c)(Object(c.a)({firebase:o.firebaseReducer,firestore:u.a,chats:f,rooms:E,location:h,form:l.a,ui:y},m)),e,r.d.apply(void 0,[r.a.apply(void 0,s)].concat(t)));var m}(window.___INITIAL_STATE__||{firebase:{authError:null}})},146:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(58),r=a(7),o=a(378),i=new o.DiceRoller,c={diceSetToString:function(e){return Object.keys(e).map((function(t){return e[t]?e[t]+t:""})).filter((function(e){return!!e.length})).join("+")},generateThrowResultFromDiceSet:function(e){var t={};return Object.keys(e).forEach((function(a){if(e[a]){var o=a===r.a.D100?"".concat(e[a]).concat(r.a.D10):"".concat(e[a]).concat(a),c=/\[(.*)\]/.exec(i.roll(o))[1].split(/,\s?/).map((function(e){return+e}));a===r.a.D100&&(c=c.map((function(e){return 10===e?0:10*e}))),t[a]=Object(n.a)(c)}})),t},sortDiceFunction:function(e,t){return parseInt(e.slice(1))-parseInt(t.slice(1))},sortObjectWithDiceKey:function(e){var t={};return Object.keys(e).sort((function(e,t){return parseInt(e.slice(1))-parseInt(t.slice(1))})).forEach((function(a){return t[a]=e[a]})),t}}},154:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n={match:function(e){return e.location.match}}},181:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n={selectedChat:function(e){return e.chats.selectedChat},profilesUidFromSelectedChat:function(e){var t,a,n;return e.chats.selectedChat&&(null===(t=e.firestore.data)||void 0===t||null===(a=t.userChats)||void 0===a||null===(n=a[e.chats.selectedChat])||void 0===n?void 0:n.players)||[]}}},194:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(55),r=a(195),o={setSelectedChat:function(e){return Object(n.action)(r.a.SELECTED,e)}}},195:function(e,t,a){"use strict";var n;a.d(t,"a",(function(){return n})),function(e){e.SELECTED="@@chats/SELECTED"}(n||(n={}))},199:function(e,t,a){"use strict";var n;a.d(t,"a",(function(){return n})),function(e){e.PENDING="@@ui/PENDING"}(n||(n={}))},201:function(e,t,a){"use strict";var n;a.d(t,"a",(function(){return n})),function(e){e.MATCH_CHANGE="@@location/MATCH_CHANGE"}(n||(n={}))},23:function(e,t,a){"use strict";var n;a.d(t,"a",(function(){return n})),function(e){e.CHATS_PATH="/chats",e.CHATS_PATH_ID="/chats/:chatId",e.HOME_PATH="/",e.ROOM_CREATE_PATH="/rooms/create",e.ROOM_PATH="/room",e.ROOMS_PATH="/rooms",e.ROOMS_PATH_ID="/room/:roomId"}(n||(n={}))},266:function(e,t,a){"use strict";var n=a(651),r=a(653),o=a(271),i=a(0),c=a.n(i),l=a(349),s=a.n(l),u=a(600),m=a(652),d=a(609),f=a(5),p=a(647),b=a(11),h=a(598),g=a(655),v=a(679),E=a(656),O=a(649),j=a(348),y=a(279);var w,S=c.a.memo(Object(f.a)((function(e){return Object(d.a)({root:{width:"100%",backgroundColor:e.palette.background.paper,height:"20vh",overflowY:"scroll"},item:{cursor:"pointer"}})}))((function(e){var t=e.classes,a=e.chats,n=e.onChatClick,r=e.selectedChat;return c.a.createElement(O.a,{className:t.root},Object.keys(a).map((function(e,o){return c.a.createElement(p.a,{key:e,in:!0,timeout:1e3*o+300},c.a.createElement(h.a,{onClick:function(){return n(e)},selected:e===r,className:t.item,button:!0,dense:!0,alignItems:"flex-start"},c.a.createElement(g.a,null,c.a.createElement(v.a,null,Object(j.a)(a[e].roomName||"No name"))),c.a.createElement(E.a,{primary:a[e].roomName||"No name",secondary:y.a.timeStampToFormattedDate(a[e].createdAt)})))})))}))),D=a(194),R=a(181),T=a(101);a.d(t,"b",(function(){return w})),a.d(t,"a",(function(){return x})),function(e){e.EMBEDDED="EMBEDDED",e.CARD="CARD"}(w||(w={}));var x=Object(f.a)((function(e){return Object(d.a)({paper:{maxWidth:936,margin:"auto",overflow:"hidden"},searchBar:{borderBottom:"1px solid rgba(0, 0, 0, 0.12)"},searchInput:{fontSize:e.typography.fontSize},block:{display:"block"},addUser:{marginRight:e.spacing(1)},contentWrapper:{margin:"16px 16px"}})}))((function(e){var t=e.classes,a=e.showSearchBar,l=void 0===a||a,d=e.viewType,f=void 0===d?w.CARD:d,h=Object(b.useSelector)(T.a.userChats)||{},g=Object(b.useSelector)(R.a.selectedChat),v=Object(b.useDispatch)();Object(i.useEffect)((function(){return function(){v(D.a.setSelectedChat(null))}}),[]),Object(i.useEffect)((function(){!g&&Object.keys(h||{}).length&&v(D.a.setSelectedChat(Object.keys(h)[0]))}),[!!g,0===Object.keys(h||{}).length]);var E=function(e){v(D.a.setSelectedChat(e))};return c.a.createElement(p.a,{in:!0},f===w.CARD?c.a.createElement(o.a,{className:t.paper},l&&c.a.createElement(n.a,{className:t.searchBar,position:"static",color:"default",elevation:0},c.a.createElement(m.a,null,c.a.createElement(r.a,{container:!0,spacing:2,alignItems:"center"},c.a.createElement(r.a,{item:!0},c.a.createElement(s.a,{className:t.block,color:"inherit"})),c.a.createElement(r.a,{item:!0,xs:!0},c.a.createElement(u.a,{fullWidth:!0,placeholder:"Search chat by room name or players",InputProps:{disableUnderline:!0,className:t.searchInput}}))))),c.a.createElement("div",{className:t.contentWrapper},c.a.createElement(S,{chats:h,onChatClick:E,selectedChat:g}))):c.a.createElement(S,{chats:h,onChatClick:E,selectedChat:g}))}))},276:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(58),r=a(101),o=a(181),i={getAllNeededPlayersUid:function(e){var t,a=(null===(t=r.a.selectedRoom(e))||void 0===t?void 0:t.players)||[],i=o.a.profilesUidFromSelectedChat(e)||[];return[].concat(Object(n.a)(i),Object(n.a)(a)).filter((function(e,t,a){return a.indexOf(e)===t}))},isGameMasterOfSelectedRoom:function(e){return(e.firestore.data.selectedRoom?e.firestore.data.selectedRoom.gameMaster.uid:"unknown")===e.firebase.profile.uid},getFormCreateRoom:function(e){return e.form.createRoom.values},isUserARoomPlayerOrGameMaster:function(e){var t,a;return!(!e.firestore.data.selectedRoom||!e.firebase.profile.uid)&&((null===(t=e.firestore.data.selectedRoom)||void 0===t?void 0:t.players.indexOf(e.firebase.profile.uid))>-1||(null===(a=e.firestore.data.selectedRoom)||void 0===a?void 0:a.gameMaster.uid)===e.firebase.profile.uid)}}},278:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(0),r=a.n(n),o=a(609),i=a(5);var c=r.a.memo(Object(i.a)((function(e){return Object(o.a)({root:{display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"flex-start",height:"100%",width:"100%",backgroundColor:e.palette.background.default,position:"absolute",zIndex:1e4,left:0,top:0},progress:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},svg:{width:"15vw",height:"15vh"}})}))((function(e){var t=e.classes,a=e.style;return r.a.createElement("div",{className:t.root,style:a},r.a.createElement("div",{className:t.progress},r.a.createElement("img",{className:t.svg,src:"".concat("/roll-a-dice","/assets/svg/loader-knot.svg"),alt:"Roll a Dice..."})))})))},279:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(268),r=a.n(n),o={timeStampToFormattedDate:function(e){return r()(new Date(new Date(+e))).format("dddd, MMMM D YYYY")},timeStampToDetailedTime:function(e){return r()(new Date(new Date(+e))).format("h:mm:ss")}}},280:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(55),r=a(201),o={matchChange:function(e){return Object(n.action)(r.a.MATCH_CHANGE,e)}}},281:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(55),r=a(56),o={setSelectedRoom:function(e){return Object(n.action)(r.a.SELECTED,e)},setDrawerOpenValue:function(e){return Object(n.action)(r.a.SET_DRAWER_OPEN_VALUE,e)},setChatOpenValue:function(e){return Object(n.action)(r.a.SET_CHAT_OPEN_VALUE,e)},setPlayersOpenValue:function(e){return Object(n.action)(r.a.SET_PLAYERS_OPEN_VALUE,e)},diceRolling:function(e){return Object(n.action)(r.a.SET_DICE_ROLLING,e)}}},282:function(e,t,a){"use strict";a.d(t,"c",(function(){return j})),a.d(t,"a",(function(){return y})),a.d(t,"b",(function(){return w}));var n=a(58),r=a(99),o=a(0),i=a.n(o),c=a(388),l=a(600),s=a(272),u=a(386),m=a(389),d=a(273),f=a(390),p=a(387),b=a(606),h=a(611),g=a(153),v=a(605),E=Object(v.a)((function(e){return{formField:{marginBottom:e.spacing(2)},sliderFormField:{width:"100%",marginLeft:0}}})),O=function(e){var t=e.touched,a=e.error;return t&&a?i.a.createElement(c.a,null,t&&a):void 0},j=i.a.memo((function(e){var t=E();return i.a.createElement(g.a,Object.assign({},e,{component:function(e){var t=e.label,a=e.input,n=e.meta,o=n.touched,c=n.invalid,s=n.error,u=Object(r.a)(e,["label","input","meta"]);return i.a.createElement(l.a,Object.assign({variant:"outlined",label:t,placeholder:t,error:o&&c,helperText:o&&s},a,u))},className:t.formField}))})),y=(i.a.memo((function(e){var t=E();return i.a.createElement(g.a,Object.assign({},e,{type:"checkbox",component:function(e){var t=e.input,a=(e.label,e.meta),n=a.touched,o=a.error,c=e.children,l=Object(r.a)(e,["input","label","meta","children"]);return i.a.createElement(s.a,{error:n&&o},i.a.createElement(u.a,{htmlFor:"age-native-simple"},"Age"),i.a.createElement(m.a,Object.assign({variant:"outlined",native:!0},t,l,{inputProps:{name:"age",id:"age-native-simple"}}),c),O({touched:n,error:o}))},className:t.formField}))})),i.a.memo((function(e){var t=E();return i.a.createElement(g.a,Object.assign({},e,{type:"checkbox",component:function(e){var t=e.input,a=e.label;return i.a.createElement(d.a,{control:i.a.createElement(f.a,{checked:!!t.value,onChange:t.onChange}),label:a})},className:t.formField}))})),i.a.memo((function(e){var t=E();return i.a.createElement(g.a,Object.assign({},e,{type:"checkbox",component:function(e){var t=e.input,a=e.meta,r=e.options,o=e.label,c=t.name,l=t.onChange,u=a.touched,m=a.error,h=t.value,g=r.map((function(e,t){var a=e.label,r=e.value,o=h.includes(r);return i.a.createElement(d.a,{key:t,control:i.a.createElement(f.a,{checked:o,onChange:function(e){var t=Object(n.a)(h);return e.target.checked?t.push(r):t.splice(t.indexOf(r),1),l(t)},name:"".concat(c,"[").concat(t,"]"),value:r}),label:a})}));return i.a.createElement(s.a,{error:u&&!!m,component:"fieldset"},i.a.createElement(p.a,{component:"legend"},o),i.a.createElement(b.a,{row:!0},g),O({touched:u,error:m}))},className:t.formField}))}))),w=i.a.memo((function(e){var t=E();function a(e){return"".concat(e)}return i.a.createElement(g.a,Object.assign({},e,{component:function(e){var n=e.min,o=void 0===n?0:n,c=e.max,l=void 0===c?16:c,s=e.label,u=e.input,m=u.value,f=u.onChange,p=Object(r.a)(u,["value","onChange"]),b=e.meta,g=(b.touched,b.invalid,b.error,Object(r.a)(e,["min","max","label","input","meta"]));return i.a.createElement(d.a,{className:t.sliderFormField,label:s,labelPlacement:"start",control:i.a.createElement(h.a,Object.assign({defaultValue:0,getAriaValueText:a,"aria-labelledby":"number-of-dices",valueLabelDisplay:"auto",step:1,marks:!0,min:o,max:l,value:"number"===typeof m?m:0,onChange:function(e,t){return f(t)}},p,g))})},className:t.formField}))}))},33:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n={isRequesting:function(e){return!Object.values(e.firestore.status.requesting).every((function(e){return!e}))},userProfile:function(e){return e.firebase.auth},authenticatingSelector:function(e){var t=e.firebase,a=t.auth,n=t.isInitializing;return!a.isLoaded||n},isAuthenticated:function(e){var t=e.firebase.auth;return!t.isEmpty&&!!t.uid},userConnected:function(e){return e.firebase.data.connected},applicationStats:function(e){return e.firebase.data.applicationStats}}},348:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=function(e){return e.split(" ").map((function(e){return e.charAt(0)})).join("").substring(0,2).toUpperCase()}},366:function(e,t,a){"use strict";var n,r=a(48),o=a(4),i=a(0),c=a.n(i),l=a(647),s=a(661),u=a(663),m=a(657),d=a(662),f=a(609),p=a(5),b=a(379),h=a(672),g=a(44),v=a(674),E=a(605),O=a(111),j=a(7),y=a(282),w=Object(E.a)((function(e){return{inputSlider:{width:"100%",marginLeft:e.spacing(0),paddingRight:e.spacing(2),minWidth:e.spacing(40)}}}));var S=c.a.memo(Object(v.a)({form:"diceSetForm",initialValues:(n={},Object(g.a)(n,j.a.D4,0),Object(g.a)(n,j.a.D6,0),Object(g.a)(n,j.a.D8,0),Object(g.a)(n,j.a.D10,0),Object(g.a)(n,j.a.D12,0),Object(g.a)(n,j.a.D20,0),Object(g.a)(n,j.a.D100,0),n)})((function(e){var t=e.diceType,a=w();return c.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},c.a.createElement("h2",null,"Set your dices!"),c.a.createElement("div",{className:a.inputSlider},null===t||void 0===t?void 0:t.map((function(e){return c.a.createElement(y.b,Object.assign({key:e},O.b[e]))}))))}))),D=a(598),R=a(653),T=a(130),x=a(649);function C(e){var t=e.throwResult;return c.a.createElement("article",null,c.a.createElement(T.a,{variant:"h5",component:"h2"},"Throw result:"),c.a.createElement(x.a,null,(null===t||void 0===t?void 0:t.result)?Object.keys(t.result).map((function(e){return c.a.createElement(D.a,{key:e},c.a.createElement(R.a,{container:!0,spacing:2},c.a.createElement(R.a,{item:!0},c.a.createElement(T.a,{variant:"h4",component:"span",color:"textSecondary"},e,":")),c.a.createElement(R.a,{item:!0},c.a.createElement(T.a,{variant:"h3",component:"span"},t.result[e].join(", ")))))})):""))}var A=a(119);a.d(t,"a",(function(){return k}));var k=Object(p.a)((function(e){return Object(f.a)({root:{display:"flex",backgroundColor:"#f4f4f2ef"},details:{display:"flex",flexDirection:"column"},content:{flex:"1 0 auto"},cover:{width:e.spacing(18)},playIcon:{height:38,width:38},clickable:{cursor:"pointer"}})}))((function(e){var t=e.classes,a=e.visible,n=void 0===a||a,f=e.room,p=new b.a,g=Object(i.useContext)(A.a),v=Object(i.useState)(null),E=Object(r.a)(v,2),O=E[0],j=E[1];return Object(i.useEffect)((function(){null===g||void 0===g||g.diceThrowDelayedWhen$.pipe(Object(h.a)(p)).subscribe((function(e){return j(e)}))}),[!!g]),Object(i.useEffect)((function(){return function(){return p.next()}}),[]),c.a.createElement(l.a,{in:n},c.a.createElement(s.a,{className:Object(o.a)(t.root,!!O&&t.clickable),onClick:function(){return j(null)}},c.a.createElement("div",{className:t.details},c.a.createElement(u.a,{className:t.content},c.a.createElement(m.a,{in:!O},c.a.createElement(S,{diceType:null===f||void 0===f?void 0:f.diceType})),c.a.createElement(m.a,{in:!!O},c.a.createElement(C,{throwResult:O})))),(null===f||void 0===f?void 0:f.gameMasterAvatar)&&c.a.createElement(d.a,{className:t.cover,image:null===f||void 0===f?void 0:f.gameMasterAvatar,title:"Bot avatar"})))}))},367:function(e,t,a){"use strict";var n=a(18),r=a(48),o=a(4),i=a(0),c=a.n(i),l=a(609),s=a(5),u=a(647),m=a(271),d={idCanvas:"canvas",idLabel:"label",idSet:"set",idSelectorDiv:"selector_div",idInfoDiv:"info_div",useTrueRandom:!1,useShadows:!0,whiteDice:!1,noresult:!1,diceThrow$:null,diceThrowResult$:null},f=a(119),p=a(678);a.d(t,"a",(function(){return b}));var b=Object(s.a)((function(e){return Object(l.a)({root:{width:"100%",height:"calc(100% - ".concat(e.spacing(2),"px)"),position:"relative"},diceCanvas:{width:"100%",height:"100%",cursor:"grab"},grabbing:{cursor:"grabbing"}})}))((function(e){var t=e.classes,a=e.visible,l=void 0===a||a,s=c.a.useRef(null),b=Object(i.useRef)(null),h=Object(i.useState)(!1),g=Object(r.a)(h,2),v=g[0],E=g[1],O=Object(i.useState)(!1),j=Object(r.a)(O,2),y=j[0],w=j[1],S=Object(i.useContext)(f.a),D=s.current&&s.current.getBoundingClientRect().width||0;Object(i.useEffect)((function(){S&&!v&&0!==D&&Object(p.a)(300).subscribe((function(){window.dice_initialize(b.current,Object(n.a)({},d,{diceThrow$:S.diceThrow$,diceBeforeThrow$:S.diceBeforeThrow$,diceAfterThrow$:S.diceAfterThrow$,requestNewThrow$:S.requestNewThrow$})),E(!0)}))}),[!!D,!!S]);var R=function(e){w(e)};return c.a.createElement(u.a,{in:l},c.a.createElement(m.a,{elevation:3,className:t.root},c.a.createElement("div",{id:"diceCanvasContainer",ref:b,className:Object(o.a)(t.diceCanvas,y&&t.grabbing),onMouseDown:function(){return R(!0)},onMouseUp:function(){return R(!1)}},c.a.createElement("div",{ref:s,id:"canvas"}))))}))},381:function(e){e.exports=JSON.parse('{"a":"1.0.0"}')},402:function(e,t,a){e.exports=a(594)},407:function(e,t,a){},558:function(e,t,a){},56:function(e,t,a){"use strict";var n;a.d(t,"a",(function(){return n})),function(e){e.SELECTED="@@rooms/SELECTED",e.SET_DRAWER_OPEN_VALUE="@@rooms/SET_DRAWER_OPEN_VALUE",e.SET_CHAT_OPEN_VALUE="@@rooms/SET_CHAT_OPEN_VALUE",e.SET_PLAYERS_OPEN_VALUE="@@rooms/SET_PLAYERS_OPEN_VALUE",e.SET_DICE_ROLLING="@@rooms/SET_DICE_ROLLING"}(n||(n={}))},57:function(e,t,a){"use strict";var n;a.d(t,"a",(function(){return n})),function(e){e.CHATS="chats",e.USERS="users",e.ROOMS="rooms"}(n||(n={}))},594:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(17),i=a.n(o),c=(a(407),a(654)),l=a(382),s=a(666),u=a(11),m=a(31),d=a(102),f=a(58),p=a(57),b=function(e){var t=e&&0!==(null===e||void 0===e?void 0:e.length)?e:"unknown";return{collection:p.a.CHATS,where:[["players","array-contains",t]],storeAs:"userChats"}},h=a(33),g={getProfilesByUid:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{collection:"users",where:[["uid","in",e]],storeAs:"usersProfiles"}},connected:{path:".info/connected",storeAs:"connected"}},v=function(e){return{collection:p.a.ROOMS,where:[["gameMaster.uid","==",e]],storeAs:"userRoomsAsGameMaster"}},E=function(e){return{collection:p.a.ROOMS,where:[["players","array-contains",e]],storeAs:"userRoomsAsPlayer"}},O=function(e){var t=e.length?e:"unknown";return{collection:p.a.ROOMS,doc:t,storeAs:"selectedRoom"}},j=a(63),y=a(276);function w(){var e=Object(m.useFirestore)(),t=Object(m.useFirebase)(),a=Object(u.useSelector)(h.a.userProfile),o=Object(u.useSelector)(j.a.selectedRoomUid),i=Object(f.a)(Object(u.useSelector)(y.a.getAllNeededPlayersUid)),c=Object(u.useSelector)(h.a.userConnected);function l(t){e.doc("".concat(p.a.USERS,"/").concat(a.uid)).update({connected:t})}return Object(n.useEffect)((function(){if(!0===c&&a.uid)return l(c),t.ref("".concat(p.a.USERS,"/").concat(a.uid)).onDisconnect().update({connected:!1}),function(){l(!1)}}),[c,a.uid]),Object(m.useFirebaseConnect)([g.connected]),Object(m.useFirestoreConnect)([g.getProfilesByUid(i.length?i:["unknown"]),b(a.uid),v(a.uid||"unknown"),E(a.uid||"unknown"),O(o||"unknown")]),r.a.createElement(r.a.Fragment,null)}function S(e){var t=Object(u.useSelector)(h.a.isAuthenticated);return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement(w,null),e.children)}var D=a(609),R=a(604),T=a(605),x=a(81),C=a(23),A=r.a.lazy((function(){return Promise.all([a.e(0),a.e(8)]).then(a.bind(null,781))})),k={path:[C.a.CHATS_PATH_ID,C.a.CHATS_PATH],component:A},N=a(48),P=a(4),_=a(667),I=a(665),L=a(130),M=a(5),U=a(603),F=a(668),H=a(651),$=a(653),W=a(676),B=a(595),G=a(370),z=a.n(G),V=a(652),Y=a(679),q=a(384),J=a(650);var X=Object(M.a)((function(e){return Object(D.a)({iconButtonAvatar:{padding:4},avatarSize:{border:"4px solid ".concat(e.palette.primary.main),width:e.spacing(6),height:e.spacing(6)}})}))((function(e){var t=Object(m.useFirebase)(),a=Object(x.f)(),n=Object(u.useSelector)(h.a.userProfile),o=Object(u.useSelector)(h.a.isAuthenticated),i=r.a.useState(null),c=Object(N.a)(i,2),l=c[0],s=c[1],d=e.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{color:"inherit",className:d.iconButtonAvatar,onClick:function(e){s(e.currentTarget)}},r.a.createElement(Y.a,{src:n.avatarUrl||n.photoURL,alt:n.displayName,className:d.avatarSize})),r.a.createElement(q.a,{id:"simple-menu",anchorEl:l,keepMounted:!0,open:Boolean(l),onClose:function(){return s(null)}},o?r.a.createElement(J.a,{onClick:function(){t.logout().then((function(){s(null),a.push(C.a.HOME_PATH)}))}},"Logout"):r.a.createElement(J.a,{onClick:function(){t.login({provider:"google",type:"popup"}).then((function(){s(null),a.push(C.a.ROOMS_PATH)})).catch((function(e){return alert(e.message)}))}},"Login with Google")))}));var K=r.a.memo(Object(M.a)((function(e){return Object(D.a)({ornament:{backgroundImage:"url(".concat("/roll-a-dice","/assets/svg/ornament-knot.svg)"),width:"100%",height:"100%",backgroundRepeatX:"repeat",backgroundRepeatY:"no-repeat",backgroundSize:"contain"},vartical:{backgroundImage:"url(".concat("/roll-a-dice","/assets/svg/ornament-knot-vartical.svg)"),backgroundRepeatX:"no-repeat",backgroundRepeatY:"repeat"}})}))((function(e){var t=e.classes,a=e.vartical;return r.a.createElement("div",{className:Object(P.a)(t.ornament,a&&t.vartical)})})));var Q=r.a.memo(Object(M.a)((function(e){return Object(D.a)({secondaryBar:{zIndex:0},menuButton:{marginLeft:-e.spacing(1)},link:{textDecoration:"none",color:"rgba(255, 255, 255, 0.7)","&:hover":{color:e.palette.common.white}},button:{borderColor:"rgba(255, 255, 255, 0.7)"},ornament:{bottom:"2px",height:"24px",opacity:.2,position:"absolute",zIndex:-1,width:" 100%"},avatar:{marginBottom:"-16px"}})}))((function(e){var t=e.classes,a=e.onDrawerToggle;return r.a.createElement(r.a.Fragment,null,r.a.createElement(H.a,{color:"primary",position:"sticky",elevation:2},r.a.createElement(V.a,null,r.a.createElement($.a,{container:!0,spacing:1,alignItems:"center"},r.a.createElement(W.a,{smUp:!0},r.a.createElement($.a,{item:!0},r.a.createElement(B.a,{color:"inherit","aria-label":"open drawer",onClick:a,className:t.menuButton},r.a.createElement(z.a,null)))),r.a.createElement($.a,{item:!0,xs:!0}),r.a.createElement($.a,{item:!0},r.a.createElement("div",{className:t.avatar},r.a.createElement(X,null))))),r.a.createElement("div",{className:t.ornament},r.a.createElement(K,null))))}))),Z=a(599),ee=a(278),te=r.a.memo(Object(M.a)((function(e){return Object(D.a)({container:{opacity:0,visibility:"hidden",transitionDelay:"1300ms",transition:"opacity 225ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"},visible:{opacity:1,visibility:"visible"}})}))((function(e){var t=e.children,a=e.isAuthenticating,n=void 0===a||a;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Z.a,{in:n},r.a.createElement(ee.a,null)),t)}))),ae=a(44),ne=a(99),re=a(374),oe=a.n(re),ie=a(664),ce=a(375),le=a.n(ce),se=a(372),ue=a.n(se),me=a(373),de=a.n(me),fe=a(649),pe=a(598),be=a(266),he=a(101),ge=a(154),ve=a(371),Ee=a.n(ve),Oe=a(659),je=a(656),ye=a(680),we=a(658),Se=a(660);var De=r.a.memo(Object(M.a)((function(e){return Object(D.a)({item:{paddingTop:1,paddingBottom:1,color:"rgba(255, 255, 255, 0.7)","&:hover,&:focus":{backgroundColor:"rgba(255, 255, 255, 0.08)"}},itemCategoryWrapper:{minHeight:"60px"},itemCategory:{width:"100%",paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},itemCategoryAbsolute:{position:"absolute",top:0},itemActiveItem:{color:e.palette.secondary.main},itemPrimary:{fontSize:"inherit"},itemIcon:{minWidth:"auto",marginRight:e.spacing(2)},expansionPanel:{borderRadius:"0 !important",padding:"0 !important",margin:"0 !important",backgroundColor:e.palette.background.secondary},expansionPanelSummary:{margin:"0 !important",padding:"0 16px 0px 0 !important"},expansionPanelSummaryContainer:{padding:"0 !important",margin:"0 !important"},expandIcon:{color:"rgba(255, 255, 255, 0.7)"},divider:{boxShadow:"0 -1px 0 #404854 inset"}})}))((function(e){var t=e.classes,a=e.children,n=e.icon,o=e.text,i=e.navLink,c=e.active,l=e.expandable,s=e.defaultExpanded,u=function(e){return i?r.a.createElement(d.b,{to:i},e):r.a.createElement(r.a.Fragment,null,e)};return l?r.a.createElement(ye.a,{className:Object(P.a)(t.expansionPanel,t.divider),defaultExpanded:s},r.a.createElement(we.a,{"aria-controls":"additional-actions1-content","aria-label":"Expand",classes:{content:t.expansionPanelSummaryContainer,expandIcon:t.expandIcon},className:t.expansionPanelSummary,expandIcon:r.a.createElement(Ee.a,null),id:"additional-actions1-header"},r.a.createElement("div",{className:t.itemCategoryWrapper}),u(r.a.createElement(pe.a,{button:!0,className:Object(P.a)(t.item,t.itemCategory,c&&t.itemActiveItem,t.itemCategoryAbsolute)},n&&r.a.createElement(Oe.a,{className:t.itemIcon},n),o&&r.a.createElement(je.a,{classes:{primary:t.itemPrimary}},o)))),a&&r.a.createElement(Se.a,null,a)):u(r.a.createElement(pe.a,{button:!0,className:Object(P.a)(t.item,t.itemCategory,c&&t.itemActiveItem,t.divider)},n&&r.a.createElement(Oe.a,{className:t.itemIcon},n),o&&r.a.createElement(je.a,{classes:{primary:t.itemPrimary}},o)))}))),Re=a(661),Te=a(662),xe=a(663);var Ce=Object(M.a)((function(e){return Object(D.a)({cards:{maxWidth:936,width:"100%"},media:{height:140}})}))((function(e){var t=e.classes,a=e.room;return r.a.createElement(Re.a,{className:t.cards},a.roomImage&&r.a.createElement(Te.a,{className:t.media,image:a.roomImage,title:"Room image"}),r.a.createElement(xe.a,null,r.a.createElement(L.a,{gutterBottom:!0,variant:"h5",component:"h2"},a.roomName),r.a.createElement(L.a,{gutterBottom:!0,variant:"h6",component:"h6"},a.campaignTitle),r.a.createElement(L.a,{variant:"body2",color:"textSecondary",component:"p"},a.description),r.a.createElement("p",null,r.a.createElement(L.a,{variant:"caption",color:"textSecondary",component:"span"},"Max players:")," ",r.a.createElement(L.a,{color:"textSecondary",variant:"h6",component:"span"},a.maxPlayers)),r.a.createElement("p",null,r.a.createElement(L.a,{variant:"caption",color:"textSecondary",component:"span"},"Room Game Master:"),r.a.createElement("br",null),r.a.createElement(L.a,{variant:"subtitle1",color:"textSecondary",component:"span"},a.gameMaster.displayName))))}));var Ae=Object(M.a)((function(e){return Object(D.a)({logo:{fontSize:24,color:e.palette.common.white,"&:hover,&:focus":{backgroundColor:"rgba(255, 255, 255, 0.08)"},backgroundColor:e.palette.background.secondary,boxShadow:"0 -1px 0 #404854 inset",paddingTop:e.spacing(2),paddingBottom:e.spacing(2)}})}))((function(e){var t=e.classes,a=Object(ne.a)(e,["classes"]),n=Object(u.useSelector)(ge.a.match).path,o=Object(u.useSelector)(he.a.selectedRoom),i=Object(u.useSelector)(j.a.drawerOpened);return r.a.createElement(ie.a,Object.assign({open:i,variant:n===C.a.ROOMS_PATH_ID?"persistent":"permanent"},a),r.a.createElement(fe.a,{disablePadding:!0},r.a.createElement(pe.a,{className:t.logo},"Roll a Dice...")),r.a.createElement(De,{navLink:C.a.HOME_PATH,icon:r.a.createElement(ue.a,null),text:"HomePage Page",active:C.a.HOME_PATH===n}),r.a.createElement(De,{navLink:C.a.ROOMS_PATH,icon:r.a.createElement(de.a,null),text:"Rooms",expandable:-1===n.indexOf(C.a.ROOMS_PATH),active:n.indexOf(C.a.ROOMS_PATH)>-1},r.a.createElement(r.a.Fragment,null,"List here")),r.a.createElement(De,{navLink:C.a.CHATS_PATH,icon:r.a.createElement(oe.a,null),text:"Chats",expandable:-1===n.indexOf(C.a.CHATS_PATH),active:n.indexOf(C.a.CHATS_PATH)>-1},r.a.createElement(be.a,{viewType:be.b.EMBEDDED})),o&&r.a.createElement(De,{icon:r.a.createElement(le.a,null),text:"Room Ditails",expandable:!0,active:n.indexOf(C.a.ROOM_PATH)>-1,defaultExpanded:!0},r.a.createElement(Ce,{room:o})))})),ke=a(18);var Ne=function(){var e=Object(l.a)({palette:{primary:{light:"#afaf4c",main:"#9b9c20",dark:"#6c6d16"},secondary:{light:"#cba234",main:"#be8b02",dark:"#856101"},background:{default:"#e0e0d3",paper:"#f4f4f2",secondary:"#111b0e"}},typography:{fontFamily:["ringbearermedium","-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),h5:{fontWeight:500,fontSize:26,letterSpacing:.5}},shape:{borderRadius:8},props:{MuiTab:{disableRipple:!0}},mixins:{toolbar:{minHeight:48}}});return e=Object(ke.a)({},e,{overrides:{MuiDrawer:{paper:{backgroundColor:"#121b0f"}},MuiButton:{label:{textTransform:"none"},contained:{boxShadow:"none","&:active":{boxShadow:"none"}}},MuiTabs:{root:{marginLeft:e.spacing(1)},indicator:{height:3,borderTopLeftRadius:3,borderTopRightRadius:3}},MuiTab:{root:Object(ae.a)({textTransform:"none",margin:"0 16px",minWidth:0,padding:0},e.breakpoints.up("md"),{padding:0,minWidth:0})},MuiIconButton:{root:{padding:e.spacing(1)}},MuiTooltip:{tooltip:{borderRadius:4}},MuiDivider:{root:{backgroundColor:"#404854"}},MuiListItemText:{primary:{fontWeight:e.typography.fontWeightMedium}},MuiListItemIcon:{root:{color:"inherit",marginRight:0,"& svg":{fontSize:20}}},MuiAvatar:{root:{width:32,height:32}}}})}(),Pe=(Object(ke.a)({},Ne,{palette:Object(ke.a)({},Ne.palette,{type:"dark"})}),Object(ke.a)({},Ne,{palette:Object(ke.a)({},Ne.palette,{type:"dark"})}),Object(D.a)({drawer:Object(ae.a)({},Ne.breakpoints.up("sm"),{flexShrink:0,width:"100%",maxWidth:320,transition:"max-width 225ms cubic-bezier(0, 0, 0.2, 1) 0ms"})}));var _e=Object(M.a)(Pe)((function(e){var t=e.classes,a=e.mobileOpen,n=Object(u.useSelector)(j.a.drawerOpened);return r.a.createElement("nav",{className:t.drawer,style:{maxWidth:n?320:0}},r.a.createElement(W.a,{smUp:!0,implementation:"js"},r.a.createElement(Ae,{PaperProps:{style:{width:320}},variant:"temporary",open:a,onClose:e.handleDrawerToggle})),r.a.createElement(W.a,{xsDown:!0,implementation:"css"},r.a.createElement(Ae,{PaperProps:{style:{width:320}}})))})),Ie=function(e){return e.ui.isPending};function Le(){return r.a.createElement(L.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(I.a,{color:"inherit",href:"mailto:markky21@gmail.com"},"Marcin Mirecki")," ",(new Date).getFullYear(),".")}var Me=Object(D.a)({root:{display:"flex",minHeight:"100vh"},lineLoader:{position:"fixed",height:Ne.spacing(.75),top:0,left:0,width:"100%",zIndex:1e4,transition:"max-height 0.2s ease;"},app:{flex:1,display:"flex",flexDirection:"column",maxWidth:"100vw",overflow:"hidden"},appWhenAuth:{maxWidth:"calc(100vw - ".concat(Ne.spacing(40),")")},main:{flex:1,padding:Ne.spacing(6,4),background:Ne.palette.background.default},footer:{padding:Ne.spacing(1),background:Ne.palette.background.default}});var Ue=Object(M.a)(Me)((function(e){var t=e.classes,a=e.children,n=r.a.useState(!1),o=Object(N.a)(n,2),i=o[0],c=o[1],l=Object(u.useSelector)(h.a.isAuthenticated),m=Object(u.useSelector)(h.a.authenticatingSelector),d=Object(u.useSelector)(h.a.isRequesting),f=Object(u.useSelector)(Ie),p=function(){c(!i)};return r.a.createElement(s.a,{theme:Ne},r.a.createElement(te,{isAuthenticating:m},r.a.createElement("div",{className:t.root},r.a.createElement(_.a,null),r.a.createElement(U.a,{in:d||f,direction:"down"},r.a.createElement(F.a,{className:t.lineLoader,color:"secondary"})),l&&r.a.createElement(_e,{mobileOpen:i,handleDrawerToggle:p}),r.a.createElement("div",{className:Object(P.a)(t.app,l&&t.appWhenAuth)},r.a.createElement(Q,{onDrawerToggle:p}),r.a.createElement("main",{className:t.main},a),r.a.createElement("footer",{className:t.footer},r.a.createElement(Le,null))))))})),Fe=(a(558),a(647)),He=a(271);var $e=Object(M.a)((function(e){return Object(D.a)({root:{width:"100%"},paper:{padding:e.spacing(2,4),height:"100%"},label:{textAlign:"center"},value:{lineHeight:"70%",textAlign:"center"}})}))((function(e){var t=e.classes,a=Object(u.useSelector)(h.a.applicationStats),n=[{label:"Players:",value:(null===a||void 0===a?void 0:a.players)||0},{label:"Rooms created:",value:(null===a||void 0===a?void 0:a.rooms)||0},{label:"Dice throws:",value:(null===a||void 0===a?void 0:a.diceThrows)||0}];return r.a.createElement($.a,{container:!0,direction:"row",justify:"space-between",alignItems:"stretch",spacing:4,className:t.root},n.map((function(e,a){return r.a.createElement(Fe.a,{key:e.label,in:!0,timeout:300*a+300},r.a.createElement($.a,{item:!0,xs:4},r.a.createElement(He.a,{className:t.paper},r.a.createElement(L.a,{component:"h5",variant:"h5",color:"textSecondary",className:t.label},e.label),r.a.createElement(L.a,{component:"div",variant:"h1",className:t.value},e.value))))})))})),We=a(7),Be=a(367),Ge=a(366),ze=a(119),Ve=a(678),Ye=Object(T.a)((function(e){return{root:{position:"relative",margin:e.spacing(-4,-2),height:"calc(100% + ".concat(e.spacing(10),"px)")},cssGrid:{display:"grid",gridTemplateColumns:"1fr",gridTemplateRows:"auto 1fr",rowGap:"".concat(e.spacing(2),"px"),columnGap:"".concat(e.spacing(2),"px")},cssItem1:{gridColumn:1,gridRow:1},cssItem2:{gridColumn:1,gridRow:2},mainInfoCard:{},diceCard:{},diceDashboard:{position:"fixed",zIndex:1e3,bottom:e.spacing(8),right:e.spacing(3)}}})),qe={diceType:[We.a.D4,We.a.D6,We.a.D8,We.a.D10,We.a.D12,We.a.D20,We.a.D100],gameMasterAvatar:"".concat("/roll-a-dice","/assets/images/avatar-1.jpg")};function Je(e){var t=Ye(),a=Object(u.useSelector)(j.a.diceRolling),o=Object(n.useState)(!1),i=Object(N.a)(o,2),c=i[0],l=i[1];return Object(n.useEffect)((function(){Object(Ve.a)(300).subscribe((function(){return l(!0)}))}),[]),r.a.createElement("div",{className:Object(P.a)(t.root,t.cssGrid)},r.a.createElement("section",{className:Object(P.a)(t.mainInfoCard,t.cssGrid)},r.a.createElement($e,null)),r.a.createElement(ze.b,null,r.a.createElement("nav",{className:t.diceDashboard},r.a.createElement(Ge.a,{visible:!a,room:qe})),r.a.createElement("section",{className:t.diceCard},c&&r.a.createElement(Be.a,null))))}var Xe=a(280),Ke={applicationStats:{path:"applicationStats",storeAs:"applicationStats"}};var Qe={path:"/",component:function(e){var t=e.match,a=Object(u.useDispatch)(),o=Object(u.useSelector)(ge.a.match);return Object(m.useFirebaseConnect)([Ke.applicationStats]),Object(n.useEffect)((function(){JSON.stringify(t)!==JSON.stringify(o)&&a(Xe.a.matchChange(t))})),r.a.createElement(Je,null)}},Ze=r.a.lazy((function(){return Promise.all([a.e(0),a.e(1),a.e(5),a.e(7)]).then(a.bind(null,777))})),et={path:[C.a.ROOMS_PATH_ID],component:Ze},tt=r.a.lazy((function(){return Promise.all([a.e(0),a.e(1),a.e(9)]).then(a.bind(null,779))})),at={path:[C.a.ROOM_CREATE_PATH,C.a.ROOMS_PATH],component:tt},nt=Object(T.a)((function(e){return Object(D.a)({backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}})}));function rt(){var e=nt();return r.a.createElement(Ue,null,r.a.createElement(n.Suspense,{fallback:r.a.createElement(R.a,{className:e.backdrop,open:!0})},r.a.createElement(x.c,null,r.a.createElement(x.a,{exact:!0,path:Qe.path,component:Qe.component}),[at,et,k].map((function(e,t){return r.a.createElement(x.a,Object.assign({key:"Route-".concat(t)},e))})))))}var ot=a(122),it=a.n(ot),ct=(a(587),a(589),a(591),a(200)),lt=a(126),st={firebase:it.a,config:{userProfile:"users",useFirestoreForProfile:!0},dispatch:lt.a.dispatch,createFirestoreInstance:ct.createFirestoreInstance};function ut(e){var t=Object(c.a)("(prefers-color-scheme: dark)"),a=r.a.useMemo((function(){return Object(l.a)({palette:{type:t?"dark":"light"}})}),[t]);return window.theme=a,r.a.createElement(u.Provider,{store:lt.a},r.a.createElement(m.ReactReduxFirebaseProvider,st,r.a.createElement(s.a,{theme:a},r.a.createElement(S,null,r.a.createElement(d.a,null,r.a.createElement(rt,null))))))}Object(ot.initializeApp)({apiKey:"AIzaSyA0bXhCXcLJC9FGk3ynZoJP5KJ6CY3sqYY",authDomain:"roll-a-dice-4cba1.firebaseapp.com",databaseURL:"https://roll-a-dice-4cba1.firebaseio.com",projectId:"roll-a-dice-4cba1",storageBucket:"roll-a-dice-4cba1.appspot.com",messagingSenderId:"768622256477",appId:"1:768622256477:web:51a5c9f0ef4030d366c8b4",measurementId:"G-J2M3QQ0M89"}),Object(ot.firestore)();Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var mt=a(381);window.version=mt.a,window.env="local",i.a.render(r.a.createElement(ut,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},63:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n={selectedRoomUid:function(e){return e.rooms.selectedRoom||null},drawerOpened:function(e){return e.rooms.drawerOpened},chatOpened:function(e){return e.rooms.chatOpened},playersOpened:function(e){return e.rooms.playersOpened},diceRolling:function(e){return e.rooms.diceRolling}}},7:function(e,t,a){"use strict";var n;a.d(t,"a",(function(){return n})),function(e){e.D4="d4",e.D6="d6",e.D8="d8",e.D10="d10",e.D12="d12",e.D20="d20",e.D100="d100"}(n||(n={}))}},[[402,3,4]]]);
//# sourceMappingURL=main.7ee116e5.chunk.js.map