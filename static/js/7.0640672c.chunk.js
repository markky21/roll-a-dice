(this["webpackJsonproll-a-dice"]=this["webpackJsonproll-a-dice"]||[]).push([[7],{701:function(e,a,t){"use strict";t.d(a,"a",(function(){return d}));var n=t(702),r=t.n(n),c=t(707),o=t(57),i=t(30),l=t(38),s=t(286),m=r()({}),u=Object(o.a)(),d=Object(c.connectedRouterRedirect)({redirectPath:i.a.HOME_PATH,AuthenticatingComponent:s.a,wrapperDisplayName:"UserIsAuthenticated",authenticatedSelector:l.a.isAuthenticated,authenticatingSelector:l.a.authenticatingSelector,redirectAction:function(e){return function(a){u.push(e),a({type:"UNAUTHED_REDIRECT",payload:{message:"User is not authenticated."}})}}});Object(c.connectedRouterRedirect)({AuthenticatingComponent:s.a,wrapperDisplayName:"UserIsNotAuthenticated",allowRedirectBack:!1,authenticatedSelector:function(e){return e.firebase.auth.isEmpty},authenticatingSelector:function(e){var a=e.firebase,t=a.auth,n=a.isInitializing;return!t.isLoaded||n},redirectPath:function(e,a){return m.getRedirectQueryParam(a)||i.a.ROOMS_PATH},redirectAction:function(e){return function(a){u.push(e),a({type:"AUTHED_REDIRECT",payload:{message:"User is not authenticated."}})}}})},704:function(e,a,t){"use strict";t.d(a,"a",(function(){return s}));var n=t(0),r=t.n(n),c=t(25),o=t(669),i=t(784),l=t(785);var s=r.a.memo((function(e){var a=e.open,t=e.onClose,n=e.children,s=void 0===n?[]:n,m=e.title,u=Object(c.a)(),d=Object(o.a)(u.breakpoints.down("xs"));return r.a.createElement(i.a,{fullScreen:d,open:a,onClose:t,"aria-labelledby":"responsive-dialog-title"},r.a.createElement(l.a,null,m),s)}))},705:function(e,a,t){"use strict";t.d(a,"a",(function(){return u}));var n=t(0),r=t.n(n),c=t(401),o=t(672),i=t(677),l=t(398),s=Object(c.a)({image:{width:"100%",height:"25vh",backgroundPosition:"top",backgroundSize:"cover"}}),m=Object(l.a)(s);var u=r.a.memo((function(e){var a=e.src,t=void 0===a?"":a,n=e.title,c=m();return r.a.createElement(o.a,{in:t.length>8},t&&r.a.createElement(i.a,{className:c.image,image:t,title:n}))}))},710:function(e,a,t){"use strict";var n=t(0),r=t.n(n),c=t(786),o=t(787),i=t(788),l=t(691),s=t(12),m=t(111),u=t(287),d=t(705),b=t(283);var p=Object(l.a)({form:"createRoom",validate:function(e){var a={};return[m.b.roomName.name,m.b.maxPlayers.name].forEach((function(t){e[t]||(a[t]="Required")})),Object.keys(m.b).forEach((function(t){var n;m.b[t].maxLength&&(null===(n=e[m.b[t].name])||void 0===n?void 0:n.length)>m.b[t].maxLength&&(a[t]="Max length ".concat(m.b[t].maxLength," exceeded"))})),e[m.b.diceType.name]&&e[m.b.diceType.name].length||(a[m.b.diceType.name]="Select at least one dice"),a}})((function(e){var a=e.handleSubmit,t=e.pristine,n=e.submitting,l=e.onClose,p=e.invalid,h=Object(s.useSelector)(b.a.getFormCreateRoom);return r.a.createElement("form",{onSubmit:a},r.a.createElement(d.a,{src:null===h||void 0===h?void 0:h.roomImage,title:"Room image"}),r.a.createElement(c.a,{dividers:!0},r.a.createElement(u.c,m.b.roomName),r.a.createElement(u.c,m.b.roomImage),r.a.createElement(u.c,m.b.campaignTitle),r.a.createElement(u.c,m.b.description),r.a.createElement(u.c,m.b.gameMasterAvatar),r.a.createElement("div",{style:{width:"50%"}},r.a.createElement(u.c,m.b.maxPlayers)),r.a.createElement(u.a,m.b.diceType)),r.a.createElement(o.a,null,r.a.createElement(i.a,{type:"submit",color:"primary",disabled:p||t||n},"Submit"),r.a.createElement(i.a,{type:"button",onClick:l,color:"primary"},"Cancel")))})),h=t(704);t.d(a,"a",(function(){return f}));var f=r.a.memo((function(e){var a=e.open,t=e.onClose,n=e.onSubmit,c=e.initialValues;return r.a.createElement(h.a,{open:a,onClose:t,title:"Create new room"},r.a.createElement(p,{onClose:t,onSubmit:n,initialValues:c}))}))},795:function(e,a,t){"use strict";t.r(a);var n=t(27),r=t(84),c=t(709),o=t(701),i=Object(n.d)(Object(c.a)("EnhancedRoomList"),r.g,o.a),l=t(0),s=t.n(l),m=t(662),u=t(676),d=t(677),b=t(678),p=t(138),h=t(1),f=t(3),E=(t(2),t(4)),g=t(5),O=l.forwardRef((function(e,a){var t=e.disableSpacing,n=void 0!==t&&t,r=e.classes,c=e.className,o=Object(f.a)(e,["disableSpacing","classes","className"]);return l.createElement("div",Object(h.a)({className:Object(E.a)(r.root,c,!n&&r.spacing),ref:a},o))})),v=Object(g.a)({root:{display:"flex",alignItems:"center",padding:8},spacing:{"& > :not(:first-child)":{marginLeft:8}}},{name:"MuiCardActions"})(O),y=t(788),j=t(398),R=t(110),S=t(12),A=t(88),N=t(288),C=t(162),w=t(10),k=t(17),P=t(36),x=t(35),T=t(38),M=t(60),U=t(710),I=t(30),_=t(91);function H(){var e=Object(S.useSelector)(C.a.match).path,a=s.a.useState(!1),t=Object(P.a)(a,2),n=t[0],c=t[1],o=Object(r.f)(),i=Object(x.useFirestore)(),m=Object(S.useSelector)(T.a.userProfile),u=Object(l.useContext)(_.b);return Object(l.useEffect)((function(){e===I.a.ROOM_CREATE_PATH&&c(!0)}),[e]),s.a.createElement(U.a,{open:n,onClose:function(){c(!1),o.push(I.a.ROOMS_PATH)},onSubmit:function(e){(function(e){var a=Object(k.a)({createdAt:Date.now().toString(),gameMasterUid:m.uid,logs:[],playersUid:[],players:Object(w.a)({},m.uid,{uid:m.uid,avatarUrl:m.avatarUrl||m.photoURL,displayName:m.displayName,email:m.email,photoURL:m.photoURL||m.avatarUrl,gameMaster:!0})},e);return i.collection(M.a.ROOMS).add(a).then((function(e){c(!1),o.push("".concat(I.a.ROOM_PATH,"/").concat(e.id))}))})(e).catch((function(e){u.setSnackbarConfig({type:_.a.ERROR,open:!0,text:"Upss.. there was an error creating the room"})}))}})}var D=t(666),L=t(668),B=t(278),G=t(356),F=t.n(G),z=t(613),J=t(667),W=t(401),V=t(611),q=t(670),Q=t(695),Y=t(671),K=t(664),X=t(760),Z=t(355),$=t(285);var ee=s.a.memo(Object(g.a)((function(e){return Object(W.a)({root:{width:"100%",backgroundColor:e.palette.background.paper,height:"20vh",overflowY:"scroll"},item:{cursor:"pointer"},divider:{backgroundColor:"rgba(0, 0, 0, 0.12)"}})}))((function(e){var a=e.classes,t=e.roomsAsGameMaster,n=e.roomsAsPlayer,r=e.onRoomClick,c=e.selectedRoom,o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return Object.keys(e).map((function(n,o){return s.a.createElement(m.a,{key:n,in:!0,timeout:1e3*o+t},s.a.createElement(V.a,{onClick:function(){return r(n)},selected:n===c,className:a.item,button:!0,dense:!0,alignItems:"flex-start"},s.a.createElement(q.a,null,s.a.createElement(Q.a,null,Object(Z.a)(e[n].roomName||"No name"))),s.a.createElement(Y.a,{primary:e[n].roomName||"No name",secondary:$.a.timeStampToFormattedDate(e[n].createdAt)})))}))};return s.a.createElement(K.a,{className:a.root},o(t),s.a.createElement(m.a,{in:!!Object.keys(t).length,timeout:1e3*Object.keys(t).length+300},s.a.createElement(X.a,{className:a.divider})),o(n,1e3*Object.keys(t).length+300))})));var ae=Object(g.a)((function(e){return Object(W.a)({paper:{margin:"auto",overflow:"hidden"},searchBar:{borderBottom:"1px solid rgba(0, 0, 0, 0.12)"},searchInput:{fontSize:e.typography.fontSize},block:{display:"block"},contentWrapper:{margin:"16px 16px"}})}))((function(e){var a=e.classes,t=e.roomsAsGameMaster,n=e.roomsAsPlayer,c=e.showSearchBar,o=e.selectedRoom,i=e.label,l=Object(r.f)();return s.a.createElement(m.a,{in:!0},s.a.createElement(B.a,{className:a.paper},c&&s.a.createElement(D.a,{className:a.searchBar,position:"static",color:"default",elevation:0},s.a.createElement(J.a,null,s.a.createElement(L.a,{container:!0,spacing:2,alignItems:"center"},s.a.createElement(L.a,{item:!0},s.a.createElement(F.a,{className:a.block,color:"inherit"})),s.a.createElement(L.a,{item:!0,xs:!0},s.a.createElement(z.a,{fullWidth:!0,placeholder:i,InputProps:{disableUnderline:!0,className:a.searchInput}}))))),s.a.createElement("div",{className:a.contentWrapper},s.a.createElement(ee,{roomsAsGameMaster:t,roomsAsPlayer:n,onRoomClick:function(e){return l.push("".concat(I.a.ROOM_PATH,"/").concat(e))},selectedRoom:o}))))})),te=Object(j.a)((function(e){return{cards:{marginBottom:"16px",maxWidth:936},media:{height:140}}}));a.default=i((function(e){var a=te(),t=e.match,n=Object(S.useDispatch)(),r=Object(S.useSelector)(C.a.match),c=Object(S.useSelector)(A.a.userRoomsAsGameMaster)||{},o=Object(S.useSelector)(A.a.userRoomsAsPlayer)||{};return Object(l.useEffect)((function(){JSON.stringify(t)!==JSON.stringify(r)&&n(N.a.matchChange(t))})),s.a.createElement(s.a.Fragment,null,s.a.createElement("section",{className:a.cards},s.a.createElement(m.a,{in:!0},s.a.createElement(u.a,null,s.a.createElement(d.a,{className:a.media,image:"".concat("/roll-a-dice","/assets/images/fantasy-wallpapers.jpg"),title:"Fantasy RPG"}),s.a.createElement(b.a,null,s.a.createElement(p.a,{gutterBottom:!0,variant:"h5",component:"h2"},"Enter to the new world"),s.a.createElement(p.a,{variant:"body2",color:"textSecondary",component:"p"},"Create a new game room to start a new adventure with your friends!")),s.a.createElement(v,null,s.a.createElement(R.b,{to:I.a.ROOM_CREATE_PATH},s.a.createElement(y.a,{variant:"contained",color:"primary"},"Create new Room")))))),s.a.createElement("section",{className:a.cards},s.a.createElement(ae,{roomsAsGameMaster:c,roomsAsPlayer:o,selectedRoom:null,showSearchBar:!0,label:"Search room by name"})),s.a.createElement(H,null))}))}}]);
//# sourceMappingURL=7.0640672c.chunk.js.map