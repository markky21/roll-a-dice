(this["webpackJsonproll-a-dice"]=this["webpackJsonproll-a-dice"]||[]).push([[7],{620:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n=a(621),r=a.n(n),c=a(625),i=a(37),o=a(15),l=a(33),s=a(228),u=r()({}),d=Object(i.a)(),m=Object(c.connectedRouterRedirect)({redirectPath:o.a.HOME_PATH,AuthenticatingComponent:s.a,wrapperDisplayName:"UserIsAuthenticated",authenticatedSelector:l.a.authenticatedSelector,authenticatingSelector:l.a.authenticatingSelector,redirectAction:function(e){return function(t){d.push(e),t({type:"UNAUTHED_REDIRECT",payload:{message:"User is not authenticated."}})}}});Object(c.connectedRouterRedirect)({AuthenticatingComponent:s.a,wrapperDisplayName:"UserIsNotAuthenticated",allowRedirectBack:!1,authenticatedSelector:function(e){return e.firebase.auth.isEmpty},authenticatingSelector:function(e){var t=e.firebase,a=t.auth,n=t.isInitializing;return!a.isLoaded||n},redirectPath:function(e,t){return u.getRedirectQueryParam(t)||o.a.ROOMS_PATH},redirectAction:function(e){return function(t){d.push(e),t({type:"AUTHED_REDIRECT",payload:{message:"User is not authenticated."}})}}})},622:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return c}));var n,r=a(623);!function(e){e.DICE_ROLL="DICE_ROLL"}(n||(n={}));var c={roomName:{name:"roomName",label:"Name of the Room",fullWidth:!0},diceType:{name:"diceType",label:"Allowed dice",options:[{label:r.a.D4,value:r.a.D4},{label:r.a.D6,value:r.a.D6},{label:r.a.D8,value:r.a.D8},{label:r.a.D10,value:r.a.D10},{label:r.a.D12,value:r.a.D12},{label:r.a.D20,value:r.a.D20},{label:r.a.D100,value:r.a.D100}]},description:{name:"description",label:"Room description",multiline:!0,fullWidth:!0},d4:{name:r.a.D4,label:r.a.D4},d6:{label:r.a.D6,name:r.a.D6},d8:{label:r.a.D8,name:r.a.D8},d10:{label:r.a.D10,name:r.a.D10},d12:{label:r.a.D12,name:r.a.D12},d20:{label:r.a.D20,name:r.a.D20},d100:{label:r.a.D100,name:r.a.D100}};r.a.D4,r.a.D4,r.a.D6,r.a.D6,r.a.D8,r.a.D8,r.a.D10,r.a.D10,r.a.D12,r.a.D12,r.a.D20,r.a.D20,r.a.D100,r.a.D100},623:function(e,t,a){"use strict";var n;a.d(t,"a",(function(){return n})),function(e){e.D4="d4",e.D6="d6",e.D8="d8",e.D10="d10",e.D12="d12",e.D20="d20",e.D100="d100"}(n||(n={}))},627:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(0),r=a.n(n).a.lazy((function(){return a.e(9).then(a.bind(null,650))}))},632:function(e,t,a){"use strict";a.d(t,"c",(function(){return E})),a.d(t,"a",(function(){return D})),a.d(t,"b",(function(){return y}));var n=a(99),r=a(230),c=a(0),i=a.n(c),o=a(543),l=a(598),s=a(540),u=a(541),d=a(548),m=a(711),f=a(725),b=a(542),p=a(712),h=a(729),v=a(722),O=a(611),g=Object(O.a)((function(e){return{formField:{marginBottom:e.spacing(2)},sliderFormField:{width:"100%",marginLeft:0}}})),j=function(e){var t=e.touched,a=e.error;return t&&a?i.a.createElement(o.a,null,t&&a):void 0},E=i.a.memo((function(e){var t=g();return i.a.createElement(v.a,Object.assign({},e,{component:function(e){var t=e.label,a=e.input,n=e.meta,c=n.touched,o=n.invalid,s=n.error,u=Object(r.a)(e,["label","input","meta"]);return i.a.createElement(l.a,Object.assign({variant:"outlined",label:t,placeholder:t,error:c&&o,helperText:c&&s},a,u))},className:t.formField}))})),D=(i.a.memo((function(e){var t=g();return i.a.createElement(v.a,Object.assign({},e,{type:"checkbox",component:function(e){var t=e.input,a=(e.label,e.meta),n=a.touched,c=a.error,o=e.children,l=Object(r.a)(e,["input","label","meta","children"]);return i.a.createElement(s.a,{error:n&&c},i.a.createElement(u.a,{htmlFor:"age-native-simple"},"Age"),i.a.createElement(d.a,Object.assign({variant:"outlined",native:!0},t,l,{inputProps:{name:"age",id:"age-native-simple"}}),o),j({touched:n,error:c}))},className:t.formField}))})),i.a.memo((function(e){var t=g();return i.a.createElement(v.a,Object.assign({},e,{type:"checkbox",component:function(e){var t=e.input,a=e.label;return i.a.createElement(m.a,{control:i.a.createElement(f.a,{checked:!!t.value,onChange:t.onChange}),label:a})},className:t.formField}))})),i.a.memo((function(e){var t=g();return i.a.createElement(v.a,Object.assign({},e,{type:"checkbox",component:function(e){var t=e.input,a=e.meta,r=e.options,c=e.label,o=t.name,l=t.onChange,u=a.touched,d=a.error,h=t.value,v=r.map((function(e,t){var a=e.label,r=e.value,c=h.includes(r);return i.a.createElement(m.a,{key:t,control:i.a.createElement(f.a,{checked:c,onChange:function(e){var t=Object(n.a)(h);return e.target.checked?t.push(r):t.splice(t.indexOf(r),1),l(t)},name:"".concat(o,"[").concat(t,"]"),value:r}),label:a})}));return i.a.createElement(s.a,{error:u&&!!d,component:"fieldset"},i.a.createElement(b.a,{component:"legend"},c),i.a.createElement(p.a,{row:!0},v),j({touched:u,error:d}))},className:t.formField}))}))),y=i.a.memo((function(e){var t=g();function a(e){return"".concat(e)}return i.a.createElement(v.a,Object.assign({},e,{component:function(e){var n=e.min,c=void 0===n?0:n,o=e.max,l=void 0===o?16:o,s=e.label,u=e.input,d=u.value,f=u.onChange,b=Object(r.a)(u,["value","onChange"]),p=e.meta,v=(p.touched,p.invalid,p.error,Object(r.a)(e,["min","max","label","input","meta"]));return i.a.createElement(m.a,{className:t.sliderFormField,label:s,labelPlacement:"start",control:i.a.createElement(h.a,Object.assign({defaultValue:0,getAriaValueText:a,"aria-labelledby":"number-of-dices",valueLabelDisplay:"auto",step:1,marks:!0,min:c,max:l,value:"number"===typeof d?d:0,onChange:function(e,t){return f(t)}},b,v))})},className:t.formField}))}))},719:function(e,t,a){"use strict";a.r(t);var n=a(48),r=a(58),c=a(635),i=a(620),o=Object(n.d)(Object(c.a)("EnhancedRoomList"),r.g,i.a),l=a(99),s=a(3),u=a(0),d=a.n(u),m=a(611),f=a(11),b=a(25),p=a(162),h=a(627),v=a(18),O=a(118),g=a(549),j=a(5),E=a(223),D={idCanvas:"canvas",idLabel:"label",idSet:"set",idSelectorDiv:"selector_div",idInfoDiv:"info_div",useTrueRandom:!1,useShadows:!0,whiteDice:!1,noresult:!1,diceThrow$:null,diceThrowResult$:null},y=a(230),w=a(638),S=a(639),R=a(678),k=a(721),N=(a(114),a(704)),T=a(702),C=a(705),$=a(701),x=a(703),L=a(151),U=a(96),_=function(e){return Object(L.action)(U.a.SELECTED,e)},I=function(e){return Object(L.action)(U.a.SET_DRAWER_OPEN_VALUE,e)},A=function(e){return Object(L.action)(U.a.SET_CHAT_OPEN_VALUE,e)},F=function(e){return Object(L.action)(U.a.SET_PLAYERS_OPEN_VALUE,e)},P=function(e){return Object(L.action)(U.a.SET_DICE_ROLLING,e)},B=a(49),G=a(622),H=a(152),M=function(){function e(){var t=this;Object(w.a)(this,e),this.store=H.a,this.takeUntil$=new R.a,this._store$=new k.a(1),this._storeUnsubscribeFn=void 0,this._storeUnsubscribeFn=this.store.subscribe((function(){t._store$.next(t.store.getState())}))}return Object(S.a)(e,[{key:"getDiceSetForm",value:function(){return this.store$.pipe(Object($.a)((function(e){return e.form.diceSetForm})))}},{key:"getSelectedRoomData$",value:function(){return this.store$.pipe(Object($.a)((function(e){return e.firestore.data.selectedRoom})),Object(T.a)((function(e){return!!e})))}},{key:"getSelectedRoomDataLogs$",value:function(){return this.getSelectedRoomData$().pipe(Object($.a)((function(e){return e.logs})))}},{key:"getLastRoomLogOnChange$",value:function(){return this.getSelectedRoomDataLogs$().pipe(Object($.a)((function(e){return Object(l.a)(e).pop()})),Object(T.a)((function(e){return!!e})),Object(x.a)((function(e,t){return e.timestamp===t.timestamp})))}},{key:"getUserProfile$",value:function(){return this.store$.pipe(Object($.a)((function(e){return e.firebase.profile})))}},{key:"dispatch",value:function(e){return this.store.dispatch(e)}},{key:"hostDestroyed",value:function(){this.takeUntil$.next(),this._storeUnsubscribeFn(),e.instance=null}},{key:"store$",get:function(){return this._store$.asObservable()}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}();M.instance=void 0;var W=function(){function e(t){Object(w.a)(this,e),this.firestore=t,this.diceThrow$=new R.a,this.diceBeforeThrow$=new R.a,this.diceThrowResult$=new k.a(1),this.profile=null,this.roomUid=null,this.takeUntil$=new R.a,this.storeService=M.getInstance(),this.createSubscriptions()}return Object(S.a)(e,[{key:"hostDestroyed",value:function(){this.takeUntil$.next(),e.instance=null,this.setDiceRolling(!1)}},{key:"createSubscriptions",value:function(){var e=this;this.diceBeforeThrow$.pipe(Object(N.a)(this.takeUntil$)).subscribe((function(t){e.setDiceRolling(!0)})),this.diceThrowResult$.pipe(Object(N.a)(this.takeUntil$)).subscribe((function(t){e.setDiceRolling(!1),t.emit&&e.firestoreAddNewThrow(t)})),this.performDiceThrowWhenNewDiceThrowLogAppears()}},{key:"setDiceRolling",value:function(e){this.storeService.dispatch(P(e))}},{key:"firestoreAddNewThrow",value:function(e){var t=this;if(this.roomUid){e.emit;var a=Object(y.a)(e,["emit"]),n=this.firestore.doc("".concat(B.a.ROOMS,"/").concat(this.roomUid));this.firestore.runTransaction((function(e){return e.get(n).then((function(r){var c,i={authorUid:null===(c=t.profile)||void 0===c?void 0:c.uid,payload:a,timestamp:Date.now().toString(),type:G.a.DICE_ROLL},o=[].concat(Object(l.a)(r.data().logs),[i]);return e.update(n,{logs:o})})).catch((function(e){console.log("Transaction failure:",e)}))}))}}},{key:"performDiceThrowWhenNewDiceThrowLogAppears",value:function(){var e=this;this.storeService.getLastRoomLogOnChange$().pipe(Object(T.a)((function(e){return e.type===G.a.DICE_ROLL})),Object(C.a)(this.storeService.getUserProfile$()),Object(T.a)((function(e){var t=Object(O.a)(e,2),a=t[0],n=t[1];return!!n.uid&&a.authorUid!==n.uid})),Object(N.a)(this.takeUntil$)).subscribe((function(t){var a=Object(O.a)(t,1)[0];e.diceThrow$.next(Object(v.a)({},a.payload))}))}},{key:"handleDiceSetFormChanges$",get:function(){return this.storeService.getDiceSetForm().pipe(Object($.a)((function(e){return null===e||void 0===e?void 0:e.values})),Object(x.a)((function(e,t){return JSON.stringify(e)===JSON.stringify(t)})),Object($.a)((function(e){return function(e){return Object.keys(e).map((function(t){return e[t]?e[t]+t:""})).filter((function(e){return!!e.length})).join("+")}(e)})),Object(N.a)(this.takeUntil$))}}],[{key:"getInstance",value:function(t){return e.instance||(e.instance=new e(t)),e.instance}}]),e}();W.instance=void 0;var z=a(33),J=a(84),V=d.a.createContext(null),q=function(e){var t=e.children,a=Object(b.useFirestore)(),n=W.getInstance(a),r=Object(f.useSelector)(z.a.userProfile),c=Object(f.useSelector)(J.a.selectedRoomUid);return Object(u.useEffect)((function(){n.profile=r}),[r]),Object(u.useEffect)((function(){n.roomUid=c||null}),[c]),Object(u.useEffect)((function(){return function(){return n.hostDestroyed()}}),[]),d.a.createElement(V.Provider,{value:n},t)};var Q=Object(j.a)((function(e){return Object(g.a)({root:{width:"100%",height:"calc(100% - ".concat(e.spacing(2),"px)"),position:"relative"},diceCanvas:{width:"100%",height:"100%"}})}))((function(e){var t=e.classes,a=d.a.useRef(null),n=Object(u.useRef)(null),r=Object(u.useState)(!1),c=Object(O.a)(r,2),i=c[0],o=c[1],l=Object(u.useContext)(V),s=a.current&&a.current.getBoundingClientRect().width||0;return Object(u.useEffect)((function(){l&&!i&&0!==s&&(window.dice_initialize(n.current,Object(v.a)({},D,{diceThrow$:l.diceThrow$,diceThrowResult$:l.diceThrowResult$,diceBeforeThrow$:l.diceBeforeThrow$,diceSet$:l.handleDiceSetFormChanges$})),o(!0))}),[!!s,!!l]),d.a.createElement(E.a,{elevation:3,className:t.root},d.a.createElement("div",{id:"diceCanvasContainer",ref:n,className:t.diceCanvas},d.a.createElement("div",{ref:a,id:"canvas"})))})),Y=a(76),Z=a(229),K=a(119),X=a(544),ee=a(708),te=a(588),ae=a(680),ne=a.n(ae),re=a(682),ce=a.n(re),ie=a(681),oe=a.n(ie),le=a(706),se=a(707),ue=a(727),de=a(534);var me=d.a.memo(Object(j.a)((function(e){return Object(g.a)({tile:{borderRadius:e.spacing(1),marginRight:e.spacing(2),maxWidth:e.spacing(30),overflow:"hidden",padding:"0 !Important",width:"100%"},title:{color:e.palette.primary.light},titleDisable:{color:e.palette.warning.light},masterGame:{position:"absolute",zIndex:10,top:0,right:0},titleBar:{background:"linear-gradient(to top, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 70%, rgba(0,0,0,0) 100%)"}})}))((function(e){var t=e.classes,a=e.player,n=e.gameMaster;return d.a.createElement(le.a,{className:t.tile},d.a.createElement("img",{src:a.avatarUrl||a.photoURL,alt:a.displayName}),d.a.createElement(se.a,{title:a.displayName,classes:{root:t.titleBar,title:a.connected?t.title:t.titleDisable},actionIcon:d.a.createElement(ue.a,{title:a.connected?"Online":"Offline"},d.a.createElement(de.a,{"aria-label":"star ".concat(a.displayName)},a.connected?d.a.createElement(ne.a,{className:t.title}):d.a.createElement(oe.a,{className:t.titleDisable})))}),n&&d.a.createElement(ue.a,{className:Object(s.a)(t.masterGame,a.connected?t.title:t.titleDisable),title:"Game Master"},d.a.createElement(de.a,{"aria-label":"star ".concat(a.displayName)},d.a.createElement(ce.a,null))))})));var fe=Object(j.a)((function(e){return Object(g.a)({root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper},gridList:{height:e.spacing(20),width:"100%",flexWrap:"nowrap",transform:"translateZ(0)"}})}))((function(e){var t=e.classes,a=e.visible,n=Object(f.useSelector)(Y.a.selectedRoomPlayers),r=Object(f.useSelector)(Y.a.selectedRoomGameMasterProfile);return d.a.createElement(X.a,{direction:"up",in:a},d.a.createElement(ee.a,{className:t.gridList,cols:2.5},r&&d.a.createElement(te.a,{in:!0,timeout:300},d.a.createElement(me,{player:r,gameMaster:!0})),n&&n.map((function(e,t){return d.a.createElement(te.a,{in:!0,key:e.uid,timeout:1e3*t+1300},d.a.createElement(me,{player:e}))}))))})),be=a(685),pe=a.n(be),he=a(686),ve=a.n(he),Oe=a(683),ge=a.n(Oe),je=a(684),Ee=a.n(je),De=a(687),ye=a.n(De),we=a(728),Se=a(724),Re=a(293),ke=a(730),Ne=a(710),Te=a(731);var Ce=d.a.memo(Object(j.a)((function(e){return Object(g.a)({})}))((function(e){var t=e.direction,a=void 0===t?"left":t,n=e.actions,r=d.a.useState(!1),c=Object(O.a)(r,2),i=c[0],o=c[1],l=function(){return o(!1)};return d.a.createElement(ke.a,{ariaLabel:"SpeedDial example",icon:d.a.createElement(Te.a,null),onClose:l,onOpen:function(){return o(!0)},open:i,direction:a},n.map((function(e){return d.a.createElement(Ne.a,{key:e.name,icon:e.icon,tooltipTitle:e.name,onClick:function(){return e.callback?e.callback(l):l()}})})))})));var $e,xe=Object(j.a)((function(e){return Object(g.a)({snackbar:{top:e.spacing(8)}})}))((function(e){var t=e.classes,a=Object(f.useDispatch)(),n=(Object(f.useSelector)(Re.a.isGameMasterOfSelectedRoom),Object(f.useSelector)(J.a.drawerOpened)),r=Object(f.useSelector)(J.a.chatOpened),c=Object(f.useSelector)(J.a.playersOpened),i=d.a.useState({type:"success",open:!1,text:""}),o=Object(O.a)(i,2),l=o[0],s=o[1],u=[],m=[{icon:n?d.a.createElement(ge.a,null):d.a.createElement(Ee.a,null),name:n?"Hide Nav":"Show Nav",callback:function(e){return a(I(!n))}},{icon:d.a.createElement(pe.a,null),name:r?"Hide chat":"Show Chat",callback:function(e){return a(A(!r))}},{icon:d.a.createElement(ve.a,null),name:c?"Hide players":"Show players",callback:function(e){return a(F(!c))}},{icon:d.a.createElement(ye.a,null),name:"Copy Room Url",callback:function(e){navigator.permissions.query({name:"clipboard-write"}).then((function(e){"granted"!==e.state&&"prompt"!==e.state||navigator.clipboard.writeText(window.location.href).then((function(){return s({type:"success",open:!0,text:"Room URL copied to clipboard!"})}),(function(){return s({type:"error",open:!0,text:"Upss.. there was an error"})}))}))}}].concat(u);return d.a.createElement(d.a.Fragment,null,d.a.createElement(Ce,{actions:m,direction:"up"}),d.a.createElement(we.a,{className:t.snackbar,anchorOrigin:{vertical:"top",horizontal:"right"},open:l.open,autoHideDuration:6e3,onClose:function(){return s(Object(v.a)({},l,{open:!1}))}},d.a.createElement(Se.a,{onClose:function(){return s(Object(v.a)({},l,{open:!1}))},severity:l.type},l.text)))})),Le=a(603),Ue=a(605),_e=a(599),Ie=a(604),Ae=a(89),Fe=a(720),Pe=a(623),Be=a(632),Ge=Object(m.a)((function(e){return{inputSlider:{width:"100%",marginLeft:e.spacing(0),paddingRight:e.spacing(2),minWidth:e.spacing(40)}}}));var He=d.a.memo(Object(Fe.a)({form:"diceSetForm",initialValues:($e={},Object(Ae.a)($e,Pe.a.D4,0),Object(Ae.a)($e,Pe.a.D6,0),Object(Ae.a)($e,Pe.a.D8,0),Object(Ae.a)($e,Pe.a.D10,0),Object(Ae.a)($e,Pe.a.D12,0),Object(Ae.a)($e,Pe.a.D20,0),Object(Ae.a)($e,Pe.a.D100,0),$e)})((function(e){var t=e.diceType,a=Ge();return d.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},d.a.createElement("h2",null,"Set your dices!"),d.a.createElement("div",{className:a.inputSlider},null===t||void 0===t?void 0:t.map((function(e){return d.a.createElement(Be.b,Object.assign({key:e},G.b[e]))}))))}))),Me=a(536),We=a(117),ze=a(590);var Je=function(e){var t=e.throwResult;return d.a.createElement("article",null,d.a.createElement("h2",null,"Throw result:"),d.a.createElement(ze.a,null,function(){if(!t)return"";var e={};return null===t||void 0===t||t.diceSet.forEach((function(a,n){e[a]=[].concat(Object(l.a)(e[a]||[]),[null===t||void 0===t?void 0:t.result[n]])})),Object.keys(e).map((function(t){return d.a.createElement(Me.a,{key:t},d.a.createElement(We.a,{variant:"h2",component:"div"},t,": ",e[t].join(", ")))}))}()))};var Ve=Object(j.a)((function(e){return Object(g.a)({root:{display:"flex",backgroundColor:"#f4f4f280"},details:{display:"flex",flexDirection:"column"},content:{flex:"1 0 auto"},cover:{width:e.spacing(18)},playIcon:{height:38,width:38}})}))((function(e){var t=e.classes,a=e.visible,n=void 0===a||a,r=Object(f.useSelector)(Y.a.selectedRoom),c=Object(u.useContext)(V),i=Object(u.useState)(null),o=Object(O.a)(i,2),l=o[0],s=o[1];return Object(u.useEffect)((function(){null===c||void 0===c||c.diceThrowResult$.subscribe((function(e){return s(e)}))}),[!!c]),d.a.createElement(te.a,{in:!!r&&n},d.a.createElement(Le.a,{className:t.root,onClick:function(){return s(null)}},d.a.createElement("div",{className:t.details},d.a.createElement(Ue.a,{className:t.content},d.a.createElement(_e.a,{in:!l},d.a.createElement(He,{diceType:null===r||void 0===r?void 0:r.diceType})),d.a.createElement(_e.a,{in:!!l},d.a.createElement(Je,{throwResult:l})))),d.a.createElement(Ie.a,{className:t.cover,image:"".concat("/roll-a-dice","/assets/images/avatar-1.jpg"),title:"Bot avatar"})))})),qe=Object(m.a)((function(e){return{root:{position:"relative",margin:e.spacing(-6,-4),height:"calc(100% + ".concat(e.spacing(12),"px)")},diceWrapper:{},chatter:{zIndex:1e5,position:"fixed",bottom:e.spacing(4),right:e.spacing(2),transition:"bottom 225ms cubic-bezier(0, 0, 0.2, 1) 0ms"},chatterLower:{bottom:e.spacing(4)},speedDial:{position:"absolute",bottom:e.spacing(25),left:e.spacing(3),zIndex:10,transition:"bottom 225ms cubic-bezier(0, 0, 0.2, 1) 0ms"},speedDialLower:{bottom:e.spacing(3)},cssGrid:{height:"100%",display:"grid",gridTemplateColumns:"1fr",gridTemplateRows:"1fr 160px",rowGap:"".concat(e.spacing(2),"px"),columnGap:"".concat(e.spacing(2),"px"),padding:e.spacing(2,2,0,2)},cssItem1:{gridColumn:1,gridRow:1},cssItem2:{gridColumn:1,gridRow:2},diceDashboard:{position:"absolute",top:e.spacing(3),left:e.spacing(3)}}}));t.default=o((function(e){var t=e.match,a=qe(),n=Object(f.useDispatch)(),r=Object(b.useFirestore)(),c=Object(f.useSelector)(J.a.playersOpened),i=Object(f.useSelector)(J.a.chatOpened),o=Object(f.useSelector)(Y.a.selectedRoom),m=Object(f.useSelector)(J.a.selectedRoomUid),v=Object(f.useSelector)(K.a.match),O=Object(f.useSelector)(z.a.userProfile),g=Object(f.useSelector)(J.a.diceRolling);return Object(u.useEffect)((function(){return JSON.stringify(t)!==JSON.stringify(v)&&n(Z.a.matchChange(t)),void n(_(v.params.roomId))})),Object(u.useEffect)((function(){!function(){if((null===o||void 0===o?void 0:o.players)&&O.uid&&o.gameMaster.uid!==O.uid&&-1===o.players.indexOf(O.uid)){var e=r.doc("".concat(B.a.ROOMS,"/").concat(m));r.runTransaction((function(t){return t.get(e).then((function(a){var n=[].concat(Object(l.a)(a.data().players),[O.uid]);return t.update(e,{players:n})})).catch((function(e){console.log("Transaction failure:",e)}))}))}}()}),[m,null===o||void 0===o?void 0:o.createdAt,O.uid]),Object(u.useEffect)((function(){return function(){n(_(null))}}),[]),Object(u.useEffect)((function(){n(p.a.setSelectedChat((null===o||void 0===o?void 0:o.chatUid)||null))}),[null===o||void 0===o?void 0:o.chatUid]),d.a.createElement(q,null,d.a.createElement("section",{className:a.root},d.a.createElement("div",{className:Object(s.a)(a.chatter,!c&&a.chatterLower)},d.a.createElement(h.a,{visbile:i&&!g})),d.a.createElement("div",{className:a.cssGrid},d.a.createElement("div",{className:a.cssItem1},d.a.createElement(Q,null)),d.a.createElement("div",{className:a.cssItem2},d.a.createElement(fe,{visible:c}))),d.a.createElement("nav",{className:Object(s.a)(a.speedDial,!c&&a.speedDialLower)},d.a.createElement(xe,null)),d.a.createElement("nav",{className:a.diceDashboard},d.a.createElement(Ve,{visible:!g}))))}))}}]);
//# sourceMappingURL=7.a22e1cdb.chunk.js.map