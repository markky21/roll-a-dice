(this["webpackJsonproll-a-dice"]=this["webpackJsonproll-a-dice"]||[]).push([[7],{685:function(e,a,t){"use strict";t.d(a,"a",(function(){return d}));var n=t(686),r=t.n(n),c=t(691),o=t(54),i=t(23),l=t(33),s=t(278),m=r()({}),u=Object(o.a)(),d=Object(c.connectedRouterRedirect)({redirectPath:i.a.HOME_PATH,AuthenticatingComponent:s.a,wrapperDisplayName:"UserIsAuthenticated",authenticatedSelector:l.a.isAuthenticated,authenticatingSelector:l.a.authenticatingSelector,redirectAction:function(e){return function(a){u.push(e),a({type:"UNAUTHED_REDIRECT",payload:{message:"User is not authenticated."}})}}});Object(c.connectedRouterRedirect)({AuthenticatingComponent:s.a,wrapperDisplayName:"UserIsNotAuthenticated",allowRedirectBack:!1,authenticatedSelector:function(e){return e.firebase.auth.isEmpty},authenticatingSelector:function(e){var a=e.firebase,t=a.auth,n=a.isInitializing;return!t.isLoaded||n},redirectPath:function(e,a){return m.getRedirectQueryParam(a)||i.a.ROOMS_PATH},redirectAction:function(e){return function(a){u.push(e),a({type:"AUTHED_REDIRECT",payload:{message:"User is not authenticated."}})}}})},688:function(e,a,t){"use strict";t.d(a,"a",(function(){return s}));var n=t(0),r=t.n(n),c=t(20),o=t(654),i=t(771),l=t(772);var s=r.a.memo((function(e){var a=e.open,t=e.onClose,n=e.children,s=void 0===n?[]:n,m=e.title,u=Object(c.a)(),d=Object(o.a)(u.breakpoints.down("xs"));return r.a.createElement(i.a,{fullScreen:d,open:a,onClose:t,"aria-labelledby":"responsive-dialog-title"},r.a.createElement(l.a,null,m),s)}))},689:function(e,a,t){"use strict";t.d(a,"a",(function(){return u}));var n=t(0),r=t.n(n),c=t(609),o=t(657),i=t(662),l=t(605),s=Object(c.a)({image:{width:"100%",height:"25vh",backgroundPosition:"top",backgroundSize:"cover"}}),m=Object(l.a)(s);var u=r.a.memo((function(e){var a=e.src,t=void 0===a?"":a,n=e.title,c=m();return r.a.createElement(o.a,{in:t.length>8},t&&r.a.createElement(i.a,{className:c.image,image:t,title:n}))}))},694:function(e,a,t){"use strict";var n=t(0),r=t.n(n),c=t(773),o=t(774),i=t(775),l=t(674),s=t(11),m=t(103),u=t(280),d=t(689),p=t(276);var b=Object(l.a)({form:"createRoom",validate:function(e){var a={};return[m.b.roomName.name,m.b.maxPlayers.name].forEach((function(t){e[t]||(a[t]="Required")})),e[m.b.diceType.name]&&e[m.b.diceType.name].length||(a[m.b.diceType.name]="Select at least one dice"),a}})((function(e){var a=e.handleSubmit,t=e.pristine,n=e.submitting,l=e.onClose,b=e.invalid,h=Object(s.useSelector)(p.a.getFormCreateRoom);return r.a.createElement("form",{onSubmit:a},r.a.createElement(d.a,{src:null===h||void 0===h?void 0:h.roomImage,title:"Room image"}),r.a.createElement(c.a,{dividers:!0},r.a.createElement(u.c,m.b.roomName),r.a.createElement(u.c,m.b.roomImage),r.a.createElement(u.c,m.b.campaignTitle),r.a.createElement(u.c,m.b.description),r.a.createElement(u.c,m.b.gameMasterAvatar),r.a.createElement("div",{style:{width:"50%"}},r.a.createElement(u.c,m.b.maxPlayers)),r.a.createElement(u.a,m.b.diceType)),r.a.createElement(o.a,null,r.a.createElement(i.a,{type:"submit",color:"primary",disabled:b||t||n},"Submit"),r.a.createElement(i.a,{type:"button",onClick:l,color:"primary"},"Cancel")))})),h=t(688);t.d(a,"a",(function(){return f}));var f=r.a.memo((function(e){var a=e.open,t=e.onClose,n=e.onSubmit,c=e.initialValues;return r.a.createElement(h.a,{open:a,onClose:t,title:"Create new room"},r.a.createElement(b,{onClose:t,onSubmit:n,initialValues:c}))}))},782:function(e,a,t){"use strict";t.r(a);var n=t(22),r=t(81),c=t(693),o=t(685),i=Object(n.d)(Object(c.a)("EnhancedRoomList"),r.g,o.a),l=t(0),s=t.n(l),m=t(647),u=t(661),d=t(662),p=t(663),b=t(130),h=t(1),f=t(3),E=(t(2),t(4)),g=t(5),O=l.forwardRef((function(e,a){var t=e.disableSpacing,n=void 0!==t&&t,r=e.classes,c=e.className,o=Object(f.a)(e,["disableSpacing","classes","className"]);return l.createElement("div",Object(h.a)({className:Object(E.a)(r.root,c,!n&&r.spacing),ref:a},o))})),v=Object(g.a)({root:{display:"flex",alignItems:"center",padding:8},spacing:{"& > :not(:first-child)":{marginLeft:8}}},{name:"MuiCardActions"})(O),y=t(775),j=t(605),R=t(102),S=t(11),A=t(84),N=t(281),C=t(154),w=t(43),k=t(18),P=t(48),T=t(31),M=t(33),U=t(57),I=t(694),x=t(23);function _(){var e=Object(S.useSelector)(C.a.match).path,a=s.a.useState(!1),t=Object(P.a)(a,2),n=t[0],c=t[1],o=Object(r.f)(),i=Object(T.useFirestore)(),m=Object(S.useSelector)(M.a.userProfile);return Object(l.useEffect)((function(){e===x.a.ROOM_CREATE_PATH&&c(!0)}),[e]),s.a.createElement(I.a,{open:n,onClose:function(){c(!1),o.push(x.a.ROOMS_PATH)},onSubmit:function(e){(function(e){var a=Object(k.a)({createdAt:Date.now().toString(),gameMasterUid:m.uid,logs:[],playersUid:[],players:Object(w.a)({},m.uid,{uid:m.uid,avatarUrl:m.avatarUrl||m.photoURL,displayName:m.displayName,email:m.email,photoURL:m.photoURL||m.avatarUrl,gameMaster:!0})},e);return i.collection(U.a.ROOMS).add(a).then((function(e){c(!1),o.push("".concat(x.a.ROOM_PATH,"/").concat(e.id))}))})(e).catch((function(e){console.log({e:e})}))}})}var H=t(651),D=t(653),B=t(271),G=t(349),L=t.n(G),F=t(600),z=t(652),J=t(609),W=t(598),V=t(655),q=t(679),Q=t(656),Y=t(649),K=t(744),X=t(348),Z=t(279);var $=s.a.memo(Object(g.a)((function(e){return Object(J.a)({root:{width:"100%",backgroundColor:e.palette.background.paper,height:"20vh",overflowY:"scroll"},item:{cursor:"pointer"},divider:{backgroundColor:"rgba(0, 0, 0, 0.12)"}})}))((function(e){var a=e.classes,t=e.roomsAsGameMaster,n=e.roomsAsPlayer,r=e.onRoomClick,c=e.selectedRoom,o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return Object.keys(e).map((function(n,o){return s.a.createElement(m.a,{key:n,in:!0,timeout:1e3*o+t},s.a.createElement(W.a,{onClick:function(){return r(n)},selected:n===c,className:a.item,button:!0,dense:!0,alignItems:"flex-start"},s.a.createElement(V.a,null,s.a.createElement(q.a,null,Object(X.a)(e[n].roomName||"No name"))),s.a.createElement(Q.a,{primary:e[n].roomName||"No name",secondary:Z.a.timeStampToFormattedDate(e[n].createdAt)})))}))};return s.a.createElement(Y.a,{className:a.root},o(t),s.a.createElement(m.a,{in:!!Object.keys(t).length,timeout:1e3*Object.keys(t).length+300},s.a.createElement(K.a,{className:a.divider})),o(n,1e3*Object.keys(t).length+300))})));var ee=Object(g.a)((function(e){return Object(J.a)({paper:{margin:"auto",overflow:"hidden"},searchBar:{borderBottom:"1px solid rgba(0, 0, 0, 0.12)"},searchInput:{fontSize:e.typography.fontSize},block:{display:"block"},contentWrapper:{margin:"16px 16px"}})}))((function(e){var a=e.classes,t=e.roomsAsGameMaster,n=e.roomsAsPlayer,c=e.showSearchBar,o=e.selectedRoom,i=e.label,l=Object(r.f)();return s.a.createElement(m.a,{in:!0},s.a.createElement(B.a,{className:a.paper},c&&s.a.createElement(H.a,{className:a.searchBar,position:"static",color:"default",elevation:0},s.a.createElement(z.a,null,s.a.createElement(D.a,{container:!0,spacing:2,alignItems:"center"},s.a.createElement(D.a,{item:!0},s.a.createElement(L.a,{className:a.block,color:"inherit"})),s.a.createElement(D.a,{item:!0,xs:!0},s.a.createElement(F.a,{fullWidth:!0,placeholder:i,InputProps:{disableUnderline:!0,className:a.searchInput}}))))),s.a.createElement("div",{className:a.contentWrapper},s.a.createElement($,{roomsAsGameMaster:t,roomsAsPlayer:n,onRoomClick:function(e){return l.push("".concat(x.a.ROOM_PATH,"/").concat(e))},selectedRoom:o}))))})),ae=Object(j.a)((function(e){return{cards:{marginBottom:"16px",maxWidth:936},media:{height:140}}}));a.default=i((function(e){var a=ae(),t=e.match,n=Object(S.useDispatch)(),r=Object(S.useSelector)(C.a.match),c=Object(S.useSelector)(A.a.userRoomsAsGameMaster)||{},o=Object(S.useSelector)(A.a.userRoomsAsPlayer)||{};return Object(l.useEffect)((function(){JSON.stringify(t)!==JSON.stringify(r)&&n(N.a.matchChange(t))})),s.a.createElement(s.a.Fragment,null,s.a.createElement("section",{className:a.cards},s.a.createElement(m.a,{in:!0},s.a.createElement(u.a,null,s.a.createElement(d.a,{className:a.media,image:"".concat("/roll-a-dice","/assets/images/fantasy-wallpapers.jpg"),title:"Fantasy RPG"}),s.a.createElement(p.a,null,s.a.createElement(b.a,{gutterBottom:!0,variant:"h5",component:"h2"},"Enter to the new world"),s.a.createElement(b.a,{variant:"body2",color:"textSecondary",component:"p"},"Create a new game room to start a new adventure with your friends!")),s.a.createElement(v,null,s.a.createElement(R.b,{to:x.a.ROOM_CREATE_PATH},s.a.createElement(y.a,{variant:"contained",color:"primary"},"Create new Room")))))),s.a.createElement("section",{className:a.cards},s.a.createElement(ee,{roomsAsGameMaster:c,roomsAsPlayer:o,selectedRoom:null,showSearchBar:!0,label:"Search room by name"})),s.a.createElement(_,null))}))}}]);
//# sourceMappingURL=7.503f3eb0.chunk.js.map