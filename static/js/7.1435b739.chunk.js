(this["webpackJsonproll-a-dice"]=this["webpackJsonproll-a-dice"]||[]).push([[7],{702:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a(703),r=a.n(n),o=a(708),c=a(58),i=a(30),l=a(38),s=a(287),m=r()({}),u=Object(c.a)(),d=Object(o.connectedRouterRedirect)({redirectPath:i.a.HOME_PATH,AuthenticatingComponent:s.a,wrapperDisplayName:"UserIsAuthenticated",authenticatedSelector:l.a.isAuthenticated,authenticatingSelector:l.a.authenticatingSelector,redirectAction:function(e){return function(t){u.push(e),t({type:"UNAUTHED_REDIRECT",payload:{message:"User is not authenticated."}})}}});Object(o.connectedRouterRedirect)({AuthenticatingComponent:s.a,wrapperDisplayName:"UserIsNotAuthenticated",allowRedirectBack:!1,authenticatedSelector:function(e){return e.firebase.auth.isEmpty},authenticatingSelector:function(e){var t=e.firebase,a=t.auth,n=t.isInitializing;return!a.isLoaded||n},redirectPath:function(e,t){return m.getRedirectQueryParam(t)||i.a.ROOMS_PATH},redirectAction:function(e){return function(t){u.push(e),t({type:"AUTHED_REDIRECT",payload:{message:"User is not authenticated."}})}}})},705:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(0),r=a.n(n),o=a(25),c=a(670),i=a(785),l=a(786);function s(e){var t=e.open,a=e.onClose,n=e.children,s=void 0===n?[]:n,m=e.title,u=Object(o.a)(),d=Object(c.a)(u.breakpoints.down("xs"));return r.a.createElement(i.a,{fullScreen:d,open:t,onClose:a,"aria-labelledby":"responsive-dialog-title"},r.a.createElement(l.a,null,m),s)}},706:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(0),r=a.n(n),o=a(402),c=a(673),i=a(678),l=a(399),s=Object(o.a)({image:{width:"100%",height:"25vh",backgroundPosition:"top",backgroundSize:"cover"}}),m=Object(l.a)(s);var u=r.a.memo((function(e){var t=e.src,a=void 0===t?"":t,n=e.title,o=m();return r.a.createElement(c.a,{in:a.length>8},a&&r.a.createElement(i.a,{className:o.image,image:a,title:n}))}))},711:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(787),c=a(788),i=a(789),l=a(692),s=a(12),m=a(112),u=a(288),d=a(706),b=a(284);var p=Object(l.a)({form:"createRoom",validate:function(e){var t={};return[m.b.roomName.name,m.b.maxPlayers.name].forEach((function(a){e[a]||(t[a]="Required")})),Object.keys(m.b).forEach((function(a){var n;m.b[a].maxLength&&(null===(n=e[m.b[a].name])||void 0===n?void 0:n.length)>m.b[a].maxLength&&(t[a]="Max length ".concat(m.b[a].maxLength," exceeded"))})),e[m.b.diceType.name]&&e[m.b.diceType.name].length||(t[m.b.diceType.name]="Select at least one dice"),t}})((function(e){var t=e.handleSubmit,a=e.pristine,n=e.submitting,l=e.onClose,p=e.invalid,h=Object(s.useSelector)(b.a.getFormCreateRoom);return r.a.createElement("form",{onSubmit:t},r.a.createElement(d.a,{src:null===h||void 0===h?void 0:h.roomImage,title:"Room image"}),r.a.createElement(o.a,{dividers:!0},r.a.createElement(u.c,m.b.roomName),r.a.createElement(u.c,m.b.roomImage),r.a.createElement(u.c,m.b.campaignTitle),r.a.createElement(u.c,m.b.description),r.a.createElement(u.c,m.b.gameMasterAvatar),r.a.createElement("div",{style:{width:"50%"}},r.a.createElement(u.c,m.b.maxPlayers)),r.a.createElement(u.a,m.b.diceType)),r.a.createElement(c.a,null,r.a.createElement(i.a,{type:"submit",color:"primary",disabled:p||a||n},"Submit"),r.a.createElement(i.a,{type:"button",onClick:l,color:"primary"},"Cancel")))})),h=a(705),f=a(55);a.d(t,"a",(function(){return E}));var E=r.a.memo((function(e){var t=e.open,a=e.onClose,n=e.onSubmit,o=e.initialValues;return r.a.createElement(h.a,{open:t,onClose:a,title:"Create new room"},r.a.createElement(p,{onClose:a,onSubmit:n,initialValues:o}))}),(function(e,t){return Object(f.a)(e.initialValues,t.initialValues)&&e.open===t.open}))},796:function(e,t,a){"use strict";a.r(t);var n=a(27),r=a(85),o=a(710),c=a(702),i=Object(n.d)(Object(o.a)("EnhancedRoomList"),r.g,c.a),l=a(0),s=a.n(l),m=a(663),u=a(677),d=a(678),b=a(679),p=a(139),h=a(1),f=a(3),E=(a(2),a(4)),g=a(5),O=l.forwardRef((function(e,t){var a=e.disableSpacing,n=void 0!==a&&a,r=e.classes,o=e.className,c=Object(f.a)(e,["disableSpacing","classes","className"]);return l.createElement("div",Object(h.a)({className:Object(E.a)(r.root,o,!n&&r.spacing),ref:t},c))})),v=Object(g.a)({root:{display:"flex",alignItems:"center",padding:8},spacing:{"& > :not(:first-child)":{marginLeft:8}}},{name:"MuiCardActions"})(O),y=a(789),R=a(399),j=a(111),S=a(12),A=a(89),C=a(289),N=a(163),k=a(10),w=a(17),P=a(36),M=a(35),x=a(38),T=a(61),U=a(711),I=a(30),_=a(92);function H(){var e=Object(S.useSelector)(N.a.match).path,t=s.a.useState(!1),a=Object(P.a)(t,2),n=a[0],o=a[1],c=Object(r.f)(),i=Object(M.useFirestore)(),m=Object(S.useSelector)(x.a.userProfile),u=Object(l.useContext)(_.b);return Object(l.useEffect)((function(){e===I.a.ROOM_CREATE_PATH&&o(!0)}),[e]),s.a.createElement(U.a,{open:n,onClose:function(){o(!1),c.push(I.a.ROOMS_PATH)},onSubmit:function(e){(function(e){var t=Object(w.a)({createdAt:Date.now().toString(),gameMasterUid:m.uid,logs:[],playersUid:[],players:Object(k.a)({},m.uid,{uid:m.uid,avatarUrl:m.avatarUrl||m.photoURL,displayName:m.displayName,email:m.email,photoURL:m.photoURL||m.avatarUrl,gameMaster:!0})},e);return i.collection(T.a.ROOMS).add(t).then((function(e){o(!1),c.push("".concat(I.a.ROOM_PATH,"/").concat(e.id))}))})(e).catch((function(e){u.setSnackbarConfig({type:_.a.ERROR,open:!0,text:"Upss.. there was an error creating the room"})}))}})}var D=a(667),L=a(669),B=a(279),G=a(357),F=a.n(G),z=a(614),J=a(668),V=a(402),W=a(665),q=a(761),Q=a(55),Y=a(612),K=a(671),X=a(696),Z=a(672),$=a(356),ee=a(286);var te=s.a.memo(Object(g.a)((function(e){return Object(V.a)({item:{cursor:"pointer"}})}))((function(e){var t=e.classes,a=e.room,n=e.roomId,r=e.onRoomClick,o=e.selectedRoom;return s.a.createElement(Y.a,{onClick:function(){return r(n)},selected:n===o,className:t.item,button:!0,dense:!0,alignItems:"flex-start"},s.a.createElement(K.a,null,s.a.createElement(X.a,null,Object($.a)(a.roomName||"No name"))),s.a.createElement(Z.a,{primary:a.roomName||"No name",secondary:ee.a.timeStampToFormattedDate(a.createdAt)}))})),(function(e,t){return Object(Q.a)(e.room,t.room)&&e.selectedRoom===t.selectedRoom}));var ae=s.a.memo(Object(g.a)((function(e){return Object(V.a)({root:{width:"100%",backgroundColor:e.palette.background.paper,height:"20vh",overflowY:"scroll"},item:{cursor:"pointer"},divider:{backgroundColor:"rgba(0, 0, 0, 0.12)"}})}))((function(e){var t=e.classes,a=e.roomsAsGameMaster,n=e.roomsAsPlayer,r=e.onRoomClick,o=e.selectedRoom,c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return Object.keys(e).map((function(a,n){return s.a.createElement(m.a,{key:a,in:!0,timeout:1e3*n+t},s.a.createElement(te,{room:e[a],selectedRoom:o,roomId:a,onRoomClick:r}))}))};return s.a.createElement(W.a,{className:t.root},c(a),s.a.createElement(m.a,{in:!!Object.keys(a).length,timeout:1e3*Object.keys(a).length+300},s.a.createElement(q.a,{className:t.divider})),c(n,1e3*Object.keys(a).length+300))})),(function(e,t){return Object(Q.a)(e.roomsAsGameMaster,t.roomsAsGameMaster)&&Object(Q.a)(e.roomsAsPlayer,t.roomsAsPlayer)&&e.selectedRoom===t.selectedRoom}));var ne=Object(g.a)((function(e){return Object(V.a)({paper:{margin:"auto",overflow:"hidden"},searchBar:{borderBottom:"1px solid rgba(0, 0, 0, 0.12)"},searchInput:{fontSize:e.typography.fontSize},block:{display:"block"},contentWrapper:{margin:"16px 16px"}})}))((function(e){var t=e.classes,a=e.roomsAsGameMaster,n=e.roomsAsPlayer,o=e.showSearchBar,c=e.selectedRoom,i=e.label,l=Object(r.f)();return s.a.createElement(m.a,{in:!0},s.a.createElement(B.a,{className:t.paper},o&&s.a.createElement(D.a,{className:t.searchBar,position:"static",color:"default",elevation:0},s.a.createElement(J.a,null,s.a.createElement(L.a,{container:!0,spacing:2,alignItems:"center"},s.a.createElement(L.a,{item:!0},s.a.createElement(F.a,{className:t.block,color:"inherit"})),s.a.createElement(L.a,{item:!0,xs:!0},s.a.createElement(z.a,{fullWidth:!0,placeholder:i,InputProps:{disableUnderline:!0,className:t.searchInput}}))))),s.a.createElement("div",{className:t.contentWrapper},s.a.createElement(ae,{roomsAsGameMaster:a,roomsAsPlayer:n,onRoomClick:function(e){return l.push("".concat(I.a.ROOM_PATH,"/").concat(e))},selectedRoom:c}))))})),re=Object(R.a)((function(e){return{cards:{marginBottom:"16px",maxWidth:936},media:{height:140}}}));t.default=i((function(e){var t=re(),a=e.match,n=Object(S.useDispatch)(),r=Object(S.useSelector)(N.a.match),o=Object(S.useSelector)(A.a.userRoomsAsGameMaster)||{},c=Object(S.useSelector)(A.a.userRoomsAsPlayer)||{};return Object(l.useEffect)((function(){JSON.stringify(a)!==JSON.stringify(r)&&n(C.a.matchChange(a))})),s.a.createElement(s.a.Fragment,null,s.a.createElement("section",{className:t.cards},s.a.createElement(m.a,{in:!0},s.a.createElement(u.a,null,s.a.createElement(d.a,{className:t.media,image:"".concat("/roll-a-dice","/assets/images/fantasy-wallpapers.jpg"),title:"Fantasy RPG"}),s.a.createElement(b.a,null,s.a.createElement(p.a,{gutterBottom:!0,variant:"h5",component:"h2"},"Enter to the new world"),s.a.createElement(p.a,{variant:"body2",color:"textSecondary",component:"p"},"Create a new game room to start a new adventure with your friends!")),s.a.createElement(v,null,s.a.createElement(j.b,{to:I.a.ROOM_CREATE_PATH},s.a.createElement(y.a,{variant:"contained",color:"primary"},"Create new Room")))))),s.a.createElement("section",{className:t.cards},s.a.createElement(ne,{roomsAsGameMaster:o,roomsAsPlayer:c,selectedRoom:null,showSearchBar:!0,label:"Search room by name"})),s.a.createElement(H,null))}))}}]);
//# sourceMappingURL=7.1435b739.chunk.js.map