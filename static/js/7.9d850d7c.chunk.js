(this["webpackJsonproll-a-dice"]=this["webpackJsonproll-a-dice"]||[]).push([[7],{620:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n=a(621),r=a.n(n),c=a(625),i=a(37),o=a(15),l=a(33),s=a(228),u=r()({}),d=Object(i.a)(),m=Object(c.connectedRouterRedirect)({redirectPath:o.a.HOME_PATH,AuthenticatingComponent:s.a,wrapperDisplayName:"UserIsAuthenticated",authenticatedSelector:l.a.authenticatedSelector,authenticatingSelector:l.a.authenticatingSelector,redirectAction:function(e){return function(t){d.push(e),t({type:"UNAUTHED_REDIRECT",payload:{message:"User is not authenticated."}})}}});Object(c.connectedRouterRedirect)({AuthenticatingComponent:s.a,wrapperDisplayName:"UserIsNotAuthenticated",allowRedirectBack:!1,authenticatedSelector:function(e){return e.firebase.auth.isEmpty},authenticatingSelector:function(e){var t=e.firebase,a=t.auth,n=t.isInitializing;return!a.isLoaded||n},redirectPath:function(e,t){return u.getRedirectQueryParam(t)||o.a.ROOMS_PATH},redirectAction:function(e){return function(t){d.push(e),t({type:"AUTHED_REDIRECT",payload:{message:"User is not authenticated."}})}}})},622:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return c}));var n,r=a(623);!function(e){e.DICE_ROLL="DICE_ROLL"}(n||(n={}));var c={roomName:{name:"roomName",label:"Name of the Room",fullWidth:!0},diceType:{name:"diceType",label:"Allowed dice",options:[{label:r.a.D4,value:r.a.D4},{label:r.a.D6,value:r.a.D6},{label:r.a.D8,value:r.a.D8},{label:r.a.D10,value:r.a.D10},{label:r.a.D12,value:r.a.D12},{label:r.a.D20,value:r.a.D20},{label:r.a.D100,value:r.a.D100}]},description:{name:"description",label:"Room description",multiline:!0,fullWidth:!0},d4:{name:r.a.D4,label:r.a.D4},d6:{label:r.a.D6,name:r.a.D6},d8:{label:r.a.D8,name:r.a.D8},d10:{label:r.a.D10,name:r.a.D10},d12:{label:r.a.D12,name:r.a.D12},d20:{label:r.a.D20,name:r.a.D20},d100:{label:r.a.D100,name:r.a.D100}};r.a.D4,r.a.D4,r.a.D6,r.a.D6,r.a.D8,r.a.D8,r.a.D10,r.a.D10,r.a.D12,r.a.D12,r.a.D20,r.a.D20,r.a.D100,r.a.D100},623:function(e,t,a){"use strict";var n;a.d(t,"a",(function(){return n})),function(e){e.D4="d4",e.D6="d6",e.D8="d8",e.D10="d10",e.D12="d12",e.D20="d20",e.D100="d100"}(n||(n={}))},627:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(0),r=a.n(n).a.lazy((function(){return a.e(9).then(a.bind(null,650))}))},632:function(e,t,a){"use strict";a.d(t,"c",(function(){return E})),a.d(t,"a",(function(){return D})),a.d(t,"b",(function(){return y}));var n=a(99),r=a(230),c=a(0),i=a.n(c),o=a(543),l=a(598),s=a(540),u=a(541),d=a(548),m=a(706),b=a(725),f=a(542),p=a(707),h=a(729),v=a(722),g=a(611),O=Object(g.a)((function(e){return{formField:{marginBottom:e.spacing(2)},sliderFormField:{width:"100%",marginLeft:0}}})),j=function(e){var t=e.touched,a=e.error;return t&&a?i.a.createElement(o.a,null,t&&a):void 0},E=i.a.memo((function(e){var t=O();return i.a.createElement(v.a,Object.assign({},e,{component:function(e){var t=e.label,a=e.input,n=e.meta,c=n.touched,o=n.invalid,s=n.error,u=Object(r.a)(e,["label","input","meta"]);return i.a.createElement(l.a,Object.assign({variant:"outlined",label:t,placeholder:t,error:c&&o,helperText:c&&s},a,u))},className:t.formField}))})),D=(i.a.memo((function(e){var t=O();return i.a.createElement(v.a,Object.assign({},e,{type:"checkbox",component:function(e){var t=e.input,a=(e.label,e.meta),n=a.touched,c=a.error,o=e.children,l=Object(r.a)(e,["input","label","meta","children"]);return i.a.createElement(s.a,{error:n&&c},i.a.createElement(u.a,{htmlFor:"age-native-simple"},"Age"),i.a.createElement(d.a,Object.assign({variant:"outlined",native:!0},t,l,{inputProps:{name:"age",id:"age-native-simple"}}),o),j({touched:n,error:c}))},className:t.formField}))})),i.a.memo((function(e){var t=O();return i.a.createElement(v.a,Object.assign({},e,{type:"checkbox",component:function(e){var t=e.input,a=e.label;return i.a.createElement(m.a,{control:i.a.createElement(b.a,{checked:!!t.value,onChange:t.onChange}),label:a})},className:t.formField}))})),i.a.memo((function(e){var t=O();return i.a.createElement(v.a,Object.assign({},e,{type:"checkbox",component:function(e){var t=e.input,a=e.meta,r=e.options,c=e.label,o=t.name,l=t.onChange,u=a.touched,d=a.error,h=t.value,v=r.map((function(e,t){var a=e.label,r=e.value,c=h.includes(r);return i.a.createElement(m.a,{key:t,control:i.a.createElement(b.a,{checked:c,onChange:function(e){var t=Object(n.a)(h);return e.target.checked?t.push(r):t.splice(t.indexOf(r),1),l(t)},name:"".concat(o,"[").concat(t,"]"),value:r}),label:a})}));return i.a.createElement(s.a,{error:u&&!!d,component:"fieldset"},i.a.createElement(f.a,{component:"legend"},c),i.a.createElement(p.a,{row:!0},v),j({touched:u,error:d}))},className:t.formField}))}))),y=i.a.memo((function(e){var t=O();function a(e){return"".concat(e)}return i.a.createElement(v.a,Object.assign({},e,{component:function(e){var n=e.min,c=void 0===n?0:n,o=e.max,l=void 0===o?16:o,s=e.label,u=e.input,d=u.value,b=u.onChange,f=Object(r.a)(u,["value","onChange"]),p=e.meta,v=(p.touched,p.invalid,p.error,Object(r.a)(e,["min","max","label","input","meta"]));return i.a.createElement(m.a,{className:t.sliderFormField,label:s,labelPlacement:"start",control:i.a.createElement(h.a,Object.assign({defaultValue:0,getAriaValueText:a,"aria-labelledby":"number-of-dices",valueLabelDisplay:"auto",step:1,marks:!0,min:c,max:l,value:"number"===typeof d?d:0,onChange:function(e,t){return b(t)}},f,v))})},className:t.formField}))}))},719:function(e,t,a){"use strict";a.r(t);var n=a(48),r=a(58),c=a(635),i=a(620),o=Object(n.d)(Object(c.a)("EnhancedRoomList"),r.g,i.a),l=a(99),s=a(0),u=a.n(s),d=a(11),m=a(25),b=a(162),f=a(33),p=a(49),h=a(76),v=a(229),g=a(119),O=a(151),j=a(96),E=function(e){return Object(O.action)(j.a.SELECTED,e)},D=function(e){return Object(O.action)(j.a.SET_DRAWER_OPEN_VALUE,e)},y=function(e){return Object(O.action)(j.a.SET_CHAT_OPEN_VALUE,e)},w=function(e){return Object(O.action)(j.a.SET_PLAYERS_OPEN_VALUE,e)},S=function(e){return Object(O.action)(j.a.SET_DICE_ROLLING,e)},R=a(77),k=a(18),N=a(118),T=a(230),C=a(638),x=a(639),$=a(678),U=a(721),L=(a(114),a(704)),I=a(702),_=a(705),A=a(701),F=a(703),P=a(622),M=a(152),z=function(){function e(){var t=this;Object(C.a)(this,e),this.store=M.a,this.takeUntil$=new $.a,this._store$=new U.a(1),this._storeUnsubscribeFn=void 0,this._storeUnsubscribeFn=this.store.subscribe((function(){t._store$.next(t.store.getState())}))}return Object(x.a)(e,[{key:"getDiceSetForm",value:function(){return this.store$.pipe(Object(A.a)((function(e){return e.form.diceSetForm})))}},{key:"getSelectedRoomData$",value:function(){return this.store$.pipe(Object(A.a)((function(e){return e.firestore.data.selectedRoom})),Object(I.a)((function(e){return!!e})))}},{key:"getSelectedRoomDataLogs$",value:function(){return this.getSelectedRoomData$().pipe(Object(A.a)((function(e){return e.logs})))}},{key:"getLastRoomLogOnChange$",value:function(){return this.getSelectedRoomDataLogs$().pipe(Object(A.a)((function(e){return Object(l.a)(e).pop()})),Object(I.a)((function(e){return!!e})),Object(F.a)((function(e,t){return e.timestamp===t.timestamp})))}},{key:"getUserProfile$",value:function(){return this.store$.pipe(Object(A.a)((function(e){return e.firebase.profile})))}},{key:"dispatch",value:function(e){return this.store.dispatch(e)}},{key:"hostDestroyed",value:function(){this.takeUntil$.next(),this._storeUnsubscribeFn(),e.instance=null}},{key:"store$",get:function(){return this._store$.asObservable()}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}();z.instance=void 0;var B=function(){function e(t){Object(C.a)(this,e),this.firestore=t,this.diceThrow$=new $.a,this.diceBeforeThrow$=new $.a,this.diceThrowResult$=new U.a(1),this.profile=null,this.roomUid=null,this.takeUntil$=new $.a,this.storeService=z.getInstance(),this.createSubscriptions()}return Object(x.a)(e,[{key:"hostDestroyed",value:function(){this.takeUntil$.next(),e.instance=null,this.setDiceRolling(!1)}},{key:"createSubscriptions",value:function(){var e=this;this.diceBeforeThrow$.pipe(Object(L.a)(this.takeUntil$)).subscribe((function(t){e.setDiceRolling(!0)})),this.diceThrowResult$.pipe(Object(L.a)(this.takeUntil$)).subscribe((function(t){e.setDiceRolling(!1),t.emit&&e.firestoreAddNewThrow(t)})),this.performDiceThrowWhenNewDiceThrowLogAppears()}},{key:"setDiceRolling",value:function(e){this.storeService.dispatch(S(e))}},{key:"firestoreAddNewThrow",value:function(e){var t=this;if(this.roomUid){e.emit;var a=Object(T.a)(e,["emit"]),n=this.firestore.doc("".concat(p.a.ROOMS,"/").concat(this.roomUid));this.firestore.runTransaction((function(e){return e.get(n).then((function(r){var c,i={authorUid:null===(c=t.profile)||void 0===c?void 0:c.uid,payload:a,timestamp:Date.now().toString(),type:P.a.DICE_ROLL},o=[].concat(Object(l.a)(r.data().logs),[i]);return e.update(n,{logs:o})})).catch((function(e){console.log("Transaction failure:",e)}))}))}}},{key:"performDiceThrowWhenNewDiceThrowLogAppears",value:function(){var e=this;this.storeService.getLastRoomLogOnChange$().pipe(Object(I.a)((function(e){return e.type===P.a.DICE_ROLL})),Object(_.a)(this.storeService.getUserProfile$()),Object(I.a)((function(e){var t=Object(N.a)(e,2),a=t[0],n=t[1];return!!n.uid&&a.authorUid!==n.uid})),Object(L.a)(this.takeUntil$)).subscribe((function(t){var a=Object(N.a)(t,1)[0];e.diceThrow$.next(Object(k.a)({},a.payload))}))}},{key:"handleDiceSetFormChanges$",get:function(){return this.storeService.getDiceSetForm().pipe(Object(A.a)((function(e){return null===e||void 0===e?void 0:e.values})),Object(F.a)((function(e,t){return JSON.stringify(e)===JSON.stringify(t)})),Object(A.a)((function(e){return function(e){return Object.keys(e).map((function(t){return e[t]?e[t]+t:""})).filter((function(e){return!!e.length})).join("+")}(e)})),Object(L.a)(this.takeUntil$))}}],[{key:"getInstance",value:function(t){return e.instance||(e.instance=new e(t)),e.instance}}]),e}();B.instance=void 0;var G=u.a.createContext(null),H=function(e){var t=e.children,a=Object(m.useFirestore)(),n=B.getInstance(a),r=Object(d.useSelector)(f.a.userProfile),c=Object(d.useSelector)(R.a.selectedRoomUid);return Object(s.useEffect)((function(){n.profile=r}),[r]),Object(s.useEffect)((function(){n.roomUid=c||null}),[c]),Object(s.useEffect)((function(){return function(){return n.hostDestroyed()}}),[]),u.a.createElement(G.Provider,{value:n},t)},W=a(3),J=a(611),V=a(627),q=a(549),Q=a(5),Y=a(223),Z={idCanvas:"canvas",idLabel:"label",idSet:"set",idSelectorDiv:"selector_div",idInfoDiv:"info_div",useTrueRandom:!1,useShadows:!0,whiteDice:!1,noresult:!1,diceThrow$:null,diceThrowResult$:null};var K,X=Object(Q.a)((function(e){return Object(q.a)({root:{width:"100%",height:"calc(100% - ".concat(e.spacing(2),"px)"),position:"relative"},diceCanvas:{width:"100%",height:"100%",cursor:"grab"},grabbing:{cursor:"grabbing"}})}))((function(e){var t=e.classes,a=u.a.useRef(null),n=Object(s.useRef)(null),r=Object(s.useState)(!1),c=Object(N.a)(r,2),i=c[0],o=c[1],l=Object(s.useState)(!1),d=Object(N.a)(l,2),m=d[0],b=d[1],f=Object(s.useContext)(G),p=a.current&&a.current.getBoundingClientRect().width||0;Object(s.useEffect)((function(){f&&!i&&0!==p&&(window.dice_initialize(n.current,Object(k.a)({},Z,{diceThrow$:f.diceThrow$,diceThrowResult$:f.diceThrowResult$,diceBeforeThrow$:f.diceBeforeThrow$,diceSet$:f.handleDiceSetFormChanges$})),o(!0))}),[!!p,!!f]);var h=function(e){console.log({isDown:e}),b(e)};return u.a.createElement(Y.a,{elevation:3,className:t.root},u.a.createElement("div",{id:"diceCanvasContainer",ref:n,className:Object(W.a)(t.diceCanvas,m&&t.grabbing),onMouseDown:function(){return h(!0)},onMouseUp:function(){return h(!1)}},u.a.createElement("div",{ref:a,id:"canvas"})))})),ee=a(588),te=a(603),ae=a(605),ne=a(599),re=a(604),ce=a(89),ie=a(720),oe=a(623),le=a(632),se=Object(J.a)((function(e){return{inputSlider:{width:"100%",marginLeft:e.spacing(0),paddingRight:e.spacing(2),minWidth:e.spacing(40)}}}));var ue=u.a.memo(Object(ie.a)({form:"diceSetForm",initialValues:(K={},Object(ce.a)(K,oe.a.D4,0),Object(ce.a)(K,oe.a.D6,0),Object(ce.a)(K,oe.a.D8,0),Object(ce.a)(K,oe.a.D10,0),Object(ce.a)(K,oe.a.D12,0),Object(ce.a)(K,oe.a.D20,0),Object(ce.a)(K,oe.a.D100,0),K)})((function(e){var t=e.diceType,a=se();return u.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},u.a.createElement("h2",null,"Set your dices!"),u.a.createElement("div",{className:a.inputSlider},null===t||void 0===t?void 0:t.map((function(e){return u.a.createElement(le.b,Object.assign({key:e},P.b[e]))}))))}))),de=a(536),me=a(117),be=a(590);var fe=function(e){var t=e.throwResult;return u.a.createElement("article",null,u.a.createElement("h2",null,"Throw result:"),u.a.createElement(be.a,null,function(){if(!t)return"";var e={};return null===t||void 0===t||t.diceSet.forEach((function(a,n){e[a]=[].concat(Object(l.a)(e[a]||[]),[null===t||void 0===t?void 0:t.result[n]])})),Object.keys(e).map((function(t){return u.a.createElement(de.a,{key:t},u.a.createElement(me.a,{variant:"h2",component:"div"},t,": ",e[t].join(", ")))}))}()))};var pe=Object(Q.a)((function(e){return Object(q.a)({root:{display:"flex",backgroundColor:"#f4f4f280"},details:{display:"flex",flexDirection:"column"},content:{flex:"1 0 auto"},cover:{width:e.spacing(18)},playIcon:{height:38,width:38},clicable:{cursor:"pointer"}})}))((function(e){var t=e.classes,a=e.visible,n=void 0===a||a,r=Object(d.useSelector)(h.a.selectedRoom),c=Object(s.useContext)(G),i=Object(s.useState)(null),o=Object(N.a)(i,2),l=o[0],m=o[1];return Object(s.useEffect)((function(){null===c||void 0===c||c.diceThrowResult$.subscribe((function(e){return m(e)}))}),[!!c]),u.a.createElement(ee.a,{in:!!r&&n},u.a.createElement(te.a,{className:Object(W.a)(t.root,!!l&&t.clicable),onClick:function(){return m(null)}},u.a.createElement("div",{className:t.details},u.a.createElement(ae.a,{className:t.content},u.a.createElement(ne.a,{in:!l},u.a.createElement(ue,{diceType:null===r||void 0===r?void 0:r.diceType})),u.a.createElement(ne.a,{in:!!l},u.a.createElement(fe,{throwResult:l})))),u.a.createElement(re.a,{className:t.cover,image:"".concat("/roll-a-dice","/assets/images/avatar-1.jpg"),title:"Bot avatar"})))})),he=a(544),ve=a(710),ge=a(681),Oe=a.n(ge),je=a(683),Ee=a.n(je),De=a(682),ye=a.n(De),we=a(708),Se=a(709),Re=a(727),ke=a(534);var Ne=u.a.memo(Object(Q.a)((function(e){return Object(q.a)({tile:{borderRadius:e.spacing(1),marginRight:e.spacing(2),maxWidth:e.spacing(30),overflow:"hidden",padding:"0 !Important",width:"100%"},title:{color:e.palette.primary.light},titleDisable:{color:e.palette.warning.light},masterGame:{position:"absolute",zIndex:10,top:0,right:0},titleBar:{background:"linear-gradient(to top, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 70%, rgba(0,0,0,0) 100%)"}})}))((function(e){var t=e.classes,a=e.player,n=e.gameMaster;return u.a.createElement(we.a,{className:t.tile},u.a.createElement("img",{src:a.avatarUrl||a.photoURL,alt:a.displayName}),u.a.createElement(Se.a,{title:a.displayName,classes:{root:t.titleBar,title:a.connected?t.title:t.titleDisable},actionIcon:u.a.createElement(Re.a,{title:a.connected?"Online":"Offline"},u.a.createElement(ke.a,{"aria-label":"star ".concat(a.displayName)},a.connected?u.a.createElement(Oe.a,{className:t.title}):u.a.createElement(ye.a,{className:t.titleDisable})))}),n&&u.a.createElement(Re.a,{className:Object(W.a)(t.masterGame,a.connected?t.title:t.titleDisable),title:"Game Master"},u.a.createElement(ke.a,{"aria-label":"star ".concat(a.displayName)},u.a.createElement(Ee.a,null))))})));var Te=Object(Q.a)((function(e){return Object(q.a)({root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper},gridList:{height:e.spacing(20),width:"100%",flexWrap:"nowrap",transform:"translateZ(0)"}})}))((function(e){var t=e.classes,a=e.visible,n=Object(d.useSelector)(h.a.selectedRoomPlayers),r=Object(d.useSelector)(h.a.selectedRoomGameMasterProfile);return u.a.createElement(he.a,{direction:"up",in:a},u.a.createElement(ve.a,{className:t.gridList,cols:2.5},r&&u.a.createElement(ee.a,{in:!0,timeout:300},u.a.createElement(Ne,{player:r,gameMaster:!0})),n&&n.map((function(e,t){return u.a.createElement(ee.a,{in:!0,key:e.uid,timeout:1e3*t+1300},u.a.createElement(Ne,{player:e}))}))))})),Ce=a(686),xe=a.n(Ce),$e=a(687),Ue=a.n($e),Le=a(684),Ie=a.n(Le),_e=a(685),Ae=a.n(_e),Fe=a(688),Pe=a.n(Fe),Me=a(728),ze=a(724),Be=a(293),Ge=a(730),He=a(712),We=a(731);var Je=u.a.memo(Object(Q.a)((function(e){return Object(q.a)({})}))((function(e){var t=e.direction,a=void 0===t?"left":t,n=e.actions,r=u.a.useState(!1),c=Object(N.a)(r,2),i=c[0],o=c[1],l=function(){return o(!1)};return u.a.createElement(Ge.a,{ariaLabel:"SpeedDial example",icon:u.a.createElement(We.a,null),onClose:l,onOpen:function(){return o(!0)},open:i,direction:a},n.map((function(e){return u.a.createElement(He.a,{key:e.name,icon:e.icon,tooltipTitle:e.name,onClick:function(){return e.callback?e.callback(l):l()}})})))})));var Ve=Object(Q.a)((function(e){return Object(q.a)({snackbar:{top:e.spacing(8)}})}))((function(e){var t=e.classes,a=Object(d.useDispatch)(),n=(Object(d.useSelector)(Be.a.isGameMasterOfSelectedRoom),Object(d.useSelector)(R.a.drawerOpened)),r=Object(d.useSelector)(R.a.chatOpened),c=Object(d.useSelector)(R.a.playersOpened),i=u.a.useState({type:"success",open:!1,text:""}),o=Object(N.a)(i,2),l=o[0],s=o[1],m=[],b=[{icon:n?u.a.createElement(Ie.a,null):u.a.createElement(Ae.a,null),name:n?"Hide Nav":"Show Nav",callback:function(e){return a(D(!n))}},{icon:u.a.createElement(xe.a,null),name:r?"Hide chat":"Show Chat",callback:function(e){return a(y(!r))}},{icon:u.a.createElement(Ue.a,null),name:c?"Hide players":"Show players",callback:function(e){return a(w(!c))}},{icon:u.a.createElement(Pe.a,null),name:"Copy Room Url",callback:function(e){navigator.permissions.query({name:"clipboard-write"}).then((function(e){"granted"!==e.state&&"prompt"!==e.state||navigator.clipboard.writeText(window.location.href).then((function(){return s({type:"success",open:!0,text:"Room URL copied to clipboard!"})}),(function(){return s({type:"error",open:!0,text:"Upss.. there was an error"})}))}))}}].concat(m);return u.a.createElement(u.a.Fragment,null,u.a.createElement(Je,{actions:b,direction:"right"}),u.a.createElement(Me.a,{className:t.snackbar,anchorOrigin:{vertical:"top",horizontal:"right"},open:l.open,autoHideDuration:6e3,onClose:function(){return s(Object(k.a)({},l,{open:!1}))}},u.a.createElement(ze.a,{onClose:function(){return s(Object(k.a)({},l,{open:!1}))},severity:l.type},l.text)))})),qe=Object(J.a)((function(e){return{root:{position:"relative",margin:e.spacing(-6,-4),height:"calc(100% + ".concat(e.spacing(12),"px)")},diceWrapper:{},chatter:{zIndex:10,position:"fixed",bottom:e.spacing(4),right:e.spacing(2),transition:"bottom 225ms cubic-bezier(0, 0, 0.2, 1) 0ms"},chatterLower:{bottom:e.spacing(4)},speedDial:{position:"absolute",bottom:e.spacing(25),left:e.spacing(3),zIndex:10,transition:"bottom 225ms cubic-bezier(0, 0, 0.2, 1) 0ms"},speedDialLower:{bottom:e.spacing(3)},cssGrid:{height:"100%",display:"grid",gridTemplateColumns:"1fr",gridTemplateRows:"1fr 160px",rowGap:"".concat(e.spacing(2),"px"),columnGap:"".concat(e.spacing(2),"px"),padding:e.spacing(2,2,0,2)},cssItem1:{gridColumn:1,gridRow:1},cssItem2:{gridColumn:1,gridRow:2},diceDashboard:{position:"absolute",zIndex:100,top:e.spacing(3),left:e.spacing(3)}}}));function Qe(e){var t=qe(),a=Object(d.useSelector)(R.a.playersOpened),n=Object(d.useSelector)(R.a.chatOpened),r=Object(d.useSelector)(R.a.diceRolling);return u.a.createElement("section",{className:t.root},u.a.createElement("div",{className:Object(W.a)(t.chatter,!a&&t.chatterLower)},u.a.createElement(V.a,{visbile:n&&!r})),u.a.createElement("div",{className:t.cssGrid},u.a.createElement("div",{className:t.cssItem1},u.a.createElement(X,null)),u.a.createElement("div",{className:t.cssItem2},u.a.createElement(Te,{visible:a}))),u.a.createElement("nav",{className:Object(W.a)(t.speedDial,!a&&t.speedDialLower)},u.a.createElement(Ve,null)),u.a.createElement("nav",{className:t.diceDashboard},u.a.createElement(pe,{visible:!r})))}t.default=o((function(e){var t=e.match,a=Object(d.useDispatch)(),n=Object(m.useFirestore)(),r=Object(d.useSelector)(h.a.selectedRoom),c=Object(d.useSelector)(R.a.selectedRoomUid),i=Object(d.useSelector)(g.a.match),o=Object(d.useSelector)(f.a.userProfile);return Object(s.useEffect)((function(){return JSON.stringify(t)!==JSON.stringify(i)&&a(v.a.matchChange(t)),void a(E(i.params.roomId))})),Object(s.useEffect)((function(){!function(){if((null===r||void 0===r?void 0:r.players)&&o.uid&&r.gameMaster.uid!==o.uid&&-1===r.players.indexOf(o.uid)){var e=n.doc("".concat(p.a.ROOMS,"/").concat(c));n.runTransaction((function(t){return t.get(e).then((function(a){var n=[].concat(Object(l.a)(a.data().players),[o.uid]);return t.update(e,{players:n})})).catch((function(e){console.log("Transaction failure:",e)}))}))}}()}),[c,null===r||void 0===r?void 0:r.createdAt,o.uid]),Object(s.useEffect)((function(){return function(){a(E(null))}}),[]),Object(s.useEffect)((function(){a(b.a.setSelectedChat((null===r||void 0===r?void 0:r.chatUid)||null))}),[null===r||void 0===r?void 0:r.chatUid]),u.a.createElement(H,null,u.a.createElement(Qe,null))}))}}]);
//# sourceMappingURL=7.9d850d7c.chunk.js.map