(this["webpackJsonproll-a-dice"]=this["webpackJsonproll-a-dice"]||[]).push([[8],{667:function(e,a,t){"use strict";t.d(a,"a",(function(){return d}));var n=t(668),r=t.n(n),o=t(670),c=t(55),i=t(21),l=t(32),s=t(266),m=r()({}),u=Object(c.a)(),d=Object(o.connectedRouterRedirect)({redirectPath:i.a.HOME_PATH,AuthenticatingComponent:s.a,wrapperDisplayName:"UserIsAuthenticated",authenticatedSelector:l.a.isAuthenticated,authenticatingSelector:l.a.authenticatingSelector,redirectAction:function(e){return function(a){u.push(e),a({type:"UNAUTHED_REDIRECT",payload:{message:"User is not authenticated."}})}}});Object(o.connectedRouterRedirect)({AuthenticatingComponent:s.a,wrapperDisplayName:"UserIsNotAuthenticated",allowRedirectBack:!1,authenticatedSelector:function(e){return e.firebase.auth.isEmpty},authenticatingSelector:function(e){var a=e.firebase,t=a.auth,n=a.isInitializing;return!t.isLoaded||n},redirectPath:function(e,a){return m.getRedirectQueryParam(a)||i.a.ROOMS_PATH},redirectAction:function(e){return function(a){u.push(e),a({type:"AUTHED_REDIRECT",payload:{message:"User is not authenticated."}})}}})},672:function(e,a,t){"use strict";var n=t(0),r=t.n(n),o=t(18),c=t(639),i=t(732),l=t(733),s=t(729),m=t(730),u=t(731),d=t(659),b=t(139),h=t(269),p=t(594),f=t(642),g=t(647),E=t(590),v=t(11),O=t(263),y=Object(p.a)({image:{width:"100%",height:"15vh",backgroundPosition:"center",backgroundSize:"cover"}}),j=Object(E.a)(y);function R(e){var a,t=j(),n=Object(v.useSelector)(O.a.getFormCreateRoom);return r.a.createElement(f.a,{in:(null===n||void 0===n||null===(a=n.roomImage)||void 0===a?void 0:a.length)>8},(null===n||void 0===n?void 0:n.roomImage)&&r.a.createElement(g.a,{className:t.image,image:null===n||void 0===n?void 0:n.roomImage,title:"Room Image"}))}var S=Object(d.a)({form:"createRoom",validate:function(e){var a={};return[b.b.roomName.name,b.b.maxPlayers.name].forEach((function(t){e[t]||(a[t]="Required")})),e[b.b.diceType.name]&&e[b.b.diceType.name].length||(a[b.b.diceType.name]="Select at least one dice"),a}})((function(e){var a=e.handleSubmit,t=e.pristine,n=e.submitting,o=e.handleClose,c=e.invalid;return r.a.createElement("form",{onSubmit:a},r.a.createElement(R,null),r.a.createElement(s.a,{dividers:!0},r.a.createElement(h.c,b.b.roomName),r.a.createElement(h.c,b.b.roomImage),r.a.createElement(h.c,b.b.campaignTitle),r.a.createElement(h.c,b.b.description),r.a.createElement(h.c,b.b.gameMasterAvatar),r.a.createElement("div",{style:{width:"50%"}},r.a.createElement(h.c,b.b.maxPlayers)),r.a.createElement(h.a,b.b.diceType)),r.a.createElement(m.a,null,r.a.createElement(u.a,{type:"submit",color:"primary",disabled:c||t||n},"Submit"),r.a.createElement(u.a,{type:"button",onClick:o,color:"primary"},"Cancel")))}));function A(e){var a=e.open,t=e.onClose,n=e.onSubmit,s=e.initialValues,m=Object(o.a)(),u=Object(c.a)(m.breakpoints.down("xs"));return r.a.createElement(i.a,{fullScreen:u,open:a,onClose:t,"aria-labelledby":"responsive-dialog-title"},r.a.createElement(l.a,null,"Create new Room"),r.a.createElement(S,{handleClose:t,onSubmit:n,initialValues:s}))}t.d(a,"a",(function(){return A}))},712:function(e,a,t){"use strict";var n=t(1),r=t(3),o=t(0),c=(t(2),t(4)),i=t(5),l=t(24),s=o.forwardRef((function(e,a){var t=e.absolute,i=void 0!==t&&t,l=e.classes,s=e.className,m=e.component,u=void 0===m?"hr":m,d=e.flexItem,b=void 0!==d&&d,h=e.light,p=void 0!==h&&h,f=e.orientation,g=void 0===f?"horizontal":f,E=e.role,v=void 0===E?"hr"!==u?"separator":void 0:E,O=e.variant,y=void 0===O?"fullWidth":O,j=Object(r.a)(e,["absolute","classes","className","component","flexItem","light","orientation","role","variant"]);return o.createElement(u,Object(n.a)({className:Object(c.a)(l.root,s,"fullWidth"!==y&&l[y],i&&l.absolute,b&&l.flexItem,p&&l.light,"vertical"===g&&l.vertical),role:v,ref:a},j))}));a.a=Object(i.a)((function(e){return{root:{height:1,margin:0,border:"none",flexShrink:0,backgroundColor:e.palette.divider},absolute:{position:"absolute",bottom:0,left:0,width:"100%"},inset:{marginLeft:72},light:{backgroundColor:Object(l.c)(e.palette.divider,.08)},middle:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},vertical:{height:"100%",width:1},flexItem:{alignSelf:"stretch",height:"auto"}}}),{name:"MuiDivider"})(s)},735:function(e,a,t){"use strict";t.r(a);var n=t(20),r=t(78),o=t(673),c=t(667),i=Object(n.d)(Object(o.a)("EnhancedRoomList"),r.g,c.a),l=t(0),s=t.n(l),m=t(632),u=t(646),d=t(647),b=t(648),h=t(124),p=t(1),f=t(3),g=(t(2),t(4)),E=t(5),v=l.forwardRef((function(e,a){var t=e.disableSpacing,n=void 0!==t&&t,r=e.classes,o=e.className,c=Object(f.a)(e,["disableSpacing","classes","className"]);return l.createElement("div",Object(p.a)({className:Object(g.a)(r.root,o,!n&&r.spacing),ref:a},c))})),O=Object(E.a)({root:{display:"flex",alignItems:"center",padding:8},spacing:{"& > :not(:first-child)":{marginLeft:8}}},{name:"MuiCardActions"})(v),y=t(731),j=t(590),R=t(95),S=t(11),A=t(96),N=t(267),w=t(149),C=t(19),k=t(42),P=t(29),I=t(32),T=t(57),x=t(672),M=t(21);function U(){var e=Object(S.useSelector)(w.a.match).path,a=s.a.useState(!1),t=Object(k.a)(a,2),n=t[0],o=t[1],c=Object(r.f)(),i=Object(P.useFirestore)(),m=Object(S.useSelector)(I.a.userProfile);return Object(l.useEffect)((function(){e===M.a.ROOM_CREATE_PATH&&o(!0)}),[e]),s.a.createElement(x.a,{open:n,onClose:function(){o(!1),c.push(M.a.ROOMS_PATH)},onSubmit:function(e){(function(e){var a=Object(C.a)({createdAt:Date.now().toString(),gameMaster:{uid:m.uid,avatarUrl:m.avatarUrl||m.photoURL,displayName:m.displayName,email:m.email,photoURL:m.photoURL||m.avatarUrl},logs:[],players:[]},e);return i.collection(T.a.ROOMS).add(a).then((function(e){o(!1),c.push("".concat(M.a.ROOM_PATH,"/").concat(e.id))}))})(e).catch((function(e){console.log({e:e})}))}})}var _=t(636),H=t(638),D=t(259),B=t(337),L=t.n(B),G=t(585),W=t(637),z=t(594),F=t(583),J=t(640),V=t(664),q=t(641),Q=t(634),Y=t(712),K=t(335),X=t(336);var Z=s.a.memo(Object(E.a)((function(e){return Object(z.a)({root:{width:"100%",backgroundColor:e.palette.background.paper,height:"20vh",overflowY:"scroll"},item:{cursor:"pointer"},divider:{backgroundColor:"rgba(0, 0, 0, 0.12)"}})}))((function(e){var a=e.classes,t=e.roomsAsGameMaster,n=e.roomsAsPlayer,r=e.onRoomClick,o=e.selectedRoom,c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return Object.keys(e).map((function(n,c){return s.a.createElement(m.a,{key:n,in:!0,timeout:1e3*c+t},s.a.createElement(F.a,{onClick:function(){return r(n)},selected:n===o,className:a.item,button:!0,dense:!0,alignItems:"flex-start"},s.a.createElement(J.a,null,s.a.createElement(V.a,null,Object(K.a)(e[n].roomName||"No name"))),s.a.createElement(q.a,{primary:e[n].roomName||"No name",secondary:Object(X.a)(e[n].createdAt)})))}))};return s.a.createElement(Q.a,{className:a.root},c(t),s.a.createElement(m.a,{in:!!Object.keys(t).length,timeout:1e3*Object.keys(t).length+300},s.a.createElement(Y.a,{className:a.divider})),c(n,1e3*Object.keys(t).length+300))})));var $=Object(E.a)((function(e){return Object(z.a)({paper:{margin:"auto",overflow:"hidden"},searchBar:{borderBottom:"1px solid rgba(0, 0, 0, 0.12)"},searchInput:{fontSize:e.typography.fontSize},block:{display:"block"},contentWrapper:{margin:"16px 16px"}})}))((function(e){var a=e.classes,t=e.roomsAsGameMaster,n=e.roomsAsPlayer,o=e.showSearchBar,c=e.selectedRoom,i=e.label,l=Object(r.f)();return s.a.createElement(m.a,{in:!0},s.a.createElement(D.a,{className:a.paper},o&&s.a.createElement(_.a,{className:a.searchBar,position:"static",color:"default",elevation:0},s.a.createElement(W.a,null,s.a.createElement(H.a,{container:!0,spacing:2,alignItems:"center"},s.a.createElement(H.a,{item:!0},s.a.createElement(L.a,{className:a.block,color:"inherit"})),s.a.createElement(H.a,{item:!0,xs:!0},s.a.createElement(G.a,{fullWidth:!0,placeholder:i,InputProps:{disableUnderline:!0,className:a.searchInput}}))))),s.a.createElement("div",{className:a.contentWrapper},s.a.createElement(Z,{roomsAsGameMaster:t,roomsAsPlayer:n,onRoomClick:function(e){return l.push("".concat(M.a.ROOM_PATH,"/").concat(e))},selectedRoom:c}))))})),ee=Object(j.a)((function(e){return{cards:{marginBottom:"16px",maxWidth:936},media:{height:140}}}));a.default=i((function(e){var a=ee(),t=e.match,n=Object(S.useDispatch)(),r=Object(S.useSelector)(w.a.match),o=Object(S.useSelector)(A.a.userRoomsAsGameMaster)||{},c=Object(S.useSelector)(A.a.userRoomsAsPlayer)||{};return Object(l.useEffect)((function(){JSON.stringify(t)!==JSON.stringify(r)&&n(N.a.matchChange(t))})),s.a.createElement(s.a.Fragment,null,s.a.createElement("section",{className:a.cards},s.a.createElement(m.a,{in:!0},s.a.createElement(u.a,null,s.a.createElement(d.a,{className:a.media,image:"".concat("/roll-a-dice","/assets/images/fantasy-wallpapers.jpg"),title:"Fantasy RPG"}),s.a.createElement(b.a,null,s.a.createElement(h.a,{gutterBottom:!0,variant:"h5",component:"h2"},"Enter to the new world"),s.a.createElement(h.a,{variant:"body2",color:"textSecondary",component:"p"},"Create a new game room to start a new adventure with your friends!")),s.a.createElement(O,null,s.a.createElement(R.b,{to:M.a.ROOM_CREATE_PATH},s.a.createElement(y.a,{variant:"contained",color:"primary"},"Create new Room")))))),s.a.createElement("section",{className:a.cards},s.a.createElement($,{roomsAsGameMaster:o,roomsAsPlayer:c,selectedRoom:null,showSearchBar:!0,label:"Search room by name"})),s.a.createElement(U,null))}))}}]);
//# sourceMappingURL=8.1206dc65.chunk.js.map