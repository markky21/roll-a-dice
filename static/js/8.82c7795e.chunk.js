(this["webpackJsonproll-a-dice"]=this["webpackJsonproll-a-dice"]||[]).push([[8],{619:function(e,a,t){"use strict";t.d(a,"a",(function(){return d}));var n=t(620),r=t.n(n),c=t(622),o=t(37),l=t(15),i=t(33),m=t(228),u=r()({}),s=Object(o.a)(),d=Object(c.connectedRouterRedirect)({redirectPath:l.a.HOME_PATH,AuthenticatingComponent:m.a,wrapperDisplayName:"UserIsAuthenticated",authenticatedSelector:i.a.authenticatedSelector,authenticatingSelector:i.a.authenticatingSelector,redirectAction:function(e){return function(a){s.push(e),a({type:"UNAUTHED_REDIRECT",payload:{message:"User is not authenticated."}})}}});Object(c.connectedRouterRedirect)({AuthenticatingComponent:m.a,wrapperDisplayName:"UserIsNotAuthenticated",allowRedirectBack:!1,authenticatedSelector:function(e){return e.firebase.auth.isEmpty},authenticatingSelector:function(e){var a=e.firebase,t=a.auth,n=a.isInitializing;return!t.isLoaded||n},redirectPath:function(e,a){return u.getRedirectQueryParam(a)||l.a.ROOMS_PATH},redirectAction:function(e){return function(a){s.push(e),a({type:"AUTHED_REDIRECT",payload:{message:"User is not authenticated."}})}}})},632:function(e,a,t){"use strict";var n,r;!function(e){e.D4="d4",e.D6="d6",e.D8="d8",e.D10="d10",e.D12="d12",e.D20="d20",e.D100="d100"}(n||(n={})),t.d(a,"a",(function(){return r})),t.d(a,"b",(function(){return c})),function(e){e.DICE_ROLL="DICE_ROLL"}(r||(r={}));var c={roomName:{name:"roomName",label:"Name of the Room",fullWidth:!0},diceType:{name:"diceType",label:"Allowed dice",options:[{label:n.D4,value:n.D4},{label:n.D6,value:n.D6},{label:n.D8,value:n.D8},{label:n.D10,value:n.D10},{label:n.D12,value:n.D12},{label:n.D20,value:n.D20},{label:n.D100,value:n.D100}]},description:{name:"description",label:"Room description",multiline:!0,fullWidth:!0}};n.D4,n.D4,n.D6,n.D6,n.D8,n.D8,n.D10,n.D10,n.D12,n.D12,n.D20,n.D20,n.D100,n.D100},720:function(e,a,t){"use strict";t.r(a);var n=t(48),r=t(58),c=t(631),o=t(619),l=Object(n.d)(Object(c.a)("EnhancedRoomList"),r.g,o.a),i=t(0),m=t.n(i),u=t(588),s=t(602),d=t(603),p=t(604),b=t(117),h=t(715),f=t(712),E=t(610),v=t(74),O=t(11),g=t(76),y=t(229),j=t(119),D=t(18),R=t(118),N=t(549),A=t(14),S=t(5),k=t(595),C=t(713),w=t(714),T=t(710),P=t(711),x=t(716),M=t(632),U=t(99),_=t(230),I=t(543),F=t(598),H=t(540),L=t(541),B=t(548),G=t(708),W=t(722),J=t(542),z=t(709),V=t(726),q=t(719),Q=Object(E.a)((function(e){return{formField:{marginBottom:"16px"}}})),Y=function(e){var a=e.touched,t=e.error;return a&&t?m.a.createElement(I.a,null,a&&t):void 0},K=m.a.memo((function(e){var a=Q();return m.a.createElement(q.a,Object.assign({},e,{component:function(e){var a=e.label,t=e.input,n=e.meta,r=n.touched,c=n.invalid,o=n.error,l=Object(_.a)(e,["label","input","meta"]);return m.a.createElement(F.a,Object.assign({variant:"outlined",label:a,placeholder:a,error:r&&c,helperText:r&&o},t,l))},className:a.formField}))})),X=(m.a.memo((function(e){var a=Q();return m.a.createElement(q.a,Object.assign({},e,{type:"checkbox",component:function(e){var a=e.input,t=(e.label,e.meta),n=t.touched,r=t.error,c=e.children,o=Object(_.a)(e,["input","label","meta","children"]);return m.a.createElement(H.a,{error:n&&r},m.a.createElement(L.a,{htmlFor:"age-native-simple"},"Age"),m.a.createElement(B.a,Object.assign({variant:"outlined",native:!0},a,o,{inputProps:{name:"age",id:"age-native-simple"}}),c),Y({touched:n,error:r}))},className:a.formField}))})),m.a.memo((function(e){var a=Q();return m.a.createElement(q.a,Object.assign({},e,{type:"checkbox",component:function(e){var a=e.input,t=e.label;return m.a.createElement(G.a,{control:m.a.createElement(W.a,{checked:!!a.value,onChange:a.onChange}),label:t})},className:a.formField}))})),m.a.memo((function(e){var a=Q();return m.a.createElement(q.a,Object.assign({},e,{type:"checkbox",component:function(e){var a=e.input,t=e.meta,n=e.options,r=e.label,c=a.name,o=a.onChange,l=t.touched,i=t.error,u=a.value,s=n.map((function(e,a){var t=e.label,n=e.value,r=u.includes(n);return m.a.createElement(G.a,{key:a,control:m.a.createElement(W.a,{checked:r,onChange:function(e){var a=Object(U.a)(u);return e.target.checked?a.push(n):a.splice(a.indexOf(n),1),o(a)},name:"".concat(c,"[").concat(a,"]"),value:n}),label:t})}));return m.a.createElement(H.a,{error:l&&!!i,component:"fieldset"},m.a.createElement(J.a,{component:"legend"},r),m.a.createElement(z.a,{row:!0},s),Y({touched:l,error:i}))},className:a.formField}))})));m.a.memo((function(e){var a=Q();function t(e){return"".concat(e)}return m.a.createElement(q.a,Object.assign({},e,{component:function(e){var a=e.label,n=(e.input,e.meta);n.touched,n.invalid,n.error,Object(_.a)(e,["label","input","meta"]);return m.a.createElement(m.a.Fragment,null,m.a.createElement(G.a,{control:m.a.createElement(V.a,{defaultValue:1,getAriaValueText:t,"aria-labelledby":"number-of-dices",valueLabelDisplay:"auto",step:1,marks:!0,min:0,max:16}),label:a}))},className:a.formField}))}));var Z=Object(x.a)({form:"createRoom",validate:function(e){var a={};return[M.b.roomName.name].forEach((function(t){e[t]||(a[t]="Required")})),e[M.b.diceType.name]&&e[M.b.diceType.name].length||(a[M.b.diceType.name]="Select at least one dice"),a}})((function(e){var a=e.handleSubmit,t=e.pristine,n=e.submitting,r=e.handleClose,c=e.invalid;return m.a.createElement("form",{onSubmit:a},m.a.createElement(T.a,{dividers:!0},m.a.createElement("div",null,m.a.createElement(K,M.b.roomName)),m.a.createElement("div",null,m.a.createElement(K,M.b.description)),m.a.createElement("div",null,m.a.createElement(X,M.b.diceType))),m.a.createElement(P.a,null,m.a.createElement(f.a,{type:"submit",color:"primary",disabled:c||t||n},"Submit"),m.a.createElement(f.a,{type:"button",onClick:r,color:"primary"},"Cancel")))})),$=t(15),ee=t(25),ae=t(49),te=t(33);var ne=Object(S.a)((function(e){return Object(N.a)({})}))((function(e){var a=Object(O.useSelector)(j.a.match).path,t=m.a.useState(!1),n=Object(R.a)(t,2),c=n[0],o=n[1],l=Object(A.a)(),u=Object(k.a)(l.breakpoints.down("xs")),s=Object(r.f)(),d=Object(ee.useFirestore)(),p=Object(O.useSelector)(te.a.userProfile),b=function(){o(!1),s.push($.a.ROOMS_PATH)};return Object(i.useEffect)((function(){a===$.a.ROOM_CREATE_PATH&&o(!0)}),[a]),m.a.createElement(C.a,{fullScreen:u,open:c,onClose:b,"aria-labelledby":"responsive-dialog-title"},m.a.createElement(w.a,null,"Create new Room"),m.a.createElement(Z,{handleClose:b,onSubmit:function(e){(function(e){var a=Object(D.a)({createdAt:Date.now().toString(),gameMaster:{uid:p.uid,avatarUrl:p.avatarUrl||p.photoURL,displayName:p.displayName,email:p.email,photoURL:p.photoURL||p.avatarUrl},logs:[],players:[]},e);return d.collection(ae.a.ROOMS).add(a).then((function(e){o(!1),s.push("".concat($.a.ROOM_PATH,"/").concat(e.id))}))})(e).catch((function(e){console.log({e:e})}))}}))})),re=t(592),ce=t(594),oe=t(222),le=t(297),ie=t.n(le),me=t(593),ue=t(536),se=t(596),de=t(614),pe=t(597),be=t(590),he=t(686),fe=t(295),Ee=t(296);var ve=m.a.memo(Object(S.a)((function(e){return Object(N.a)({root:{width:"100%",backgroundColor:e.palette.background.paper,height:"20vh",overflowY:"scroll"},item:{cursor:"pointer"},divider:{backgroundColor:"rgba(0, 0, 0, 0.12)"}})}))((function(e){var a=e.classes,t=e.roomsAsGameMaster,n=e.roomsAsPlayer,r=e.onRoomClick,c=e.selectedRoom,o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return Object.keys(e).map((function(n,o){return m.a.createElement(u.a,{key:n,in:!0,timeout:1e3*o+t},m.a.createElement(ue.a,{onClick:function(){return r(n)},selected:n===c,className:a.item,button:!0,dense:!0,alignItems:"flex-start"},m.a.createElement(se.a,null,m.a.createElement(de.a,null,Object(fe.a)(e[n].roomName||"No name"))),m.a.createElement(pe.a,{primary:e[n].roomName||"No name",secondary:Object(Ee.a)(e[n].createdAt)})))}))};return m.a.createElement(be.a,{className:a.root},o(t),m.a.createElement(u.a,{in:!!Object.keys(t).length,timeout:1e3*Object.keys(t).length+300},m.a.createElement(he.a,{className:a.divider})),o(n,1e3*Object.keys(t).length+300))})));var Oe=Object(S.a)((function(e){return Object(N.a)({paper:{margin:"auto",overflow:"hidden"},searchBar:{borderBottom:"1px solid rgba(0, 0, 0, 0.12)"},searchInput:{fontSize:e.typography.fontSize},block:{display:"block"},contentWrapper:{margin:"16px 16px"}})}))((function(e){var a=e.classes,t=e.roomsAsGameMaster,n=e.roomsAsPlayer,c=e.showSearchBar,o=e.selectedRoom,l=e.label,i=Object(r.f)();return m.a.createElement(u.a,{in:!0},m.a.createElement(oe.a,{className:a.paper},c&&m.a.createElement(re.a,{className:a.searchBar,position:"static",color:"default",elevation:0},m.a.createElement(me.a,null,m.a.createElement(ce.a,{container:!0,spacing:2,alignItems:"center"},m.a.createElement(ce.a,{item:!0},m.a.createElement(ie.a,{className:a.block,color:"inherit"})),m.a.createElement(ce.a,{item:!0,xs:!0},m.a.createElement(F.a,{fullWidth:!0,placeholder:l,InputProps:{disableUnderline:!0,className:a.searchInput}}))))),m.a.createElement("div",{className:a.contentWrapper},m.a.createElement(ve,{roomsAsGameMaster:t,roomsAsPlayer:n,onRoomClick:function(e){return i.push("".concat($.a.ROOM_PATH,"/").concat(e))},selectedRoom:o}))))})),ge=Object(E.a)((function(e){return{cards:{marginBottom:"16px",maxWidth:936},media:{height:140}}}));a.default=l((function(e){var a=ge(),t=e.match,n=Object(O.useDispatch)(),r=Object(O.useSelector)(j.a.match),c=Object(O.useSelector)(g.a.userRoomsAsGameMaster)||{},o=Object(O.useSelector)(g.a.userRoomsAsPlayer)||{};return Object(i.useEffect)((function(){JSON.stringify(t)!==JSON.stringify(r)&&n(y.a.matchChange(t))})),m.a.createElement(m.a.Fragment,null,m.a.createElement("section",{className:a.cards},m.a.createElement(u.a,{in:!0},m.a.createElement(s.a,null,m.a.createElement(d.a,{className:a.media,image:"".concat("/roll-a-dice","/assets/images/fantasy-wallpapers.jpg"),title:"Fantasy RPG"}),m.a.createElement(p.a,null,m.a.createElement(b.a,{gutterBottom:!0,variant:"h5",component:"h2"},"Enter to the new world"),m.a.createElement(b.a,{variant:"body2",color:"textSecondary",component:"p"},"Create a new game room to start a new adventure with your friends!")),m.a.createElement(h.a,null,m.a.createElement(v.b,{to:$.a.ROOM_CREATE_PATH},m.a.createElement(f.a,{variant:"contained",color:"primary"},"Create new Room")))))),m.a.createElement("section",{className:a.cards},m.a.createElement(Oe,{roomsAsGameMaster:c,roomsAsPlayer:o,selectedRoom:null,showSearchBar:!0,label:"Search room by name"})),m.a.createElement(ne,null))}))}}]);
//# sourceMappingURL=8.82c7795e.chunk.js.map