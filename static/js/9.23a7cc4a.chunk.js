(this["webpackJsonproll-a-dice"]=this["webpackJsonproll-a-dice"]||[]).push([[9],{685:function(e,a,t){"use strict";t.d(a,"a",(function(){return d}));var n=t(686),r=t.n(n),c=t(689),o=t(54),i=t(23),l=t(33),s=t(278),m=r()({}),u=Object(o.a)(),d=Object(c.connectedRouterRedirect)({redirectPath:i.a.HOME_PATH,AuthenticatingComponent:s.a,wrapperDisplayName:"UserIsAuthenticated",authenticatedSelector:l.a.isAuthenticated,authenticatingSelector:l.a.authenticatingSelector,redirectAction:function(e){return function(a){u.push(e),a({type:"UNAUTHED_REDIRECT",payload:{message:"User is not authenticated."}})}}});Object(c.connectedRouterRedirect)({AuthenticatingComponent:s.a,wrapperDisplayName:"UserIsNotAuthenticated",allowRedirectBack:!1,authenticatedSelector:function(e){return e.firebase.auth.isEmpty},authenticatingSelector:function(e){var a=e.firebase,t=a.auth,n=a.isInitializing;return!t.isLoaded||n},redirectPath:function(e,a){return m.getRedirectQueryParam(a)||i.a.ROOMS_PATH},redirectAction:function(e){return function(a){u.push(e),a({type:"AUTHED_REDIRECT",payload:{message:"User is not authenticated."}})}}})},691:function(e,a,t){"use strict";var n=t(0),r=t.n(n),c=t(20),o=t(654),i=t(774),l=t(775),s=t(771),m=t(772),u=t(773),d=t(674),p=t(111),b=t(282),h=t(609),E=t(657),f=t(662),g=t(605),O=t(11),v=t(276),y=Object(h.a)({image:{width:"100%",height:"15vh",backgroundPosition:"center",backgroundSize:"cover"}}),j=Object(g.a)(y);function R(e){var a,t=j(),n=Object(O.useSelector)(v.a.getFormCreateRoom);return r.a.createElement(E.a,{in:(null===n||void 0===n||null===(a=n.roomImage)||void 0===a?void 0:a.length)>8},(null===n||void 0===n?void 0:n.roomImage)&&r.a.createElement(f.a,{className:t.image,image:null===n||void 0===n?void 0:n.roomImage,title:"Room Image"}))}var S=Object(d.a)({form:"createRoom",validate:function(e){var a={};return[p.b.roomName.name,p.b.maxPlayers.name].forEach((function(t){e[t]||(a[t]="Required")})),e[p.b.diceType.name]&&e[p.b.diceType.name].length||(a[p.b.diceType.name]="Select at least one dice"),a}})((function(e){var a=e.handleSubmit,t=e.pristine,n=e.submitting,c=e.handleClose,o=e.invalid;return r.a.createElement("form",{onSubmit:a},r.a.createElement(R,null),r.a.createElement(s.a,{dividers:!0},r.a.createElement(b.c,p.b.roomName),r.a.createElement(b.c,p.b.roomImage),r.a.createElement(b.c,p.b.campaignTitle),r.a.createElement(b.c,p.b.description),r.a.createElement(b.c,p.b.gameMasterAvatar),r.a.createElement("div",{style:{width:"50%"}},r.a.createElement(b.c,p.b.maxPlayers)),r.a.createElement(b.a,p.b.diceType)),r.a.createElement(m.a,null,r.a.createElement(u.a,{type:"submit",color:"primary",disabled:o||t||n},"Submit"),r.a.createElement(u.a,{type:"button",onClick:c,color:"primary"},"Cancel")))}));function A(e){var a=e.open,t=e.onClose,n=e.onSubmit,s=e.initialValues,m=Object(c.a)(),u=Object(o.a)(m.breakpoints.down("xs"));return r.a.createElement(i.a,{fullScreen:u,open:a,onClose:t,"aria-labelledby":"responsive-dialog-title"},r.a.createElement(l.a,null,"Create new Room"),r.a.createElement(S,{handleClose:t,onSubmit:n,initialValues:s}))}t.d(a,"a",(function(){return A}))},779:function(e,a,t){"use strict";t.r(a);var n=t(22),r=t(81),c=t(692),o=t(685),i=Object(n.d)(Object(c.a)("EnhancedRoomList"),r.g,o.a),l=t(0),s=t.n(l),m=t(647),u=t(661),d=t(662),p=t(663),b=t(130),h=t(1),E=t(3),f=(t(2),t(4)),g=t(5),O=l.forwardRef((function(e,a){var t=e.disableSpacing,n=void 0!==t&&t,r=e.classes,c=e.className,o=Object(E.a)(e,["disableSpacing","classes","className"]);return l.createElement("div",Object(h.a)({className:Object(f.a)(r.root,c,!n&&r.spacing),ref:a},o))})),v=Object(g.a)({root:{display:"flex",alignItems:"center",padding:8},spacing:{"& > :not(:first-child)":{marginLeft:8}}},{name:"MuiCardActions"})(O),y=t(773),j=t(605),R=t(102),S=t(11),A=t(101),N=t(280),C=t(154),w=t(18),k=t(48),P=t(31),T=t(33),I=t(57),M=t(691),U=t(23);function x(){var e=Object(S.useSelector)(C.a.match).path,a=s.a.useState(!1),t=Object(k.a)(a,2),n=t[0],c=t[1],o=Object(r.f)(),i=Object(P.useFirestore)(),m=Object(S.useSelector)(T.a.userProfile);return Object(l.useEffect)((function(){e===U.a.ROOM_CREATE_PATH&&c(!0)}),[e]),s.a.createElement(M.a,{open:n,onClose:function(){c(!1),o.push(U.a.ROOMS_PATH)},onSubmit:function(e){(function(e){var a=Object(w.a)({createdAt:Date.now().toString(),gameMaster:{uid:m.uid,avatarUrl:m.avatarUrl||m.photoURL,displayName:m.displayName,email:m.email,photoURL:m.photoURL||m.avatarUrl},logs:[],players:[]},e);return i.collection(I.a.ROOMS).add(a).then((function(e){c(!1),o.push("".concat(U.a.ROOM_PATH,"/").concat(e.id))}))})(e).catch((function(e){console.log({e:e})}))}})}var _=t(651),H=t(653),D=t(271),B=t(349),G=t.n(B),L=t(600),F=t(652),z=t(609),J=t(598),W=t(655),V=t(679),q=t(656),Q=t(649),Y=t(742),K=t(348),X=t(279);var Z=s.a.memo(Object(g.a)((function(e){return Object(z.a)({root:{width:"100%",backgroundColor:e.palette.background.paper,height:"20vh",overflowY:"scroll"},item:{cursor:"pointer"},divider:{backgroundColor:"rgba(0, 0, 0, 0.12)"}})}))((function(e){var a=e.classes,t=e.roomsAsGameMaster,n=e.roomsAsPlayer,r=e.onRoomClick,c=e.selectedRoom,o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return Object.keys(e).map((function(n,o){return s.a.createElement(m.a,{key:n,in:!0,timeout:1e3*o+t},s.a.createElement(J.a,{onClick:function(){return r(n)},selected:n===c,className:a.item,button:!0,dense:!0,alignItems:"flex-start"},s.a.createElement(W.a,null,s.a.createElement(V.a,null,Object(K.a)(e[n].roomName||"No name"))),s.a.createElement(q.a,{primary:e[n].roomName||"No name",secondary:X.a.timeStampToFormattedDate(e[n].createdAt)})))}))};return s.a.createElement(Q.a,{className:a.root},o(t),s.a.createElement(m.a,{in:!!Object.keys(t).length,timeout:1e3*Object.keys(t).length+300},s.a.createElement(Y.a,{className:a.divider})),o(n,1e3*Object.keys(t).length+300))})));var $=Object(g.a)((function(e){return Object(z.a)({paper:{margin:"auto",overflow:"hidden"},searchBar:{borderBottom:"1px solid rgba(0, 0, 0, 0.12)"},searchInput:{fontSize:e.typography.fontSize},block:{display:"block"},contentWrapper:{margin:"16px 16px"}})}))((function(e){var a=e.classes,t=e.roomsAsGameMaster,n=e.roomsAsPlayer,c=e.showSearchBar,o=e.selectedRoom,i=e.label,l=Object(r.f)();return s.a.createElement(m.a,{in:!0},s.a.createElement(D.a,{className:a.paper},c&&s.a.createElement(_.a,{className:a.searchBar,position:"static",color:"default",elevation:0},s.a.createElement(F.a,null,s.a.createElement(H.a,{container:!0,spacing:2,alignItems:"center"},s.a.createElement(H.a,{item:!0},s.a.createElement(G.a,{className:a.block,color:"inherit"})),s.a.createElement(H.a,{item:!0,xs:!0},s.a.createElement(L.a,{fullWidth:!0,placeholder:i,InputProps:{disableUnderline:!0,className:a.searchInput}}))))),s.a.createElement("div",{className:a.contentWrapper},s.a.createElement(Z,{roomsAsGameMaster:t,roomsAsPlayer:n,onRoomClick:function(e){return l.push("".concat(U.a.ROOM_PATH,"/").concat(e))},selectedRoom:o}))))})),ee=Object(j.a)((function(e){return{cards:{marginBottom:"16px",maxWidth:936},media:{height:140}}}));a.default=i((function(e){var a=ee(),t=e.match,n=Object(S.useDispatch)(),r=Object(S.useSelector)(C.a.match),c=Object(S.useSelector)(A.a.userRoomsAsGameMaster)||{},o=Object(S.useSelector)(A.a.userRoomsAsPlayer)||{};return Object(l.useEffect)((function(){JSON.stringify(t)!==JSON.stringify(r)&&n(N.a.matchChange(t))})),s.a.createElement(s.a.Fragment,null,s.a.createElement("section",{className:a.cards},s.a.createElement(m.a,{in:!0},s.a.createElement(u.a,null,s.a.createElement(d.a,{className:a.media,image:"".concat("/roll-a-dice","/assets/images/fantasy-wallpapers.jpg"),title:"Fantasy RPG"}),s.a.createElement(p.a,null,s.a.createElement(b.a,{gutterBottom:!0,variant:"h5",component:"h2"},"Enter to the new world"),s.a.createElement(b.a,{variant:"body2",color:"textSecondary",component:"p"},"Create a new game room to start a new adventure with your friends!")),s.a.createElement(v,null,s.a.createElement(R.b,{to:U.a.ROOM_CREATE_PATH},s.a.createElement(y.a,{variant:"contained",color:"primary"},"Create new Room")))))),s.a.createElement("section",{className:a.cards},s.a.createElement($,{roomsAsGameMaster:c,roomsAsPlayer:o,selectedRoom:null,showSearchBar:!0,label:"Search room by name"})),s.a.createElement(x,null))}))}}]);
//# sourceMappingURL=9.23a7cc4a.chunk.js.map