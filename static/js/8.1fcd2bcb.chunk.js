(this["webpackJsonpreact-redux-firebase-typescript-example"]=this["webpackJsonpreact-redux-firebase-typescript-example"]||[]).push([[8],{628:function(e,a,t){"use strict";t.d(a,"a",(function(){return d}));var n=t(629),r=t.n(n),c=t(631),o=t(40),l=t(16),i=t(36),s=t(230),m=r()({}),u=Object(o.a)(),d=Object(c.connectedRouterRedirect)({redirectPath:l.a.HOME_PATH,AuthenticatingComponent:s.a,wrapperDisplayName:"UserIsAuthenticated",authenticatedSelector:i.a.authenticatedSelector,authenticatingSelector:i.a.authenticatingSelector,redirectAction:function(e){return function(a){u.push(e),a({type:"UNAUTHED_REDIRECT",payload:{message:"User is not authenticated."}})}}});Object(c.connectedRouterRedirect)({AuthenticatingComponent:s.a,wrapperDisplayName:"UserIsNotAuthenticated",allowRedirectBack:!1,authenticatedSelector:function(e){return e.firebase.auth.isEmpty},authenticatingSelector:function(e){var a=e.firebase,t=a.auth,n=a.isInitializing;return!t.isLoaded||n},redirectPath:function(e,a){return m.getRedirectQueryParam(a)||l.a.ROOMS_PATH},redirectAction:function(e){return function(a){u.push(e),a({type:"AUTHED_REDIRECT",payload:{message:"User is not authenticated."}})}}})},641:function(e,a,t){"use strict";var n,r;!function(e){e.D4="d4",e.D6="d6",e.D8="d8",e.D10="d10",e.D12="d12",e.D20="d20",e.D100="d100"}(n||(n={})),t.d(a,"a",(function(){return r})),t.d(a,"b",(function(){return c})),function(e){e.DICE_ROLL="DICE_ROLL"}(r||(r={}));var c={roomName:{name:"roomName",label:"Name of the Room",fullWidth:!0},diceType:{name:"diceType",label:"Allowed dice",options:[{label:n.D4,value:n.D4},{label:n.D6,value:n.D6},{label:n.D8,value:n.D8},{label:n.D10,value:n.D10},{label:n.D12,value:n.D12},{label:n.D20,value:n.D20},{label:n.D100,value:n.D100}]},description:{name:"description",label:"Room description",multiline:!0,fullWidth:!0}};n.D4,n.D4,n.D6,n.D6,n.D8,n.D8,n.D10,n.D10,n.D12,n.D12,n.D20,n.D20,n.D100,n.D100},729:function(e,a,t){"use strict";t.r(a);var n=t(51),r=t(61),c=t(640),o=t(628),l=Object(n.d)(Object(c.a)("EnhancedRoomList"),r.g,o.a),i=t(0),s=t.n(i),m=t(597),u=t(611),d=t(612),p=t(613),b=t(120),h=t(724),f=t(721),E=t(619),O=t(79),v=t(12),g=t(81),y=t(231),D=t(122),j=t(19),R=t(121),A=t(558),N=t(15),S=t(6),C=t(604),k=t(722),w=t(723),T=t(719),P=t(720),x=t(725),M=t(641),_=t(103),I=t(232),U=t(552),H=t(607),B=t(549),L=(t(550),t(557),t(717)),F=t(731),G=t(551),W=t(718),J=(t(735),t(728)),z=Object(E.a)((function(e){return{formField:{marginBottom:"16px"}}})),q=function(e){var a=e.touched,t=e.error;return a&&t?s.a.createElement(U.a,null,a&&t):void 0},Q=function(e){var a=z();return s.a.createElement(J.a,Object.assign({},e,{component:function(e){var a=e.label,t=e.input,n=e.meta,r=n.touched,c=n.invalid,o=n.error,l=Object(I.a)(e,["label","input","meta"]);return s.a.createElement(H.a,Object.assign({variant:"outlined",label:a,placeholder:a,error:r&&c,helperText:r&&o},t,l))},className:a.formField}))},Y=function(e){var a=z();return s.a.createElement(J.a,Object.assign({},e,{type:"checkbox",component:function(e){var a=e.input,t=e.meta,n=e.options,r=e.label,c=a.name,o=a.onChange,l=t.touched,i=t.error,m=a.value,u=n.map((function(e,a){var t=e.label,n=e.value,r=m.includes(n);return s.a.createElement(L.a,{key:a,control:s.a.createElement(F.a,{checked:r,onChange:function(e){var a=Object(_.a)(m);return e.target.checked?a.push(n):a.splice(a.indexOf(n),1),o(a)},name:"".concat(c,"[").concat(a,"]"),value:n}),label:t})}));return s.a.createElement(B.a,{error:l&&!!i,component:"fieldset"},s.a.createElement(G.a,{component:"legend"},r),s.a.createElement(W.a,{row:!0},u),q({touched:l,error:i}))},className:a.formField}))};var K=Object(x.a)({form:"createRoom",validate:function(e){var a={};return[M.b.roomName.name].forEach((function(t){e[t]||(a[t]="Required")})),e[M.b.diceType.name]&&e[M.b.diceType.name].length||(a[M.b.diceType.name]="Select at least one dice"),a}})((function(e){var a=e.handleSubmit,t=e.pristine,n=e.submitting,r=e.handleClose,c=e.invalid;return s.a.createElement("form",{onSubmit:a},s.a.createElement(T.a,{dividers:!0},s.a.createElement("div",null,s.a.createElement(Q,M.b.roomName)),s.a.createElement("div",null,s.a.createElement(Q,M.b.description)),s.a.createElement("div",null,s.a.createElement(Y,M.b.diceType))),s.a.createElement(P.a,null,s.a.createElement(f.a,{type:"submit",color:"primary",disabled:c||t||n},"Submit"),s.a.createElement(f.a,{type:"button",onClick:r,color:"primary"},"Cancel")))})),V=t(16),X=t(27),Z=t(52),$=t(36);var ee=Object(S.a)((function(e){return Object(A.a)({})}))((function(e){var a=Object(v.useSelector)(D.a.match).path,t=s.a.useState(!1),n=Object(R.a)(t,2),c=n[0],o=n[1],l=Object(N.a)(),m=Object(C.a)(l.breakpoints.down("xs")),u=Object(r.f)(),d=Object(X.useFirestore)(),p=Object(v.useSelector)($.a.userProfile),b=function(){o(!1),u.push(V.a.ROOMS_PATH)};return Object(i.useEffect)((function(){a===V.a.ROOM_CREATE_PATH&&o(!0)}),[a]),s.a.createElement(k.a,{fullScreen:m,open:c,onClose:b,"aria-labelledby":"responsive-dialog-title"},s.a.createElement(w.a,null,"Create new Room"),s.a.createElement(K,{handleClose:b,onSubmit:function(e){(function(e){var a=Object(j.a)({createdAt:Date.now().toString(),gameMaster:{uid:p.uid,avatarUrl:p.avatarUrl,displayName:p.displayName,email:p.email,photoURL:p.photoURL},logs:[],players:[]},e);return d.collection(Z.a.ROOMS).add(a).then((function(e){o(!1),u.push("".concat(V.a.ROOM_PATH,"/").concat(e.id))}))})(e).catch((function(e){console.log({e:e})}))}}))})),ae=t(601),te=t(603),ne=t(224),re=t(299),ce=t.n(re),oe=t(602),le=t(545),ie=t(605),se=t(623),me=t(606),ue=t(599),de=t(695),pe=t(297),be=t(298);var he=Object(S.a)((function(e){return Object(A.a)({root:{width:"100%",backgroundColor:e.palette.background.paper,height:"20vh",overflowY:"scroll"},item:{cursor:"pointer"},divider:{backgroundColor:"rgba(0, 0, 0, 0.12)"}})}))((function(e){var a=e.classes,t=e.roomsAsGameMaster,n=e.roomsAsPlayer,r=e.onRoomClick,c=e.selectedRoom,o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return Object.keys(e).map((function(n,o){return s.a.createElement(m.a,{key:n,in:!0,timeout:1e3*o+t},s.a.createElement(le.a,{onClick:function(){return r(n)},selected:n===c,className:a.item,button:!0,dense:!0,alignItems:"flex-start"},s.a.createElement(ie.a,null,s.a.createElement(se.a,null,Object(pe.a)(e[n].roomName||"No name"))),s.a.createElement(me.a,{primary:e[n].roomName||"No name",secondary:Object(be.a)(e[n].createdAt)})))}))};return s.a.createElement(ue.a,{className:a.root},o(t),s.a.createElement(m.a,{in:!!Object.keys(t).length,timeout:1e3*Object.keys(t).length+300},s.a.createElement(de.a,{className:a.divider})),o(n,1e3*Object.keys(t).length+300))}));var fe=Object(S.a)((function(e){return Object(A.a)({paper:{margin:"auto",overflow:"hidden"},searchBar:{borderBottom:"1px solid rgba(0, 0, 0, 0.12)"},searchInput:{fontSize:e.typography.fontSize},block:{display:"block"},contentWrapper:{margin:"16px 16px"}})}))((function(e){var a=e.classes,t=e.roomsAsGameMaster,n=e.roomsAsPlayer,c=e.showSearchBar,o=e.selectedRoom,l=e.label,i=Object(r.f)();return s.a.createElement(m.a,{in:!0},s.a.createElement(ne.a,{className:a.paper},c&&s.a.createElement(ae.a,{className:a.searchBar,position:"static",color:"default",elevation:0},s.a.createElement(oe.a,null,s.a.createElement(te.a,{container:!0,spacing:2,alignItems:"center"},s.a.createElement(te.a,{item:!0},s.a.createElement(ce.a,{className:a.block,color:"inherit"})),s.a.createElement(te.a,{item:!0,xs:!0},s.a.createElement(H.a,{fullWidth:!0,placeholder:l,InputProps:{disableUnderline:!0,className:a.searchInput}}))))),s.a.createElement("div",{className:a.contentWrapper},s.a.createElement(he,{roomsAsGameMaster:t,roomsAsPlayer:n,onRoomClick:function(e){return i.push("".concat(V.a.ROOM_PATH,"/").concat(e))},selectedRoom:o}))))})),Ee=Object(E.a)((function(e){return{cards:{marginBottom:"16px",maxWidth:936},media:{height:140}}}));a.default=l((function(e){var a=Ee(),t=e.match,n=Object(v.useDispatch)(),r=Object(v.useSelector)(D.a.match),c=Object(v.useSelector)(g.a.userRoomsAsGameMaster)||{},o=Object(v.useSelector)(g.a.userRoomsAsPlayer)||{};return Object(i.useEffect)((function(){JSON.stringify(t)!==JSON.stringify(r)&&n(y.a.matchChange(t))})),s.a.createElement(s.a.Fragment,null,s.a.createElement("section",{className:a.cards},s.a.createElement(m.a,{in:!0},s.a.createElement(u.a,null,s.a.createElement(d.a,{className:a.media,image:"/assets/images/fantasy-wallpapers.jpg",title:"Fantasy RPG"}),s.a.createElement(p.a,null,s.a.createElement(b.a,{gutterBottom:!0,variant:"h5",component:"h2"},"Enter to the new world"),s.a.createElement(b.a,{variant:"body2",color:"textSecondary",component:"p"},"Create a new game room to start a new adventure with your friends!")),s.a.createElement(h.a,null,s.a.createElement(O.b,{to:V.a.ROOM_CREATE_PATH},s.a.createElement(f.a,{variant:"contained",color:"primary"},"Create new Room")))))),s.a.createElement("section",{className:a.cards},s.a.createElement(fe,{roomsAsGameMaster:c,roomsAsPlayer:o,selectedRoom:null,showSearchBar:!0,label:"Search room by name"})),s.a.createElement(ee,null))}))}}]);
//# sourceMappingURL=8.1fcd2bcb.chunk.js.map