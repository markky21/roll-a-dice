(this["webpackJsonproll-a-dice"]=this["webpackJsonproll-a-dice"]||[]).push([[8],{620:function(e,a,t){"use strict";t.d(a,"a",(function(){return d}));var n=t(621),r=t.n(n),c=t(625),o=t(37),l=t(15),i=t(33),m=t(228),u=r()({}),s=Object(o.a)(),d=Object(c.connectedRouterRedirect)({redirectPath:l.a.HOME_PATH,AuthenticatingComponent:m.a,wrapperDisplayName:"UserIsAuthenticated",authenticatedSelector:i.a.authenticatedSelector,authenticatingSelector:i.a.authenticatingSelector,redirectAction:function(e){return function(a){s.push(e),a({type:"UNAUTHED_REDIRECT",payload:{message:"User is not authenticated."}})}}});Object(c.connectedRouterRedirect)({AuthenticatingComponent:m.a,wrapperDisplayName:"UserIsNotAuthenticated",allowRedirectBack:!1,authenticatedSelector:function(e){return e.firebase.auth.isEmpty},authenticatingSelector:function(e){var a=e.firebase,t=a.auth,n=a.isInitializing;return!t.isLoaded||n},redirectPath:function(e,a){return u.getRedirectQueryParam(a)||l.a.ROOMS_PATH},redirectAction:function(e){return function(a){s.push(e),a({type:"AUTHED_REDIRECT",payload:{message:"User is not authenticated."}})}}})},622:function(e,a,t){"use strict";t.d(a,"a",(function(){return n})),t.d(a,"b",(function(){return c}));var n,r=t(623);!function(e){e.DICE_ROLL="DICE_ROLL"}(n||(n={}));var c={roomName:{name:"roomName",label:"Name of the Room",fullWidth:!0},diceType:{name:"diceType",label:"Allowed dice",options:[{label:r.a.D4,value:r.a.D4},{label:r.a.D6,value:r.a.D6},{label:r.a.D8,value:r.a.D8},{label:r.a.D10,value:r.a.D10},{label:r.a.D12,value:r.a.D12},{label:r.a.D20,value:r.a.D20},{label:r.a.D100,value:r.a.D100}]},description:{name:"description",label:"Room description",multiline:!0,fullWidth:!0},d4:{name:r.a.D4,label:r.a.D4},d6:{label:r.a.D6,name:r.a.D6},d8:{label:r.a.D8,name:r.a.D8},d10:{label:r.a.D10,name:r.a.D10},d12:{label:r.a.D12,name:r.a.D12},d20:{label:r.a.D20,name:r.a.D20},d100:{label:r.a.D100,name:r.a.D100}};r.a.D4,r.a.D4,r.a.D6,r.a.D6,r.a.D8,r.a.D8,r.a.D10,r.a.D10,r.a.D12,r.a.D12,r.a.D20,r.a.D20,r.a.D100,r.a.D100},623:function(e,a,t){"use strict";var n;t.d(a,"a",(function(){return n})),function(e){e.D4="d4",e.D6="d6",e.D8="d8",e.D10="d10",e.D12="d12",e.D20="d20",e.D100="d100"}(n||(n={}))},632:function(e,a,t){"use strict";t.d(a,"c",(function(){return D})),t.d(a,"a",(function(){return y})),t.d(a,"b",(function(){return j}));var n=t(99),r=t(230),c=t(0),o=t.n(c),l=t(543),i=t(598),m=t(540),u=t(541),s=t(548),d=t(711),b=t(725),p=t(542),h=t(712),f=t(729),E=t(722),v=t(611),g=Object(v.a)((function(e){return{formField:{marginBottom:e.spacing(2)},sliderFormField:{width:"100%",marginLeft:0}}})),O=function(e){var a=e.touched,t=e.error;return a&&t?o.a.createElement(l.a,null,a&&t):void 0},D=o.a.memo((function(e){var a=g();return o.a.createElement(E.a,Object.assign({},e,{component:function(e){var a=e.label,t=e.input,n=e.meta,c=n.touched,l=n.invalid,m=n.error,u=Object(r.a)(e,["label","input","meta"]);return o.a.createElement(i.a,Object.assign({variant:"outlined",label:a,placeholder:a,error:c&&l,helperText:c&&m},t,u))},className:a.formField}))})),y=(o.a.memo((function(e){var a=g();return o.a.createElement(E.a,Object.assign({},e,{type:"checkbox",component:function(e){var a=e.input,t=(e.label,e.meta),n=t.touched,c=t.error,l=e.children,i=Object(r.a)(e,["input","label","meta","children"]);return o.a.createElement(m.a,{error:n&&c},o.a.createElement(u.a,{htmlFor:"age-native-simple"},"Age"),o.a.createElement(s.a,Object.assign({variant:"outlined",native:!0},a,i,{inputProps:{name:"age",id:"age-native-simple"}}),l),O({touched:n,error:c}))},className:a.formField}))})),o.a.memo((function(e){var a=g();return o.a.createElement(E.a,Object.assign({},e,{type:"checkbox",component:function(e){var a=e.input,t=e.label;return o.a.createElement(d.a,{control:o.a.createElement(b.a,{checked:!!a.value,onChange:a.onChange}),label:t})},className:a.formField}))})),o.a.memo((function(e){var a=g();return o.a.createElement(E.a,Object.assign({},e,{type:"checkbox",component:function(e){var a=e.input,t=e.meta,r=e.options,c=e.label,l=a.name,i=a.onChange,u=t.touched,s=t.error,f=a.value,E=r.map((function(e,a){var t=e.label,r=e.value,c=f.includes(r);return o.a.createElement(d.a,{key:a,control:o.a.createElement(b.a,{checked:c,onChange:function(e){var a=Object(n.a)(f);return e.target.checked?a.push(r):a.splice(a.indexOf(r),1),i(a)},name:"".concat(l,"[").concat(a,"]"),value:r}),label:t})}));return o.a.createElement(m.a,{error:u&&!!s,component:"fieldset"},o.a.createElement(p.a,{component:"legend"},c),o.a.createElement(h.a,{row:!0},E),O({touched:u,error:s}))},className:a.formField}))}))),j=o.a.memo((function(e){var a=g();function t(e){return"".concat(e)}return o.a.createElement(E.a,Object.assign({},e,{component:function(e){var n=e.min,c=void 0===n?0:n,l=e.max,i=void 0===l?16:l,m=e.label,u=e.input,s=u.value,b=u.onChange,p=Object(r.a)(u,["value","onChange"]),h=e.meta,E=(h.touched,h.invalid,h.error,Object(r.a)(e,["min","max","label","input","meta"]));return o.a.createElement(d.a,{className:a.sliderFormField,label:m,labelPlacement:"start",control:o.a.createElement(f.a,Object.assign({defaultValue:0,getAriaValueText:t,"aria-labelledby":"number-of-dices",valueLabelDisplay:"auto",step:1,marks:!0,min:c,max:i,value:"number"===typeof s?s:0,onChange:function(e,a){return b(a)}},p,E))})},className:a.formField}))}))},723:function(e,a,t){"use strict";t.r(a);var n=t(48),r=t(58),c=t(635),o=t(620),l=Object(n.d)(Object(c.a)("EnhancedRoomList"),r.g,o.a),i=t(0),m=t.n(i),u=t(588),s=t(603),d=t(604),b=t(605),p=t(117),h=t(718),f=t(715),E=t(611),v=t(74),g=t(11),O=t(76),D=t(229),y=t(119),j=t(18),R=t(118),N=t(549),A=t(14),S=t(5),C=t(595),k=t(716),w=t(717),T=t(713),P=t(714),x=t(720),F=t(622),M=t(632);var U=Object(x.a)({form:"createRoom",validate:function(e){var a={};return[F.b.roomName.name].forEach((function(t){e[t]||(a[t]="Required")})),e[F.b.diceType.name]&&e[F.b.diceType.name].length||(a[F.b.diceType.name]="Select at least one dice"),a}})((function(e){var a=e.handleSubmit,t=e.pristine,n=e.submitting,r=e.handleClose,c=e.invalid;return m.a.createElement("form",{onSubmit:a},m.a.createElement(T.a,{dividers:!0},m.a.createElement("div",null,m.a.createElement(M.c,F.b.roomName)),m.a.createElement("div",null,m.a.createElement(M.c,F.b.description)),m.a.createElement("div",null,m.a.createElement(M.a,F.b.diceType))),m.a.createElement(P.a,null,m.a.createElement(f.a,{type:"submit",color:"primary",disabled:c||t||n},"Submit"),m.a.createElement(f.a,{type:"button",onClick:r,color:"primary"},"Cancel")))})),_=t(15),I=t(25),L=t(49),H=t(33);var B=Object(S.a)((function(e){return Object(N.a)({})}))((function(e){var a=Object(g.useSelector)(y.a.match).path,t=m.a.useState(!1),n=Object(R.a)(t,2),c=n[0],o=n[1],l=Object(A.a)(),u=Object(C.a)(l.breakpoints.down("xs")),s=Object(r.f)(),d=Object(I.useFirestore)(),b=Object(g.useSelector)(H.a.userProfile),p=function(){o(!1),s.push(_.a.ROOMS_PATH)};return Object(i.useEffect)((function(){a===_.a.ROOM_CREATE_PATH&&o(!0)}),[a]),m.a.createElement(k.a,{fullScreen:u,open:c,onClose:p,"aria-labelledby":"responsive-dialog-title"},m.a.createElement(w.a,null,"Create new Room"),m.a.createElement(U,{handleClose:p,onSubmit:function(e){(function(e){var a=Object(j.a)({createdAt:Date.now().toString(),gameMaster:{uid:b.uid,avatarUrl:b.avatarUrl||b.photoURL,displayName:b.displayName,email:b.email,photoURL:b.photoURL||b.avatarUrl},logs:[],players:[]},e);return d.collection(L.a.ROOMS).add(a).then((function(e){o(!1),s.push("".concat(_.a.ROOM_PATH,"/").concat(e.id))}))})(e).catch((function(e){console.log({e:e})}))}}))})),G=t(592),W=t(594),J=t(223),z=t(297),V=t.n(z),q=t(598),Q=t(593),Y=t(536),K=t(596),X=t(614),Z=t(597),$=t(590),ee=t(689),ae=t(295),te=t(296);var ne=m.a.memo(Object(S.a)((function(e){return Object(N.a)({root:{width:"100%",backgroundColor:e.palette.background.paper,height:"20vh",overflowY:"scroll"},item:{cursor:"pointer"},divider:{backgroundColor:"rgba(0, 0, 0, 0.12)"}})}))((function(e){var a=e.classes,t=e.roomsAsGameMaster,n=e.roomsAsPlayer,r=e.onRoomClick,c=e.selectedRoom,o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return Object.keys(e).map((function(n,o){return m.a.createElement(u.a,{key:n,in:!0,timeout:1e3*o+t},m.a.createElement(Y.a,{onClick:function(){return r(n)},selected:n===c,className:a.item,button:!0,dense:!0,alignItems:"flex-start"},m.a.createElement(K.a,null,m.a.createElement(X.a,null,Object(ae.a)(e[n].roomName||"No name"))),m.a.createElement(Z.a,{primary:e[n].roomName||"No name",secondary:Object(te.a)(e[n].createdAt)})))}))};return m.a.createElement($.a,{className:a.root},o(t),m.a.createElement(u.a,{in:!!Object.keys(t).length,timeout:1e3*Object.keys(t).length+300},m.a.createElement(ee.a,{className:a.divider})),o(n,1e3*Object.keys(t).length+300))})));var re=Object(S.a)((function(e){return Object(N.a)({paper:{margin:"auto",overflow:"hidden"},searchBar:{borderBottom:"1px solid rgba(0, 0, 0, 0.12)"},searchInput:{fontSize:e.typography.fontSize},block:{display:"block"},contentWrapper:{margin:"16px 16px"}})}))((function(e){var a=e.classes,t=e.roomsAsGameMaster,n=e.roomsAsPlayer,c=e.showSearchBar,o=e.selectedRoom,l=e.label,i=Object(r.f)();return m.a.createElement(u.a,{in:!0},m.a.createElement(J.a,{className:a.paper},c&&m.a.createElement(G.a,{className:a.searchBar,position:"static",color:"default",elevation:0},m.a.createElement(Q.a,null,m.a.createElement(W.a,{container:!0,spacing:2,alignItems:"center"},m.a.createElement(W.a,{item:!0},m.a.createElement(V.a,{className:a.block,color:"inherit"})),m.a.createElement(W.a,{item:!0,xs:!0},m.a.createElement(q.a,{fullWidth:!0,placeholder:l,InputProps:{disableUnderline:!0,className:a.searchInput}}))))),m.a.createElement("div",{className:a.contentWrapper},m.a.createElement(ne,{roomsAsGameMaster:t,roomsAsPlayer:n,onRoomClick:function(e){return i.push("".concat(_.a.ROOM_PATH,"/").concat(e))},selectedRoom:o}))))})),ce=Object(E.a)((function(e){return{cards:{marginBottom:"16px",maxWidth:936},media:{height:140}}}));a.default=l((function(e){var a=ce(),t=e.match,n=Object(g.useDispatch)(),r=Object(g.useSelector)(y.a.match),c=Object(g.useSelector)(O.a.userRoomsAsGameMaster)||{},o=Object(g.useSelector)(O.a.userRoomsAsPlayer)||{};return Object(i.useEffect)((function(){JSON.stringify(t)!==JSON.stringify(r)&&n(D.a.matchChange(t))})),m.a.createElement(m.a.Fragment,null,m.a.createElement("section",{className:a.cards},m.a.createElement(u.a,{in:!0},m.a.createElement(s.a,null,m.a.createElement(d.a,{className:a.media,image:"".concat("/roll-a-dice","/assets/images/fantasy-wallpapers.jpg"),title:"Fantasy RPG"}),m.a.createElement(b.a,null,m.a.createElement(p.a,{gutterBottom:!0,variant:"h5",component:"h2"},"Enter to the new world"),m.a.createElement(p.a,{variant:"body2",color:"textSecondary",component:"p"},"Create a new game room to start a new adventure with your friends!")),m.a.createElement(h.a,null,m.a.createElement(v.b,{to:_.a.ROOM_CREATE_PATH},m.a.createElement(f.a,{variant:"contained",color:"primary"},"Create new Room")))))),m.a.createElement("section",{className:a.cards},m.a.createElement(re,{roomsAsGameMaster:c,roomsAsPlayer:o,selectedRoom:null,showSearchBar:!0,label:"Search room by name"})),m.a.createElement(B,null))}))}}]);
//# sourceMappingURL=8.9461e87f.chunk.js.map