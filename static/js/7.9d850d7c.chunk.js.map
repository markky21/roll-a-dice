{"version":3,"sources":["utils/router.utils.ts","models/rooms.model.ts","models/dice.model.ts","modules/Chatter/index.ts","components/FormComponents.tsx","routes/Room/RoomPage/RoomPage.enhancer.tsx","store/rooms/rooms.actions.ts","services/store.service.ts","services/dice.service.ts","utils/dice.utils.ts","contexts/DiceService.context.tsx","config/dice.config.ts","modules/DiceCard/DiceCard.tsx","modules/DiceDashboard/components/DiceDashboardForm.tsx","modules/DiceDashboard/components/DiceDashboardResult.tsx","modules/DiceDashboard/DiceDashbard.tsx","modules/Players/components/PlayerTile.tsx","modules/Players/Players.tsx","components/SpeedDial.tsx","routes/Room/RoomPage/components/RoomSpeedDial.tsx","routes/Room/RoomPage/components/RoomPageView.tsx","routes/Room/RoomPage/index.ts","routes/Room/RoomPage/RoomPage.tsx"],"names":["locationHelper","locationHelperBuilder","history","createBrowserHistory","UserIsAuthenticated","connectedRouterRedirect","redirectPath","RouterPath","HOME_PATH","AuthenticatingComponent","Loader","wrapperDisplayName","authenticatedSelector","firebaseSelectors","authenticatingSelector","redirectAction","newLoc","dispatch","push","type","payload","message","allowRedirectBack","state","firebase","auth","isEmpty","isInitializing","isLoaded","ownProps","getRedirectQueryParam","ROOMS_PATH","Log","createRoomFormModel","roomName","name","label","fullWidth","diceType","options","Dice","D4","value","D6","D8","D10","D12","D20","D100","description","multiline","d4","d6","d8","d10","d12","d20","d100","Chatter","React","lazy","useStyles","makeStyles","theme","formField","marginBottom","spacing","sliderFormField","width","marginLeft","FormFieldHelperText","touched","error","FormFieldText","memo","props","classes","component","input","meta","invalid","custom","variant","placeholder","helperText","className","FormFieldCheckboxGroup","children","htmlFor","native","inputProps","id","control","checked","onChange","inputValue","checkboxesFormControls","map","index","includes","key","event","arr","target","splice","indexOf","row","FormFieldSlider","valuetext","min","max","inputRest","labelPlacement","defaultValue","getAriaValueText","aria-labelledby","valueLabelDisplay","step","marks","e","enhancedRoomList","compose","setDisplayName","withRouter","roomsActions","action","RoomsAction","SELECTED","SET_DRAWER_OPEN_VALUE","SET_CHAT_OPEN_VALUE","SET_PLAYERS_OPEN_VALUE","SET_DICE_ROLLING","StoreService","store","takeUntil$","Subject","_store$","ReplaySubject","_storeUnsubscribeFn","this","subscribe","next","getState","store$","pipe","form","diceSetForm","firestore","data","selectedRoom","filter","room","getSelectedRoomData$","logs","getSelectedRoomDataLogs$","pop","log","distinctUntilChanged","a","b","timestamp","profile","instance","asObservable","DiceService","diceThrow$","diceBeforeThrow$","diceThrowResult$","roomUid","storeService","getInstance","createSubscriptions","setDiceRolling","takeUntil","diceThrow","emit","firestoreAddNewThrow","performDiceThrowWhenNewDiceThrowLogAppears","diceRolling","diceThrowResult","documentRef","doc","FirestoreCollection","ROOMS","runTransaction","t","get","then","newLog","authorUid","uid","Date","now","toString","DICE_ROLL","update","err","console","getLastRoomLogOnChange$","withLatestFrom","getUserProfile$","getDiceSetForm","values","JSON","stringify","dices","Object","keys","diceName","dice","length","join","diceSetToString","DiceServiceContext","createContext","DiceServiceContextC","useFirestore","diceService","useSelector","userProfile","roomsSelectors","selectedRoomUid","useEffect","hostDestroyed","Provider","diceDefaultConfig","idCanvas","idLabel","idSet","idSelectorDiv","idInfoDiv","useTrueRandom","useShadows","whiteDice","noresult","DiceCard","withStyles","createStyles","root","height","position","diceCanvas","cursor","grabbing","canvasRef","useRef","diceContainerEl","useState","diceInitialized","setDiceInitialized","mouseDown","setMouseDown","useContext","canvasWidth","current","getBoundingClientRect","window","dice_initialize","diceSet$","handleDiceSetFormChanges$","onMouseDown","isDown","Paper","elevation","ref","clsx","onMouseUp","inputSlider","paddingRight","minWidth","DiceDashboardForm","reduxForm","initialValues","onSubmit","preventDefault","DiceDashboardResult","throwResult","List","resultObject","diceSet","forEach","result","ListItem","Typography","renderResultItem","DiceDashboard","display","backgroundColor","details","flexDirection","content","flex","cover","playIcon","clicable","visible","roomData","firestoreSelectors","setThrowResult","Grow","in","Card","onClick","CardContent","Collapse","CardMedia","image","process","title","PlayerTile","tile","borderRadius","marginRight","maxWidth","overflow","padding","color","palette","primary","light","titleDisable","warning","masterGame","zIndex","top","right","titleBar","background","player","gameMaster","GridListTile","src","avatarUrl","photoURL","alt","displayName","GridListTileBar","connected","actionIcon","Tooltip","IconButton","aria-label","Players","flexWrap","justifyContent","paper","gridList","transform","players","selectedRoomPlayers","selectedRoomGameMasterProfile","Slide","direction","GridList","cols","timeout","SpeedDialWrapper","actions","open","setOpen","handleClose","SpeedDial","ariaLabel","icon","SpeedDialIcon","onClose","onOpen","SpeedDialAction","tooltipTitle","callback","RoomSpeedDialWrapper","snackbar","useDispatch","drawerOpened","mainSelectors","isGameMasterOfSelectedRoom","chatOpened","playersOpened","text","snackbarConfig","setSnackbarConfig","actionsAdditional","cb","navigator","permissions","query","clipboard","writeText","location","href","Fragment","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","Alert","severity","margin","diceWrapper","chatter","bottom","transition","chatterLower","speedDial","left","speedDialLower","cssGrid","gridTemplateColumns","gridTemplateRows","rowGap","columnGap","cssItem1","gridColumn","gridRow","cssItem2","diceDashboard","RoomView","visbile","match","selectedRoomData","storeLocationMatch","locationSelectors","locationActions","matchChange","params","onEnterTheRoomAddUserToPlayers","createdAt","chatsActions","setSelectedChat","chatUid"],"mappings":"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","file":"static/js/7.9d850d7c.chunk.js","sourcesContent":["import locationHelperBuilder from 'redux-auth-wrapper/history4/locationHelper';\nimport { connectedRouterRedirect } from 'redux-auth-wrapper/history4/redirect';\nimport { createBrowserHistory } from 'history';\nimport { RouterPath } from '../models/paths';\n\nimport { AppState } from '../store/main';\nimport { firebaseSelectors } from '../store/firebase/firebase.selectors';\nimport { Loader } from '../components/Loader';\n\nconst locationHelper = locationHelperBuilder({});\nconst history = createBrowserHistory();\n\nconst AUTHED_REDIRECT = 'AUTHED_REDIRECT';\nconst UNAUTHED_REDIRECT = 'UNAUTHED_REDIRECT';\n\n/**\n * Higher Order Component that redirects to `/login` instead\n * rendering if user is not authenticated (default of redux-auth-wrapper).\n * @param {Component} componentToWrap - Component to wrap\n * @return {Component} wrappedComponent\n */\nexport const UserIsAuthenticated = connectedRouterRedirect({\n  redirectPath: RouterPath.HOME_PATH,\n  AuthenticatingComponent: Loader,\n  wrapperDisplayName: 'UserIsAuthenticated',\n  // Want to redirect the user when they are done loading and authenticated\n  authenticatedSelector: firebaseSelectors.authenticatedSelector,\n  authenticatingSelector: firebaseSelectors.authenticatingSelector,\n  redirectAction: ((newLoc: any) => (dispatch: any) => {\n    // Use push, replace, and go to navigate around.\n    history.push(newLoc);\n    dispatch({\n      type: UNAUTHED_REDIRECT,\n      payload: { message: 'User is not authenticated.' },\n    });\n  }) as any,\n});\n\n/**\n * Higher Order Component that redirects to listings page or most\n * recent route instead rendering if user is not authenticated. This is useful\n * routes that should not be displayed if a user is logged in, such as the\n * login route.\n * @param {Component} componentToWrap - Component to wrap\n * @return {Component} wrappedComponent\n */\nexport const UserIsNotAuthenticated = connectedRouterRedirect({\n  AuthenticatingComponent: Loader,\n  wrapperDisplayName: 'UserIsNotAuthenticated',\n  allowRedirectBack: false,\n  // Want to redirect the user when they are done loading and authenticated\n  authenticatedSelector: (state: AppState) => {\n    const {\n      firebase: { auth },\n    } = state;\n    return auth.isEmpty;\n  },\n  authenticatingSelector: ({ firebase: { auth, isInitializing } }) => !auth.isLoaded || isInitializing,\n  redirectPath: (state, ownProps) => locationHelper.getRedirectQueryParam(ownProps) || RouterPath.ROOMS_PATH,\n  redirectAction: ((newLoc: any) => (dispatch: any) => {\n    // Use push, replace, and go to navigate around.\n    history.push(newLoc);\n    dispatch({\n      type: AUTHED_REDIRECT,\n      payload: { message: 'User is not authenticated.' },\n    });\n  }) as any,\n});\n\n/*\n/!**\n * Render children based on route config objects\n * @param {Array} routes - Routes settings array\n * @param {Object} match - Routes settings array\n * @param {Object} parentProps - Props to pass to children from parent\n *!/\nexport function renderChildren(routes, match, parentProps) {\n  return routes.map(route => (\n    <Route\n      key={`${match.url}-${route.path}`}\n      path={`${match.url}/${route.path}`}\n      render={props => <route.component {...parentProps} {...props} />}\n    />\n  ));\n}*/\n","import { Dice, IDiceThrowResult } from './dice.model';\n\nexport enum Log {\n  DICE_ROLL = 'DICE_ROLL',\n}\n\nexport interface IProfile {\n  uid: string;\n  avatarUrl?: string;\n  displayName: string;\n  email: string;\n  photoURL: string;\n  connected?: boolean;\n}\n\nexport interface IRoomLog {\n  timestamp: string;\n  type: Log;\n  authorUid: string;\n  payload: Omit<IDiceThrowResult, 'emit'>;\n}\n\nexport interface IRoom extends IRoomCreateForm {\n  createdAt: string;\n  gameMaster: IProfile;\n  players: string[];\n  logs: IRoomLog[];\n  chatUid?: string;\n}\n\nexport interface IRoomCreateForm {\n  roomName: string;\n  diceType: Dice[];\n  description: string;\n}\n\nexport const createRoomFormModel = {\n  roomName: { name: 'roomName', label: 'Name of the Room', fullWidth: true },\n  diceType: {\n    name: 'diceType',\n    label: 'Allowed dice',\n    options: [\n      { label: Dice.D4, value: Dice.D4 },\n      { label: Dice.D6, value: Dice.D6 },\n      { label: Dice.D8, value: Dice.D8 },\n      { label: Dice.D10, value: Dice.D10 },\n      { label: Dice.D12, value: Dice.D12 },\n      { label: Dice.D20, value: Dice.D20 },\n      { label: Dice.D100, value: Dice.D100 },\n    ],\n  },\n  description: { name: 'description', label: 'Room description', multiline: true, fullWidth: true },\n  d4: { name: Dice.D4, label: Dice.D4 },\n  d6: { label: Dice.D6, name: Dice.D6 },\n  d8: { label: Dice.D8, name: Dice.D8 },\n  d10: { label: Dice.D10, name: Dice.D10 },\n  d12: { label: Dice.D12, name: Dice.D12 },\n  d20: { label: Dice.D20, name: Dice.D20 },\n  d100: { label: Dice.D100, name: Dice.D100 },\n};\n\nexport const diceSetFormModel = {\n  diceD4: { name: Dice.D4, label: Dice.D4, defaultValue: 1 },\n  diceD6: { name: Dice.D6, label: Dice.D6, defaultValue: 1 },\n  diceD8: { name: Dice.D8, label: Dice.D8, defaultValue: 1 },\n  diceD10: { name: Dice.D10, label: Dice.D10, defaultValue: 1 },\n  diceD12: { name: Dice.D12, label: Dice.D12, defaultValue: 1 },\n  diceD20: { name: Dice.D20, label: Dice.D20, defaultValue: 1 },\n  diceD100: { name: Dice.D100, label: Dice.D100, defaultValue: 1 },\n};\n\nexport interface IDiceDashboardForm {\n  [key: string]: number;\n}\n","export interface IDiceBeforeThrow {\n  vectors: any;\n  notation: any;\n  throwRequestResult: number[];\n  emitResult: boolean;\n}\n\nexport interface IDiceThrowResult {\n  diceSet: string[];\n  result: number[];\n  emit: boolean;\n}\n\nexport enum Dice {\n  D4 = 'd4',\n  D6 = 'd6',\n  D8 = 'd8',\n  D10 = 'd10',\n  D12 = 'd12',\n  D20 = 'd20',\n  D100 = 'd100',\n}\n\ninterface IDiceVector {\n  set: Dice;\n  pos: {\n    x: number;\n    y: number;\n    z: number;\n  };\n  velocity: {\n    x: number;\n    y: number;\n    z: number;\n  };\n  angle: {\n    x: number;\n    y: number;\n    z: number;\n  };\n  axis: {\n    x: number;\n    y: number;\n    z: number;\n    a: number;\n  };\n}\n\nexport interface IDiceThrow {\n  diceSet: string[];\n  result: number[];\n}\n","import React from 'react';\n\nexport const Chatter = React.lazy(() => import('./Chatter'));\n","import React from 'react';\nimport {\n  Checkbox,\n  FormControl,\n  FormControlLabel,\n  FormGroup,\n  FormHelperText,\n  FormLabel,\n  InputLabel,\n  Select,\n  Slider,\n  TextField,\n} from '@material-ui/core';\nimport { Field } from 'redux-form';\nimport { makeStyles, Theme } from '@material-ui/core/styles';\n\n/*\n * Model\n */\ninterface FormFieldGenericProps<T = any> {\n  name: string;\n  label: string;\n  value?: T;\n  min?: number;\n  max?: number;\n  [key: string]: any;\n}\nexport interface IGroupOption {\n  label: string;\n  value: string | number;\n}\n\ninterface FormFieldWithOptionsProps extends FormFieldGenericProps {\n  options: IGroupOption[];\n}\n\n/*\n * Styles\n */\n\nconst styles = (theme: Theme) => ({\n  formField: { marginBottom: theme.spacing(2) },\n  sliderFormField: {\n    width: '100%',\n    marginLeft: 0,\n  },\n});\n\nconst useStyles = makeStyles(styles);\n\n/*\n * Components\n */\n\nexport const FormFieldHelperText = ({ touched, error }: any) => {\n  if (!(touched && error)) {\n    return;\n  } else {\n    return <FormHelperText>{touched && error}</FormHelperText>;\n  }\n};\n\nexport const FormFieldText = React.memo((props: FormFieldGenericProps) => {\n  const classes = useStyles();\n\n  const formField = ({ label, input, meta: { touched, invalid, error }, ...custom }: any) => (\n    <TextField\n      variant=\"outlined\"\n      label={label}\n      placeholder={label}\n      error={touched && invalid}\n      helperText={touched && error}\n      {...input}\n      {...custom}\n    />\n  );\n\n  return <Field {...props} component={formField} className={classes.formField} />;\n});\n\nexport const FormFieldSelect = React.memo((props: FormFieldGenericProps) => {\n  const classes = useStyles();\n\n  const field = ({ input, label, meta: { touched, error }, children, ...custom }: FormFieldGenericProps) => {\n    return (\n      <FormControl error={touched && error}>\n        <InputLabel htmlFor=\"age-native-simple\">Age</InputLabel>\n        <Select\n          variant=\"outlined\"\n          native\n          {...input}\n          {...custom}\n          inputProps={{\n            name: 'age',\n            id: 'age-native-simple',\n          }}\n        >\n          {children}\n        </Select>\n        {FormFieldHelperText({ touched, error })}\n      </FormControl>\n    );\n  };\n\n  return <Field {...props} type=\"checkbox\" component={field} className={classes.formField} />;\n});\n\nexport const FormFieldCheckbox = React.memo((props: FormFieldGenericProps) => {\n  const classes = useStyles();\n\n  const field = ({ input, label }: FormFieldGenericProps) => {\n    return <FormControlLabel control={<Checkbox checked={!!input.value} onChange={input.onChange} />} label={label} />;\n  };\n\n  return <Field {...props} type=\"checkbox\" component={field} className={classes.formField} />;\n});\n\nexport const FormFieldCheckboxGroup = React.memo((props: FormFieldWithOptionsProps) => {\n  const classes = useStyles();\n\n  const field = ({ input, meta, options, label }: FormFieldWithOptionsProps) => {\n    const { name, onChange } = input;\n    const { touched, error } = meta;\n    const inputValue = input.value;\n\n    const checkboxesFormControls = options.map(({ label, value }: any, index: number) => {\n      const handleChange = (event: any) => {\n        const arr = [...inputValue];\n        if (event.target.checked) {\n          arr.push(value);\n        } else {\n          arr.splice(arr.indexOf(value), 1);\n        }\n        return onChange(arr);\n      };\n      const checked = inputValue.includes(value);\n      return (\n        <FormControlLabel\n          key={index}\n          control={<Checkbox checked={checked} onChange={handleChange} name={`${name}[${index}]`} value={value} />}\n          label={label}\n        />\n      );\n    });\n\n    return (\n      <FormControl error={touched && !!error} component=\"fieldset\">\n        <FormLabel component=\"legend\">{label}</FormLabel>\n        <FormGroup row>{checkboxesFormControls}</FormGroup>\n        {FormFieldHelperText({ touched, error })}\n      </FormControl>\n    );\n  };\n\n  return <Field {...props} type=\"checkbox\" component={field} className={classes.formField} />;\n});\n\nexport const FormFieldSlider = React.memo((props: FormFieldGenericProps) => {\n  const classes = useStyles();\n\n  function valuetext(value: number) {\n    return `${value}`;\n  }\n\n  const formField = ({\n    min = 0,\n    max = 16,\n    label,\n    input: { value, onChange, ...inputRest },\n    meta: { touched, invalid, error },\n    ...custom\n  }: any) => {\n    return (\n      <FormControlLabel\n        className={classes.sliderFormField}\n        label={label}\n        labelPlacement=\"start\"\n        control={\n          <Slider\n            defaultValue={0}\n            getAriaValueText={valuetext}\n            aria-labelledby=\"number-of-dices\"\n            valueLabelDisplay=\"auto\"\n            step={1}\n            marks\n            min={min}\n            max={max}\n            value={typeof value === 'number' ? value : 0}\n            onChange={(e: Event, value: number) => onChange(value)}\n            {...inputRest}\n            {...custom}\n          />\n        }\n      />\n    );\n  };\n\n  return <Field {...props} component={formField} className={classes.formField} />;\n});\n","import { compose } from 'redux';\nimport { withRouter } from 'react-router-dom';\nimport { setDisplayName } from 'recompose';\nimport { UserIsAuthenticated } from '../../../utils/router.utils';\n\nexport const enhancedRoomList = compose(\n  // Set component display name (more clear in dev/error tools)\n  setDisplayName('EnhancedRoomList'),\n  // Add props.match\n  withRouter,\n  // Redirect to /login if user is not logged in\n  UserIsAuthenticated\n);\n","import { action } from 'typesafe-actions';\nimport { RoomsAction } from './rooms.model';\n\nexport const roomsActions = {\n  setSelectedRoom: (payload: string | null) => action(RoomsAction.SELECTED, payload),\n  setDrawerOpenValue: (payload: boolean) => action(RoomsAction.SET_DRAWER_OPEN_VALUE, payload),\n  setChatOpenValue: (payload: boolean) => action(RoomsAction.SET_CHAT_OPEN_VALUE, payload),\n  setPlayersOpenValue: (payload: boolean) => action(RoomsAction.SET_PLAYERS_OPEN_VALUE, payload),\n  diceRolling: (payload: boolean) => action(RoomsAction.SET_DICE_ROLLING, payload),\n};\n","import { Observable, ReplaySubject, Subject } from 'rxjs';\nimport {AnyAction, Store} from 'redux';\n\nimport { store } from '../config/store.config';\nimport { AppState, IDiceSetForm } from '../store/main';\nimport { IProfile, IRoom, IRoomLog } from '../models/rooms.model';\nimport { distinctUntilChanged, filter, map } from 'rxjs/operators';\n\nexport class StoreService {\n  private static instance: StoreService | null;\n\n  public store: Store = store;\n\n  private readonly takeUntil$ = new Subject();\n  private readonly _store$ = new ReplaySubject<AppState>(1);\n  private readonly _storeUnsubscribeFn: Function;\n\n  private constructor() {\n    this._storeUnsubscribeFn = this.store.subscribe(() => {\n      this._store$.next(this.store.getState());\n    });\n  }\n\n  public get store$(): Observable<AppState> {\n    return this._store$.asObservable();\n  }\n\n  public getDiceSetForm(): Observable<IDiceSetForm> {\n    return this.store$.pipe(map(state => state.form.diceSetForm));\n  }\n\n  public getSelectedRoomData$(): Observable<IRoom> {\n    return this.store$.pipe(\n      map(state => state.firestore.data.selectedRoom),\n      filter(room => !!room)\n    ) as Observable<IRoom>;\n  }\n\n  public getSelectedRoomDataLogs$(): Observable<Array<IRoomLog>> {\n    return this.getSelectedRoomData$().pipe(map(room => room.logs));\n  }\n\n  public getLastRoomLogOnChange$(): Observable<IRoomLog> {\n    return this.getSelectedRoomDataLogs$().pipe(\n      map(logs => [...logs].pop()),\n      // @ts-ignore\n      filter(log => !!log),\n      distinctUntilChanged((a, b) => a.timestamp === b.timestamp)\n    ) as Observable<IRoomLog>;\n  }\n\n  public getUserProfile$(): Observable<IProfile> {\n    return this.store$.pipe(map(state => state.firebase.profile));\n  }\n\n  public dispatch(action: AnyAction): AnyAction {\n    return this.store.dispatch(action);\n  }\n\n  public hostDestroyed(): void {\n    this.takeUntil$.next();\n    this._storeUnsubscribeFn();\n    StoreService.instance = null;\n  }\n\n  static getInstance(): StoreService {\n    if (!StoreService.instance) {\n      StoreService.instance = new StoreService();\n    }\n\n    return StoreService.instance;\n  }\n}\n","import { Observable, ReplaySubject, Subject } from 'rxjs';\nimport { firestore } from 'firebase/app';\nimport { distinctUntilChanged, filter, map, takeUntil, withLatestFrom } from 'rxjs/operators';\n\nimport { IDiceBeforeThrow, IDiceThrow, IDiceThrowResult } from '../models/dice.model';\nimport { roomsActions } from '../store/rooms/rooms.actions';\nimport { FirestoreCollection } from '../models/firestore.model';\nimport { IProfile, IRoom, IRoomLog, Log } from '../models/rooms.model';\nimport { StoreService } from './store.service';\nimport { diceSetToString } from '../utils/dice.utils';\n\nexport class DiceService {\n  private static instance: DiceService | null;\n\n  public readonly diceThrow$ = new Subject<IDiceThrow>();\n  public readonly diceBeforeThrow$ = new Subject<IDiceBeforeThrow>();\n  public readonly diceThrowResult$ = new ReplaySubject<IDiceThrowResult>(1);\n  public profile: IProfile | null = null;\n  public roomUid: string | null = null;\n\n  private readonly takeUntil$ = new Subject();\n  private readonly storeService: StoreService = StoreService.getInstance();\n\n  private constructor(private firestore: firestore.Firestore) {\n    this.createSubscriptions();\n  }\n\n  public hostDestroyed(): void {\n    this.takeUntil$.next();\n    DiceService.instance = null;\n    this.setDiceRolling(false);\n  }\n\n  public get handleDiceSetFormChanges$(): Observable<string> {\n    return this.storeService.getDiceSetForm().pipe(\n      map(form => form?.values),\n      distinctUntilChanged((a, b) => JSON.stringify(a) === JSON.stringify(b)),\n      map(dices => diceSetToString(dices)),\n      takeUntil(this.takeUntil$)\n    );\n  }\n\n  static getInstance(firestore: firestore.Firestore): DiceService {\n    if (!DiceService.instance) {\n      DiceService.instance = new DiceService(firestore);\n    }\n\n    return DiceService.instance;\n  }\n\n  private createSubscriptions(): void {\n    // this.diceThrow$.pipe(takeUntil(this.takeUntil$)).subscribe(diceThrow => {\n    //   console.log('diceThrow$: ', diceThrow);\n    // });\n\n    this.diceBeforeThrow$.pipe(takeUntil(this.takeUntil$)).subscribe(diceThrow => {\n      this.setDiceRolling(true);\n      // console.log('diceBeforeThrow$: ', diceThrow);\n    });\n\n    this.diceThrowResult$.pipe(takeUntil(this.takeUntil$)).subscribe(diceThrow => {\n      this.setDiceRolling(false);\n      diceThrow.emit && this.firestoreAddNewThrow(diceThrow);\n      // console.log('diceThrowResult$: ', diceThrow);\n    });\n\n    this.performDiceThrowWhenNewDiceThrowLogAppears();\n  }\n\n  /**\n   * Set UI flag to tell if dice are rolling\n   */\n  private setDiceRolling(diceRolling: boolean): void {\n    this.storeService.dispatch(roomsActions.diceRolling(diceRolling));\n  }\n\n  private firestoreAddNewThrow(diceThrowResult: IDiceThrowResult): void {\n    if (!this.roomUid) {\n      return;\n    }\n\n    const { emit, ...payload } = diceThrowResult;\n    const documentRef = this.firestore.doc(`${FirestoreCollection.ROOMS}/${this.roomUid}`);\n\n    this.firestore.runTransaction((t: firestore.Transaction) => {\n      return t\n        .get(documentRef)\n        .then(doc => {\n          const newLog: IRoomLog = {\n            authorUid: this.profile?.uid as string,\n            payload,\n            timestamp: Date.now().toString(),\n            type: Log.DICE_ROLL,\n          };\n          const logs: IRoomLog[] = [...(doc.data() as IRoom).logs, newLog];\n          return t.update(documentRef, { logs });\n        })\n        .catch((err: any) => {\n          // TODO: add toast message\n          // TRANSACTION_FAILURE action dispatched\n          console.log('Transaction failure:', err);\n        });\n    });\n  }\n\n  private performDiceThrowWhenNewDiceThrowLogAppears() {\n    this.storeService\n      .getLastRoomLogOnChange$()\n      .pipe(\n        filter((log: IRoomLog) => log.type === Log.DICE_ROLL),\n        withLatestFrom(this.storeService.getUserProfile$()),\n        filter(([log, profile]) => !!profile.uid && log.authorUid !== profile.uid),\n        takeUntil(this.takeUntil$)\n      )\n      .subscribe(([log]: [IRoomLog, IProfile]) => {\n        this.diceThrow$.next({ ...log.payload });\n      });\n  }\n}\n","export function diceSetToString(dices: { [key: string]: Number }) {\n  return Object.keys(dices)\n    .map(diceName => (!!dices[diceName] ? dices[diceName] + diceName : ''))\n    .filter(dice => !!dice.length)\n    .join('+');\n}\n","import React, { useEffect } from 'react';\nimport { useFirestore } from 'react-redux-firebase';\nimport { DiceService } from '../services/dice.service';\nimport { useSelector } from 'react-redux';\nimport { firebaseSelectors } from '../store/firebase/firebase.selectors';\nimport { roomsSelectors } from '../store/rooms/rooms.selectors';\n\nexport const DiceServiceContext = React.createContext<DiceService | null>(null);\n\ninterface DiceServiceContextProps {}\n\nexport const DiceServiceContextC: React.FC<DiceServiceContextProps> = ({ children }) => {\n  const firestore = useFirestore();\n\n  const diceService = DiceService.getInstance(firestore);\n  const profile = useSelector(firebaseSelectors.userProfile);\n  const roomUid = useSelector(roomsSelectors.selectedRoomUid);\n\n  useEffect(() => {\n    diceService.profile = profile;\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [profile]);\n\n  useEffect(() => {\n    diceService.roomUid = roomUid || null;\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [roomUid]);\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(() => () => diceService.hostDestroyed(), []);\n\n  return <DiceServiceContext.Provider value={diceService}>{children}</DiceServiceContext.Provider>;\n};\n","export const diceDefaultConfig = {\n  idCanvas: 'canvas',\n  idLabel: 'label',\n  idSet: 'set',\n  idSelectorDiv: 'selector_div',\n  idInfoDiv: 'info_div',\n  useTrueRandom: false,\n  useShadows: true,\n  whiteDice: false,\n  noresult: false,\n  diceThrow$: null,\n  diceThrowResult$: null,\n};\n","import clsx from 'clsx';\nimport React, { useContext, useEffect, useRef, useState } from 'react';\nimport { createStyles, Theme, withStyles, WithStyles } from '@material-ui/core/styles';\nimport { Paper } from '@material-ui/core';\n\nimport { diceDefaultConfig } from '../../config/dice.config';\nimport { DiceServiceContext } from '../../contexts/DiceService.context';\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    root: {\n      width: '100%',\n      height: `calc(100% - ${theme.spacing(2)}px)`,\n      position: 'relative' as 'relative',\n    },\n    diceCanvas: {\n      width: '100%',\n      height: '100%',\n      cursor: 'grab',\n    },\n    grabbing: {\n      cursor: 'grabbing',\n    },\n  });\n\ninterface DiceCardProps extends WithStyles<typeof styles> {}\n\nfunction DiceCardC(props: DiceCardProps) {\n  const { classes } = props;\n\n  const canvasRef = React.useRef(null);\n  const diceContainerEl = useRef(null);\n\n  const [diceInitialized, setDiceInitialized] = useState(false);\n  const [mouseDown, setMouseDown] = useState(false);\n  const diceService = useContext(DiceServiceContext);\n  const canvasWidth: number = (canvasRef.current && (canvasRef.current as any).getBoundingClientRect().width) || 0;\n\n  useEffect(() => {\n    if (!!diceService && !diceInitialized && canvasWidth !== 0) {\n      (window as any).dice_initialize(diceContainerEl.current, {\n        ...diceDefaultConfig,\n        diceThrow$: diceService.diceThrow$,\n        diceThrowResult$: diceService.diceThrowResult$,\n        diceBeforeThrow$: diceService.diceBeforeThrow$,\n        diceSet$: diceService.handleDiceSetFormChanges$,\n      });\n      setDiceInitialized(true);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [!!canvasWidth, !!diceService]);\n\n  const onMouseDown = (isDown: boolean): void => {\n    console.log({ isDown });\n    setMouseDown(isDown);\n  };\n\n  return (\n    <Paper elevation={3} className={classes.root}>\n      <div\n        id=\"diceCanvasContainer\"\n        ref={diceContainerEl}\n        className={clsx(classes.diceCanvas, mouseDown && classes.grabbing)}\n        onMouseDown={() => onMouseDown(true)}\n        onMouseUp={() => onMouseDown(false)}\n      >\n        <div ref={canvasRef} id=\"canvas\" />\n      </div>\n    </Paper>\n  );\n}\n\nexport const DiceCard = withStyles(styles)(DiceCardC);\n","import React from 'react';\nimport { InjectedFormProps, reduxForm } from 'redux-form';\nimport { makeStyles, Theme } from '@material-ui/core/styles';\n\nimport { createRoomFormModel } from '../../../models/rooms.model';\nimport { Dice } from '../../../models/dice.model';\nimport { FormFieldSlider } from '../../../components/FormComponents';\n\nconst styles = (theme: Theme) => ({\n  inputSlider: {\n    width: '100%',\n    marginLeft: theme.spacing(0),\n    paddingRight: theme.spacing(2),\n    minWidth: theme.spacing(40),\n  },\n});\n\ninterface DiceDashboardFormProps extends InjectedFormProps {\n  diceType: Dice[];\n}\n\nconst useStyles = makeStyles(styles);\n\nfunction DiceDashboardFormC(props: DiceDashboardFormProps) {\n  const { diceType } = props;\n  const classes = useStyles();\n  return (\n    <form onSubmit={(e: any) => e.preventDefault()}>\n      <h2>Set your dices!</h2>\n\n      <div className={classes.inputSlider}>\n        {diceType?.map(dice => (\n          <FormFieldSlider key={dice} {...(createRoomFormModel[dice] as any)} />\n        ))}\n      </div>\n    </form>\n  );\n}\nexport const DiceDashboardForm = React.memo(\n  reduxForm({\n    form: 'diceSetForm',\n    initialValues: {\n      [Dice.D4]: 0,\n      [Dice.D6]: 0,\n      [Dice.D8]: 0,\n      [Dice.D10]: 0,\n      [Dice.D12]: 0,\n      [Dice.D20]: 0,\n      [Dice.D100]: 0,\n    },\n  })(DiceDashboardFormC as any) as any\n);\n","import React from 'react';\nimport { List, ListItem, Typography } from '@material-ui/core';\n\nimport { IDiceThrowResult } from '../../../models/dice.model';\n\ninterface DiceDashboardResultProps {\n  throwResult: IDiceThrowResult | null;\n}\n\nfunction DiceDashboardResultC(props: DiceDashboardResultProps) {\n  const { throwResult } = props;\n\n  const renderResultItem = () => {\n    if (!throwResult) {\n      return '';\n    }\n\n    const resultObject: any = {};\n    throwResult?.diceSet.forEach((diceName, id) => {\n      resultObject[diceName] = [...(resultObject[diceName] || []), throwResult?.result[id]];\n    });\n\n    return Object.keys(resultObject).map(diceName => (\n      <ListItem key={diceName}>\n        <Typography variant=\"h2\" component=\"div\">\n          {diceName}: {resultObject[diceName].join(', ')}\n        </Typography>\n      </ListItem>\n    ));\n  };\n\n  return (\n    <article>\n      <h2>Throw result:</h2>\n      <List>{renderResultItem()}</List>\n    </article>\n  );\n}\nexport const DiceDashboardResult = DiceDashboardResultC;\n","import clsx from 'clsx';\nimport React, { useContext, useEffect, useState } from 'react';\nimport { Card, CardContent, CardMedia, Collapse, Grow } from '@material-ui/core';\nimport { createStyles, Theme, withStyles, WithStyles } from '@material-ui/core/styles';\nimport { useSelector } from 'react-redux';\n\nimport { DiceDashboardForm } from './components/DiceDashboardForm';\nimport { DiceDashboardResult } from './components/DiceDashboardResult';\nimport { DiceServiceContext } from '../../contexts/DiceService.context';\nimport { firestoreSelectors } from '../../store/firebase/firestore.selectors';\nimport { IDiceThrowResult } from '../../models/dice.model';\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    root: {\n      display: 'flex',\n      backgroundColor: '#f4f4f280',\n    },\n    details: {\n      display: 'flex',\n      flexDirection: 'column',\n    },\n    content: {\n      flex: '1 0 auto',\n    },\n    cover: {\n      width: theme.spacing(18),\n    },\n    playIcon: {\n      height: 38,\n      width: 38,\n    },\n    clicable: {\n      cursor: 'pointer',\n    },\n  });\n\nexport interface DiceDashboardProps extends WithStyles<typeof styles> {\n  visible?: boolean;\n}\n\nfunction DiceDashboardC(props: DiceDashboardProps) {\n  const { classes, visible = true } = props;\n\n  const roomData = useSelector(firestoreSelectors.selectedRoom);\n\n  const diceService = useContext(DiceServiceContext);\n  const [throwResult, setThrowResult] = useState<IDiceThrowResult | null>(null);\n\n  useEffect(() => {\n    diceService?.diceThrowResult$.subscribe(result => setThrowResult(result));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [!!diceService]);\n\n  return (\n    <Grow in={!!roomData && visible}>\n      <Card className={clsx(classes.root, !!throwResult && classes.clicable)} onClick={() => setThrowResult(null)}>\n        <div className={classes.details}>\n          <CardContent className={classes.content}>\n            <Collapse in={!throwResult}>\n              <DiceDashboardForm diceType={roomData?.diceType} />\n            </Collapse>\n            <Collapse in={!!throwResult}>\n              <DiceDashboardResult throwResult={throwResult} />\n            </Collapse>\n          </CardContent>\n        </div>\n        <CardMedia\n          className={classes.cover}\n          image={`${process.env.PUBLIC_URL}/assets/images/avatar-1.jpg`}\n          title=\"Bot avatar\"\n        />\n      </Card>\n    </Grow>\n  );\n}\n\nexport const DiceDashboard = withStyles(styles)(DiceDashboardC);\n","import clsx from 'clsx';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport GavelIcon from '@material-ui/icons/Gavel';\nimport HighlightOffIcon from '@material-ui/icons/HighlightOff';\nimport React from 'react';\nimport { createStyles, Theme, withStyles, WithStyles } from '@material-ui/core/styles';\nimport { GridListTile, GridListTileBar, IconButton, Tooltip } from '@material-ui/core';\n\nimport { IProfile } from '../../../models/rooms.model';\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    tile: {\n      borderRadius: theme.spacing(1),\n      marginRight: theme.spacing(2),\n      maxWidth: theme.spacing(30),\n      overflow: 'hidden',\n      padding: '0 !Important',\n      width: '100%',\n    },\n    title: {\n      color: theme.palette.primary.light,\n    },\n    titleDisable: {\n      color: theme.palette.warning.light,\n    },\n    masterGame: {\n      position: 'absolute' as 'absolute',\n      zIndex: 10,\n      top: 0,\n      right: 0,\n    },\n    titleBar: {\n      background: 'linear-gradient(to top, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 70%, rgba(0,0,0,0) 100%)',\n    },\n  });\n\ninterface PlayerTileProps extends WithStyles<typeof styles> {\n  player: IProfile;\n  gameMaster?: boolean;\n}\n\nfunction PlayerTileC(props: PlayerTileProps) {\n  const { classes, player, gameMaster } = props;\n\n  return (\n    <GridListTile className={classes.tile}>\n      <img src={player.avatarUrl || player.photoURL} alt={player.displayName} />\n      <GridListTileBar\n        title={player.displayName}\n        classes={{\n          root: classes.titleBar,\n          title: player.connected ? classes.title : classes.titleDisable,\n        }}\n        actionIcon={\n          <Tooltip title={player.connected ? 'Online' : 'Offline'}>\n            <IconButton aria-label={`star ${player.displayName}`}>\n              {player.connected ? (\n                <CheckCircleIcon className={classes.title} />\n              ) : (\n                <HighlightOffIcon className={classes.titleDisable} />\n              )}\n            </IconButton>\n          </Tooltip>\n        }\n      />\n\n      {gameMaster && (\n        <Tooltip\n          className={clsx(classes.masterGame, player.connected ? classes.title : classes.titleDisable)}\n          title={'Game Master'}\n        >\n          <IconButton aria-label={`star ${player.displayName}`}>\n            <GavelIcon />\n          </IconButton>\n        </Tooltip>\n      )}\n    </GridListTile>\n  );\n}\n\nexport const PlayerTile = React.memo(withStyles(styles)(PlayerTileC));\n","import React from 'react';\nimport { createStyles, Theme, withStyles, WithStyles } from '@material-ui/core/styles';\nimport { GridList, Grow, Slide } from '@material-ui/core';\nimport { useSelector } from 'react-redux';\n\nimport { firestoreSelectors } from '../../store/firebase/firestore.selectors';\nimport { PlayerTile } from './components/PlayerTile';\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    root: {\n      display: 'flex',\n      flexWrap: 'wrap',\n      justifyContent: 'space-around',\n      overflow: 'hidden',\n      backgroundColor: theme.palette.background.paper,\n    },\n    gridList: {\n      height: theme.spacing(20),\n      width: '100%',\n      flexWrap: 'nowrap',\n      transform: 'translateZ(0)',\n    },\n  });\n\ninterface PlayersProps extends WithStyles<typeof styles> {\n  visible?: boolean;\n}\n\nfunction PlayersC(props: PlayersProps) {\n  const { classes, visible } = props;\n\n  const players = useSelector(firestoreSelectors.selectedRoomPlayers);\n  const gameMaster = useSelector(firestoreSelectors.selectedRoomGameMasterProfile);\n\n  return (\n    <Slide direction=\"up\" in={visible}>\n      <GridList className={classes.gridList} cols={2.5}>\n        {gameMaster && (\n          <Grow in timeout={300}>\n            <PlayerTile player={gameMaster} gameMaster />\n          </Grow>\n        )}\n\n        {players &&\n          players.map((player, id) => (\n            <Grow in key={player.uid} timeout={1000 * id + 1300}>\n              <PlayerTile player={player} />\n            </Grow>\n          ))}\n      </GridList>\n    </Slide>\n  );\n}\n\nexport const Players = withStyles(styles)(PlayersC);\n","import React from 'react';\nimport SpeedDial from '@material-ui/lab/SpeedDial';\nimport SpeedDialAction from '@material-ui/lab/SpeedDialAction';\nimport SpeedDialIcon from '@material-ui/lab/SpeedDialIcon';\nimport { createStyles, Theme, withStyles, WithStyles } from '@material-ui/core/styles';\n\nconst styles = (theme: Theme) => createStyles({});\ntype extend = WithStyles<typeof styles>;\n\nexport interface ISpeedDialAction {\n  icon: React.ReactElement;\n  name: string;\n  callback?: (callback: () => void) => void;\n}\n\ninterface SpeedDialCProps extends extend {\n  direction?: 'up' | 'down' | 'left' | 'right';\n  actions: ISpeedDialAction[];\n}\n\nfunction SpeedDialC(props: SpeedDialCProps) {\n  const { direction = 'left', actions } = props;\n\n  const [open, setOpen] = React.useState(false);\n  const handleClose = () => setOpen(false);\n  const handleOpen = () => setOpen(true);\n\n  return (\n    <SpeedDial\n      ariaLabel=\"SpeedDial example\"\n      icon={<SpeedDialIcon />}\n      onClose={handleClose}\n      onOpen={handleOpen}\n      open={open}\n      direction={direction}\n    >\n      {actions.map(action => (\n        <SpeedDialAction\n          key={action.name}\n          icon={action.icon}\n          tooltipTitle={action.name}\n          onClick={() => (action.callback ? action.callback(handleClose) : handleClose())}\n        />\n      ))}\n    </SpeedDial>\n  );\n}\n\nexport const SpeedDialWrapper =  React.memo(withStyles(styles)(SpeedDialC));\n","import ForumIcon from '@material-ui/icons/Forum';\nimport GroupIcon from '@material-ui/icons/Group';\nimport NavigateBeforeIcon from '@material-ui/icons/NavigateBefore';\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext';\nimport React from 'react';\nimport ShareIcon from '@material-ui/icons/Share';\nimport { createStyles, Theme, withStyles, WithStyles } from '@material-ui/core/styles';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Snackbar } from '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\n\nimport { mainSelectors } from '../../../../store/main.selectors';\nimport { roomsActions } from '../../../../store/rooms/rooms.actions';\nimport { ISpeedDialAction, SpeedDialWrapper } from '../../../../components/SpeedDial';\nimport { roomsSelectors } from '../../../../store/rooms/rooms.selectors';\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    snackbar: {\n      top: theme.spacing(8),\n    },\n  });\ninterface RoomSpeedDialCProps extends WithStyles<typeof styles> {}\n\nfunction RoomSpeedDialC(props: RoomSpeedDialCProps) {\n  const { classes } = props;\n  const dispatch = useDispatch();\n\n  const isGameMasterOfSelectedRoom = useSelector(mainSelectors.isGameMasterOfSelectedRoom);\n  const drawerOpened = useSelector(roomsSelectors.drawerOpened);\n  const chatOpened = useSelector(roomsSelectors.chatOpened);\n  const playersOpened = useSelector(roomsSelectors.playersOpened);\n  const [snackbarConfig, setSnackbarConfig] = React.useState<{\n    type: 'success' | 'error';\n    open: boolean;\n    text: string;\n  }>({\n    type: 'success',\n    open: false,\n    text: '',\n  });\n\n  function copyRoomUrlToClipboard(): void {\n    navigator.permissions.query({ name: 'clipboard-write' as any }).then(result => {\n      if (result.state === 'granted' || result.state === 'prompt') {\n        navigator.clipboard.writeText(window.location.href).then(\n          () => setSnackbarConfig({ type: 'success', open: true, text: 'Room URL copied to clipboard!' }),\n          () => setSnackbarConfig({ type: 'error', open: true, text: 'Upss.. there was an error' })\n        );\n      }\n    });\n  }\n\n  const actionsAdditional: ISpeedDialAction[] = isGameMasterOfSelectedRoom ? [] : [];\n  const actions: ISpeedDialAction[] = [\n    {\n      icon: drawerOpened ? <NavigateBeforeIcon /> : <NavigateNextIcon />,\n      name: drawerOpened ? 'Hide Nav' : 'Show Nav',\n      callback: cb => dispatch(roomsActions.setDrawerOpenValue(!drawerOpened)),\n    },\n    {\n      icon: <ForumIcon />,\n      name: chatOpened ? 'Hide chat' : 'Show Chat',\n      callback: cb => dispatch(roomsActions.setChatOpenValue(!chatOpened)),\n    },\n    {\n      icon: <GroupIcon />,\n      name: playersOpened ? 'Hide players' : 'Show players',\n      callback: cb => dispatch(roomsActions.setPlayersOpenValue(!playersOpened)),\n    },\n    {\n      icon: <ShareIcon />,\n      name: 'Copy Room Url',\n      callback: cb => copyRoomUrlToClipboard(),\n    },\n    ...actionsAdditional,\n  ];\n\n  return (\n    <React.Fragment>\n      <SpeedDialWrapper actions={actions} direction={'right'} />\n      <Snackbar\n        className={classes.snackbar}\n        anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\n        open={snackbarConfig.open}\n        autoHideDuration={6000}\n        onClose={() => setSnackbarConfig({ ...snackbarConfig, open: false })}\n      >\n        <Alert onClose={() => setSnackbarConfig({ ...snackbarConfig, open: false })} severity={snackbarConfig.type}>\n          {snackbarConfig.text}\n        </Alert>\n      </Snackbar>\n    </React.Fragment>\n  );\n}\n\nexport const RoomSpeedDialWrapper = withStyles(styles)(RoomSpeedDialC);\n","import clsx from 'clsx';\nimport React from 'react';\nimport { makeStyles, Theme } from '@material-ui/core/styles';\nimport { useSelector } from 'react-redux';\n\nimport { Chatter } from '../../../../modules/Chatter';\nimport { DiceCard } from '../../../../modules/DiceCard/DiceCard';\nimport { DiceDashboard } from '../../../../modules/DiceDashboard/DiceDashbard';\nimport { Players } from '../../../../modules/Players/Players';\nimport { RoomSpeedDialWrapper } from './RoomSpeedDial';\nimport { roomsSelectors } from '../../../../store/rooms/rooms.selectors';\n\n// TODO: update grid heights when no profiles\nconst styles = (theme: Theme) => ({\n  root: {\n    position: 'relative' as 'relative',\n    margin: theme.spacing(-6, -4),\n    height: `calc(100% + ${theme.spacing(12)}px)`,\n  },\n  diceWrapper: {},\n  chatter: {\n    zIndex: 10,\n    position: 'fixed' as 'fixed',\n    bottom: theme.spacing(4),\n    // bottom: theme.spacing(26), // TODO: update height or grid structure\n    right: theme.spacing(2),\n    transition: 'bottom 225ms cubic-bezier(0, 0, 0.2, 1) 0ms',\n  },\n  chatterLower: {\n    bottom: theme.spacing(4),\n  },\n  speedDial: {\n    position: 'absolute' as 'absolute',\n    bottom: theme.spacing(25),\n    left: theme.spacing(3),\n    zIndex: 10,\n    transition: 'bottom 225ms cubic-bezier(0, 0, 0.2, 1) 0ms',\n  },\n  speedDialLower: {\n    bottom: theme.spacing(3),\n  },\n  cssGrid: {\n    height: '100%',\n    display: 'grid',\n    gridTemplateColumns: '1fr',\n    gridTemplateRows: '1fr 160px',\n    rowGap: `${theme.spacing(2)}px`,\n    columnGap: `${theme.spacing(2)}px`,\n    padding: theme.spacing(2, 2, 0, 2),\n  },\n  cssItem1: {\n    gridColumn: 1,\n    gridRow: 1,\n  },\n  cssItem2: {\n    gridColumn: 1,\n    gridRow: 2,\n  },\n  diceDashboard: {\n    position: 'absolute' as 'absolute',\n    zIndex: 100,\n    top: theme.spacing(3),\n    left: theme.spacing(3),\n  },\n});\n\nconst useStyles = makeStyles(styles);\n\nexport interface RoomViewProps {}\n\nexport function RoomView(props: RoomViewProps) {\n  const classes = useStyles();\n\n  const playersOpened = useSelector(roomsSelectors.playersOpened);\n  const chatOpened = useSelector(roomsSelectors.chatOpened);\n  const diceRolling = useSelector(roomsSelectors.diceRolling);\n\n  return (\n    <section className={classes.root}>\n      <div className={clsx(classes.chatter, !playersOpened && classes.chatterLower)}>\n        <Chatter visbile={chatOpened && !diceRolling} />\n      </div>\n\n      <div className={classes.cssGrid}>\n        <div className={classes.cssItem1}>\n          <DiceCard />\n        </div>\n        <div className={classes.cssItem2}>\n          <Players visible={playersOpened} />\n        </div>\n      </div>\n\n      <nav className={clsx(classes.speedDial, !playersOpened && classes.speedDialLower)}>\n        <RoomSpeedDialWrapper />\n      </nav>\n\n      <nav className={classes.diceDashboard}>\n        <DiceDashboard visible={!diceRolling} />\n      </nav>\n    </section>\n  );\n}\n","import { enhancedRoomList } from './RoomPage.enhancer';\nimport { RoomC } from './RoomPage';\n\nexport default enhancedRoomList(RoomC);\n","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useFirestore } from 'react-redux-firebase';\n\nimport { chatsActions } from '../../../store/chats/chats.actions';\nimport { firebaseSelectors } from '../../../store/firebase/firebase.selectors';\nimport { FirestoreCollection } from '../../../models/firestore.model';\nimport { firestoreSelectors } from '../../../store/firebase/firestore.selectors';\nimport { locationActions } from '../../../store/location/location.actions';\nimport { LocationMatch } from '../../../store/location/location.model';\nimport { locationSelectors } from '../../../store/location/location.selectors';\nimport { roomsActions } from '../../../store/rooms/rooms.actions';\nimport { roomsSelectors } from '../../../store/rooms/rooms.selectors';\nimport { DiceServiceContextC } from '../../../contexts/DiceService.context';\nimport { RoomView } from './components/RoomPageView';\n\n//\n\nexport interface RoomListProps {\n  match: LocationMatch;\n}\n\nexport function RoomC(props: RoomListProps) {\n  const { match } = props;\n\n  const dispatch = useDispatch();\n  const firestore = useFirestore();\n\n  const selectedRoomData = useSelector(firestoreSelectors.selectedRoom);\n  const selectedRoomUid = useSelector(roomsSelectors.selectedRoomUid);\n  const storeLocationMatch = useSelector(locationSelectors.match);\n  const userProfile = useSelector(firebaseSelectors.userProfile);\n\n  /**\n   * Effects logic\n   */\n  function onChangeSetLocationMatch(): void {\n    if (JSON.stringify(match) !== JSON.stringify(storeLocationMatch)) {\n      dispatch(locationActions.matchChange(match));\n    }\n    dispatch(roomsActions.setSelectedRoom((storeLocationMatch.params as any)['roomId']));\n  }\n  function onUnmountSetSelectedRoomToNull(): void {\n    dispatch(roomsActions.setSelectedRoom(null));\n  }\n  function onChangeSetSelectedChat(): void {\n    dispatch(chatsActions.setSelectedChat(selectedRoomData?.chatUid || null));\n  }\n  function onEnterTheRoomAddUserToPlayers(): void {\n    if (!selectedRoomData?.players || !userProfile.uid || selectedRoomData.gameMaster.uid === userProfile.uid) {\n      return;\n    }\n\n    if (selectedRoomData.players.indexOf(userProfile.uid) === -1) {\n      const documentRef = firestore.doc(`${FirestoreCollection.ROOMS}/${selectedRoomUid}`);\n      firestore.runTransaction((t: any) => {\n        return t\n          .get(documentRef)\n          .then((doc: any) => {\n            const players = [...doc.data().players, userProfile.uid];\n            return t.update(documentRef, { players });\n          })\n          .catch((err: any) => {\n            // TODO: add toast message\n            // TRANSACTION_FAILURE action dispatched\n            console.log('Transaction failure:', err);\n          });\n      });\n    }\n  }\n\n  /**\n   * Effects\n   */\n  useEffect(() => onChangeSetLocationMatch());\n\n  useEffect(() => {\n    onEnterTheRoomAddUserToPlayers();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedRoomUid, selectedRoomData?.createdAt, userProfile.uid]);\n\n  useEffect(() => {\n    return () => onUnmountSetSelectedRoomToNull();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    onChangeSetSelectedChat();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedRoomData?.chatUid]);\n\n  return (\n    <DiceServiceContextC>\n      <RoomView />\n    </DiceServiceContextC>\n  );\n}\n"],"sourceRoot":""}